(function(a){if("function"===typeof define&&define.amd)define(["leaflet"],a);else if("undefined"!==typeof module)module.exports=a(require("leaflet"));else{if("undefined"===typeof window.L)throw Error("Leaflet must be loaded first");a(window.L)}})(function(a){a.Control.Fullscreen=a.Control.extend({options:{position:"topleft",title:{"false":"View Fullscreen","true":"Exit Fullscreen"}},onAdd:function(b){var c=a.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");this.link=a.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",c);this.link.href="#";this._map=b;this._map.on("fullscreenchange",this._toggleTitle,this);this._toggleTitle();a.DomEvent.on(this.link,"click",this._click,this);return c},_click:function(b){a.DomEvent.stopPropagation(b);a.DomEvent.preventDefault(b);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});a.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(b){var a=this.getContainer();this.isFullscreen()?b&&b.pseudoFullscreen?this._disablePseudoFullscreen(a):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(a):b&&b.pseudoFullscreen?this._enablePseudoFullscreen(a):a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):a.msRequestFullscreen?a.msRequestFullscreen():this._enablePseudoFullscreen(a)},_enablePseudoFullscreen:function(b){a.DomUtil.addClass(b,"leaflet-pseudo-fullscreen");this._setFullscreen(!0);this.fire("fullscreenchange")},_disablePseudoFullscreen:function(b){a.DomUtil.removeClass(b,"leaflet-pseudo-fullscreen");this._setFullscreen(!1);this.fire("fullscreenchange")},_setFullscreen:function(b){this._isFullscreen=b;var c=this.getContainer();b?a.DomUtil.addClass(c,"leaflet-fullscreen-on"):a.DomUtil.removeClass(c,"leaflet-fullscreen-on");this.invalidateSize()},_onFullscreenChange:function(a){a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;a!==this.getContainer()||this._isFullscreen?a!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}});a.Map.mergeOptions({fullscreenControl:!1});a.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new a.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var b;"onfullscreenchange"in document?b="fullscreenchange":"onmozfullscreenchange"in document?b="mozfullscreenchange":"onwebkitfullscreenchange"in document?b="webkitfullscreenchange":"onmsfullscreenchange"in document&&(b="MSFullscreenChange");if(b){var c=a.bind(this._onFullscreenChange,this);this.whenReady(function(){a.DomEvent.on(document,b,c)});this.on("unload",function(){a.DomEvent.off(document,b,c)})}});a.control.fullscreen=function(b){return new a.Control.Fullscreen(b)}})