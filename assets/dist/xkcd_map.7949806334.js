(()=>{"use strict";function t(t){return function(t){return document.getElementById(t)}(t)}var e;const n=new L.LatLng(1.1,.2),o=10,i=L.map("map",{center:n,zoom:o,crs:L.Util.extend({},L.CRS.EPSG3857,{infinite:!0}),fullscreenControl:!0});i.attributionControl.setPrefix(""),i.attributionControl.addAttribution('<span id="attribution"><a href="//victorz.ca">Victor</a>&rsquo;s zoomable visualization of <a href="https://xkcd.com/1110/" rel="external nofollow">xkcd: Click and Drag</a></span> (<a href="https://creativecommons.org/licenses/by-nc/2.5/">CC-BY-NC 2.5</a>)'),i.attributionControl.addAttribution('inspired by <a href="https://xkcd-map.rent-a-geek.de">dividuum</a>\'s map'),i.attributionControl.addAttribution('images served by <a href="https://github.com">GitHub</a> (with <a href="https://www.fastly.com">Fastly</a>)'),i.attributionControl.addAttribution('<script id="_wau_target"><\/script>'),i.attributionControl.addAttribution('powered by <a href="https://leafletjs.com">Leaflet</a>'),window._wau=null!==(e=window._wau)&&void 0!==e?e:[["small","xvictorx","_target"]],function(){const t=document.createElement("script");t.async=!0,t.src="//widgets.amung.us/small.js",document.getElementsByTagName("head")[0].appendChild(t)}(),i.on("dragstart",(function e(){const n=t("autoclose");n.parentNode&&n.parentNode.removeChild(n),i.off("dragstart",e)})),i.on("movestart",(function e(){t("intro").style.display="none",i.off("movestart",e)}));const r="https://vwww.github.io/xkcd-map/converted/{z}-{x}-{y}.png";function a(t,e,n){return t in available&&available[t].includes(e+"-"+n)}const s=L.tileLayer(r,{maxZoom:o,subdomains:"1234567890"}),l=L.tileLayer(r,{minZoom:2,maxZoom:4,subdomains:"1234567890"});s.getTileUrl=l.getTileUrl=function(t,e){if(a(e=e||this._getZoomForUrl(),t.x,t.y))return L.Util.template(this._url,L.Util.extend({s:this._getSubdomain(t),z:e,x:t.x,y:t.y},this.options));let n="ground";return e?t.y<1<<e-1&&(n="sky"):(t.y||(n="split"),t.y<0&&(n="sky")),"https://vwww.github.io/xkcd-map/"+n+".png"},s.addTo(i);const c=L.GridLayer.extend({createTile:function(t){const e=document.createElement("canvas"),n=this.getTileSize();if(e.setAttribute("width",n.x),e.setAttribute("height",n.y),e.getContext("2d"))return this.drawTile(e,t,t.z),e}});function d(t,e,n,i,r){const s=(t<<o-r)+n,l=(e<<o-r)+i;let c=s+1-64;if(c<=-33||c>48)return!1;let d=l+1-64;if(d<=-19||d>13)return!1;c>=0?c+="e":c=1-c+"w",d>=0?d+="s":d=1-d+"n";const u=d+c+".png";return a(7,s,l)?u:"("+u+")"}const u=new c({maxZoom:o,tileSize:2048});u.drawTile=function(t,e,n){if(n<5)return;if(e.x<0||e.x>=1<<n)return;if(e.y<0||e.y>=1<<n)return;const i=t.getContext("2d");if(!i)return;i.strokeStyle=i.fillStyle="green";const r=2<<n,a=1<<o-n;for(let t=0;t<a;++t)for(let o=0;o<a;++o){const a=t*r,s=o*r,l=d(e.x,e.y,t,o,n);l&&(i.strokeRect(a,s,r,r),i.fillText(l,a+5,s+10))}};const f=new c({maxZoom:o});f.drawTile=function(t,e,n){if(e.x<0||e.x>=1<<n)return;if(e.y<0||e.y>=1<<n)return;const o=t.getContext("2d");o&&(o.strokeStyle=o.fillStyle="red",o.strokeRect(0,0,256,256),o.fillText("("+e.x+", "+e.y+")",5,10))};const m=new c({maxZoom:o});m.drawTile=function(t,e,n){if(!a(n,e.x,e.y))return;const o=t.getContext("2d");o&&(o.strokeStyle=o.fillStyle="blue",o.strokeRect(0,0,256,256))};const y={"xkcd 1110":s},g={File:u,Coordinates:f,Content:m};L.control.layers(y,g).addTo(i),new L.Control.MiniMap(l,{width:250,height:200,zoomLevelOffset:-4,toggleDisplay:!0,autoToggleDisplay:!0}).addTo(i),new L.Hash(i)})();