(()=>{"use strict";var t,e={381:(t,e,n)=>{var o,s,r,l,a,i=n(0),c=n(39),u=n(40),d=n(41),m=n(42),h=n(43),f=n(28),g=n(44),R=n(6),p=n(451),b=n(19);!function(t){t[t.ROUND_WAIT=9]="ROUND_WAIT",t[t.ROUND_INTERM=10]="ROUND_INTERM",t[t.ROUND_START=11]="ROUND_START",t[t.READY=12]="READY",t[t.MOVE_CONFIRM=13]="MOVE_CONFIRM",t[t.END_ROUND=14]="END_ROUND",t[t.END_TURN=15]="END_TURN",t[t.NUM=16]="NUM"}(o||(o={})),function(t){t[t.READY=5]="READY",t[t.MOVE=6]="MOVE",t[t.MOVE_END=7]="MOVE_END",t[t.NUM=8]="NUM"}(s||(s={})),function(t){t[t.WAITING=0]="WAITING",t[t.INTERMISSION=1]="INTERMISSION",t[t.ACTIVE=2]="ACTIVE"}(r||(r={}));class T extends b.R7{constructor(){super(...arguments),this.isReady=(0,R.$_)(!1),this.inRound=(0,R.$_)(!1),this.roundState=(0,R.$_)(0),this.roundTimerStart=(0,R.$_)(0),this.roundTimerEnd=(0,R.$_)(0),this.roundPlayers=(0,R.$_)([]),this.roundPlayerQueue=(0,R.$_)([]),this.INTERMISSION_TIME=3e4,this.ROUND_TIME=2e4}sendReady(t){var e;null===(e=this.room)||void 0===e||e.send((new p.T).putInt(s.READY).putBool(t).toArray())}sendMoveEnd(){var t;null===(t=this.room)||void 0===t||t.send((new p.T).putInt(s.MOVE_END).toArray())}roundWait(){this.roundState.set(r.WAITING),this.unsetReady()}roundIntermission(t){this.roundState.set(r.INTERMISSION),this.setTimer(t),this.unsetReady(),this.isReady.set(!1)}roundStart(t){this.roundState.set(r.ACTIVE),this.setTimer(t),this.unsetReady()}roundSetPlayers(t){this.roundPlayers.set(t)}roundSetPlayerQueue(t){this.roundPlayerQueue.set(t)}setTimer(t){this.roundTimerStart.set(Date.now()),this.roundTimerEnd.set(Date.now()+t)}processWelcomeGame(t){const e=t.getInt();if(0===e)this.roundWait();else if(1===e){this.roundIntermission(t.getInt());for(let e=0;e<=this.clients.size;e++){const e=t.getInt();if(e<0)break;const n=this.clients.get(e);n&&(n.ready=!0)}}else 2===e&&this.roundStart(t.getInt());const n=[];for(let e=0;e<=this.clients.size;e++){const e=t.getInt();if(e<0)break;const o=this.clients.get(e);o&&(o.inRound=!0,n.push(o))}this.roundSetPlayers(n);const o=[];for(let e=0;e<=this.clients.size;e++){const e=t.getInt();if(e<0)break;const n=this.clients.get(e);n&&o.push(n)}this.roundSetPlayerQueue(o),this.processWelcomeGame2(t)}processWelcomeGame2(t){}playerActivated(t){this.roundPlayerQueue.update((e=>[...e,t]))}playerDeactivated(t){this.roundPlayers.update((e=>e.filter((e=>e!==t)))),this.roundPlayerQueue.update((e=>e.filter((e=>e!==t)))),t.inRound=!1,t.isMe&&this.inRound.set(!1)}processMessage2(t,e){var n,s;switch(t){case o.ROUND_WAIT:this.roundWait();break;case o.ROUND_INTERM:this.roundIntermission(this.INTERMISSION_TIME);break;case o.ROUND_START:{const t=[];for(const t of this.clients.values())t.inRound=!1;for(let n=0;n<=this.clients.size;n++){const n=e.getInt();if(n<0)break;const o=this.clients.get(n);o&&(o.inRound=!0,t.push(o))}this.inRound.set(null!==(s=null===(n=this.clients.get(this.myCn))||void 0===n?void 0:n.inRound)&&void 0!==s&&s),this.roundSetPlayers(t),this.roundSetPlayerQueue([]),this.roundStart(this.ROUND_TIME),this.processRoundStart(e);break}case o.READY:{const t=e.getInt(),n=e.getBool(),o=this.clients.get(t);o&&(o.ready=n,t===this.myCn&&this.isReady.set(n),this.updatePlayers(!0),this.roundPlayers.update((t=>t)),this.roundPlayerQueue.update((t=>t)));break}case o.MOVE_CONFIRM:this.processMoveConfirm(e);break;case o.END_TURN:this.processEndTurn(e);break;case o.END_ROUND:this.processEndRound(e);break;default:return this.processMessage3(t,e)}return!0}processRoundStart(t){}processMessage3(t,e){return!1}unsetReady(){for(const t of this.clients.values())t.ready=!1}}T.DEFAULT_PLAYER=Object.assign(Object.assign({},b.R7.DEFAULT_PLAYER),{ready:!1,inRound:!1}),function(t){t[t.NUM=16]="NUM"}(l||(l={})),function(t){t[t.NUM=8]="NUM"}(a||(a={}));class $ extends T{constructor(){super(...arguments),this.INTERMISSION_TIME=5e3,this.ROUND_TIME=3e3}processEndTurn(t){}}$.DEFAULT_PLAYER=T.DEFAULT_PLAYER;class L extends ${constructor(){super(...arguments),this.modeClassic=(0,R.$_)(!1),this.modeInverted=(0,R.$_)(!1),this.modeCount=(0,R.$_)(!1),this.modeRoundTime=(0,R.$_)(0),this.modeBotBalance=(0,R.$_)(0),this.pendingMove=(0,R.$_)(0),this.playersSortProps=[t=>t.roundStreak,t=>t.roundWins-t.roundLosses,t=>t.roundWins,t=>t.battleWins-t.battleLosses,t=>t.battleWins],this.ROUND_TIME=0}sendMove(t){var e;null===(e=this.room)||void 0===e||e.send((new p.T).putInt(s.MOVE).putInt(t).toArray())}processMoveConfirm(t){this.pendingMove.set(t.getInt())}processEndRound(t){const e=t.getInt(),n=[y(t.getInt()),y(t.getInt()),y(t.getInt())],o=[t.getFloat64(),t.getFloat64(),t.getFloat64()],s=o.slice(),r=this.modeClassic.get(),l=Math.min(t.getInt(),this.clients.size),a=function(t,e){const n=[[0,0,0],[0,0,0],[0,0,0]];for(let o=0;o<3;o++)t[o]&&(n[o][1]+=t[o]-1,n[o][1+e[o]]+=t[(o+1)%3],n[o][1-e[(o+2)%3]]+=t[(o+2)%3]);return n}(o,n),i=a.map((t=>({ltw:t,players:[]})));let c;for(let e=0;e<l;e++){const e=t.getInt(),n=t.getInt();if(!(this.clients.has(e)&&0<=n&&n<3))continue;const o=this.clients.get(e);if(!o)continue;s[n]--,i[n].players.push({name:o.name,cn:o.cn});const l=a[n];o.battleLosses+=l[0],o.battleTies+=l[1],o.battleWins+=l[2],l[2]>l[0]?(o.roundWins++,o.roundStreak<0&&(o.roundStreak=0),o.roundStreak++,o.roundScore+=o.roundStreak>2&&!r?o.roundStreak-1:1):l[2]<l[0]?(o.roundLosses++,o.roundStreak>0&&(o.roundStreak=0),o.roundStreak--,o.roundScore--):o.roundTies++,e===this.myCn&&(c={move:n,battleLTW:l,newStreak:o.roundStreak})}const u={local:c,outcomes:n,count:o,botCount:s,moves:i,detRandBits:e};this.updatePlayers(),this.addHistory(u)}processWelcomeMode(t){this.modeClassic.set(t.getBool()),this.modeInverted.set(t.getBool()),this.modeCount.set(t.getBool()),this.modeRoundTime.set(this.ROUND_TIME=t.getInt()),this.modeBotBalance.set(t.getInt())}processWelcomePlayer(t,e){e.roundScore=t.getInt(),e.roundStreak=t.getInt(),e.roundWins=t.getInt(),e.roundLosses=t.getInt(),e.roundTies=t.getInt(),e.battleWins=t.getFloat64(),e.battleLosses=t.getFloat64(),e.battleTies=t.getFloat64()}playerResetStats(t){t.roundScore=0,t.roundStreak=0,t.roundWins=0,t.roundLosses=0,t.roundTies=0,t.battleWins=0,t.battleLosses=0,t.battleTies=0}makePlayer(){return Object.assign(Object.assign({},$.DEFAULT_PLAYER),{roundScore:0,roundStreak:0,roundWins:0,roundLosses:0,roundTies:0,battleWins:0,battleLosses:0,battleTies:0})}}function y(t){return t<0?-1:t>0?1:0}function I(t,e,n){const o=t.slice();return o[2]=e[n],o}function v(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function S(t,e,n){const o=t.slice();return o[8]=e[n],o}function D(t,e,n){const o=t.slice();return o[5]=e[n],o[7]=n,o}function N(t){let e;return{c(){e=(0,i.bG)("li"),e.textContent="No past games!",(0,i.Lj)(e,"class","list-group-item")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function M(t){let e,n,o,s,r,l,a,c,u,d,m,h,f,g,R,p=t[2].local.newStreak>0?"+":"",b=t[2].local.newStreak+"",T=t[2].local.battleLTW[2]+"",$=t[2].local.battleLTW[0]+"",L=t[2].local.battleLTW[1]+"";return{c(){e=(0,i.bG)("p"),n=(0,i.fL)("You: "),o=(0,i.bG)("span"),s=(0,i.fL)(p),r=(0,i.fL)(b),l=(0,i.fL)(" streak;\n          "),a=(0,i.bG)("span"),c=(0,i.fL)(T),u=(0,i.fL)(" win,\n          "),d=(0,i.bG)("span"),m=(0,i.fL)($),h=(0,i.fL)(" lose,\n          "),f=(0,i.bG)("span"),g=(0,i.fL)(L),R=(0,i.fL)(" tie"),(0,i.Lj)(o,"class","badge bg-primary"),(0,i.Lj)(a,"class","badge bg-success"),(0,i.Lj)(d,"class","badge bg-danger"),(0,i.Lj)(f,"class","badge bg-warning")},m(t,p){(0,i.$T)(t,e,p),(0,i.R3)(e,n),(0,i.R3)(e,o),(0,i.R3)(o,s),(0,i.R3)(o,r),(0,i.R3)(e,l),(0,i.R3)(e,a),(0,i.R3)(a,c),(0,i.R3)(e,u),(0,i.R3)(e,d),(0,i.R3)(d,m),(0,i.R3)(e,h),(0,i.R3)(e,f),(0,i.R3)(f,g),(0,i.R3)(e,R)},p(t,e){1&e&&p!==(p=t[2].local.newStreak>0?"+":"")&&(0,i.rT)(s,p),1&e&&b!==(b=t[2].local.newStreak+"")&&(0,i.rT)(r,b),1&e&&T!==(T=t[2].local.battleLTW[2]+"")&&(0,i.rT)(c,T),1&e&&$!==($=t[2].local.battleLTW[0]+"")&&(0,i.rT)(m,$),1&e&&L!==(L=t[2].local.battleLTW[1]+"")&&(0,i.rT)(g,L)},d(t){t&&(0,i.og)(e)}}}function E(t){let e;return{c(){e=(0,i.fL)("<")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function G(t){let e;return{c(){e=(0,i.fL)(">")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function C(t){let e,n,o,s,r,l,a,c,u,d,m,h,f,g,R,p,b,T,$=t[2].count[(t[7]+1)%3]+"",L=t[5].b+"",y=A(t[5].text[t[2].outcomes[t[7]]+1],t[5].textBitShift,t[2].detRandBits)+"",I=t[5].a+"",v=t[2].count[t[7]]+"",S=t[2].outcomes[t[7]]>0&&E(),D=t[2].outcomes[t[7]]<0&&G();return{c(){e=(0,i.bG)("tr"),n=(0,i.bG)("td"),o=(0,i.fL)($),s=(0,i.Dh)(),r=(0,i.bG)("td"),l=(0,i.fL)(L),a=(0,i.Dh)(),c=(0,i.bG)("span"),S&&S.c(),u=(0,i.Dh)(),d=(0,i.fL)(y),m=(0,i.Dh)(),D&&D.c(),f=(0,i.Dh)(),g=(0,i.fL)(I),R=(0,i.Dh)(),p=(0,i.bG)("td"),b=(0,i.fL)(v),T=(0,i.Dh)(),(0,i.VH)(n,"table-danger",t[2].local&&t[2].local.move===t[7]),(0,i.Lj)(c,"class",h="badge bg-"+(t[2].outcomes[t[7]]<0?"primary":t[2].outcomes[t[7]]>0?"danger":"secondary")),(0,i.VH)(p,"table-success",t[2].local&&t[2].local.move===(t[7]+1)%3)},m(t,h){(0,i.$T)(t,e,h),(0,i.R3)(e,n),(0,i.R3)(n,o),(0,i.R3)(e,s),(0,i.R3)(e,r),(0,i.R3)(r,l),(0,i.R3)(r,a),(0,i.R3)(r,c),S&&S.m(c,null),(0,i.R3)(c,u),(0,i.R3)(c,d),(0,i.R3)(c,m),D&&D.m(c,null),(0,i.R3)(r,f),(0,i.R3)(r,g),(0,i.R3)(e,R),(0,i.R3)(e,p),(0,i.R3)(p,b),(0,i.R3)(e,T)},p(t,e){1&e&&$!==($=t[2].count[(t[7]+1)%3]+"")&&(0,i.rT)(o,$),1&e&&(0,i.VH)(n,"table-danger",t[2].local&&t[2].local.move===t[7]),t[2].outcomes[t[7]]>0?S||(S=E(),S.c(),S.m(c,u)):S&&(S.d(1),S=null),1&e&&y!==(y=A(t[5].text[t[2].outcomes[t[7]]+1],t[5].textBitShift,t[2].detRandBits)+"")&&(0,i.rT)(d,y),t[2].outcomes[t[7]]<0?D||(D=G(),D.c(),D.m(c,null)):D&&(D.d(1),D=null),1&e&&h!==(h="badge bg-"+(t[2].outcomes[t[7]]<0?"primary":t[2].outcomes[t[7]]>0?"danger":"secondary"))&&(0,i.Lj)(c,"class",h),1&e&&v!==(v=t[2].count[t[7]]+"")&&(0,i.rT)(b,v),1&e&&(0,i.VH)(p,"table-success",t[2].local&&t[2].local.move===(t[7]+1)%3)},d(t){t&&(0,i.og)(e),S&&S.d(),D&&D.d()}}}function O(t){let e,n,o,s,r,l=t[8].name+"",a=t[8].cn+"";return{c(){e=(0,i.bG)("span"),n=(0,i.fL)(l),o=(0,i.fL)(" ("),s=(0,i.fL)(a),r=(0,i.fL)(")"),(0,i.Lj)(e,"class","badge bg-secondary")},m(t,l){(0,i.$T)(t,e,l),(0,i.R3)(e,n),(0,i.R3)(e,o),(0,i.R3)(e,s),(0,i.R3)(e,r)},p(t,e){1&e&&l!==(l=t[8].name+"")&&(0,i.rT)(n,l),1&e&&a!==(a=t[8].cn+"")&&(0,i.rT)(s,a)},d(t){t&&(0,i.og)(e)}}}function _(t){let e,n,o,s=t[2].botCount[t[7]]+"";return{c(){e=(0,i.bG)("span"),n=(0,i.fL)("+"),o=(0,i.fL)(s),(0,i.Lj)(e,"class","badge bg-secondary")},m(t,s){(0,i.$T)(t,e,s),(0,i.R3)(e,n),(0,i.R3)(e,o)},p(t,e){1&e&&s!==(s=t[2].botCount[t[7]]+"")&&(0,i.rT)(o,s)},d(t){t&&(0,i.og)(e)}}}function w(t){let e;return{c(){e=(0,i.fL)("nobody")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function k(t){let e,n,o,s,r,l,a,c,u,d,m,h,f,g,R,p,b,T,$,L,y=["Rock","Paper","Scissors"][t[7]]+"",I=t[5].ltw[2]+"",v=t[5].ltw[1]+"",D=t[5].ltw[0]+"",N=t[2].count[t[7]]+"",M=t[5].players,E=[];for(let e=0;e<M.length;e+=1)E[e]=O(S(t,M,e));let G=t[2].botCount[t[7]]&&_(t),C=!(t[5].players.length||t[2].botCount[t[7]])&&w();return{c(){e=(0,i.bG)("tr"),n=(0,i.bG)("td"),o=(0,i.fL)(y),s=(0,i.Dh)(),r=(0,i.bG)("td"),l=(0,i.fL)(I),a=(0,i.Dh)(),c=(0,i.bG)("td"),u=(0,i.fL)(v),d=(0,i.Dh)(),m=(0,i.bG)("td"),h=(0,i.fL)(D),f=(0,i.Dh)(),g=(0,i.bG)("td"),R=(0,i.fL)(N),p=(0,i.Dh)(),b=(0,i.bG)("td");for(let t=0;t<E.length;t+=1)E[t].c();T=(0,i.Dh)(),G&&G.c(),$=(0,i.Dh)(),C&&C.c(),L=(0,i.Dh)(),(0,i.VH)(e,"table-primary",t[2].local&&t[2].local.move===t[7])},m(t,y){(0,i.$T)(t,e,y),(0,i.R3)(e,n),(0,i.R3)(n,o),(0,i.R3)(e,s),(0,i.R3)(e,r),(0,i.R3)(r,l),(0,i.R3)(e,a),(0,i.R3)(e,c),(0,i.R3)(c,u),(0,i.R3)(e,d),(0,i.R3)(e,m),(0,i.R3)(m,h),(0,i.R3)(e,f),(0,i.R3)(e,g),(0,i.R3)(g,R),(0,i.R3)(e,p),(0,i.R3)(e,b);for(let t=0;t<E.length;t+=1)E[t].m(b,null);(0,i.R3)(b,T),G&&G.m(b,null),(0,i.R3)(b,$),C&&C.m(b,null),(0,i.R3)(e,L)},p(t,n){if(1&n&&I!==(I=t[5].ltw[2]+"")&&(0,i.rT)(l,I),1&n&&v!==(v=t[5].ltw[1]+"")&&(0,i.rT)(u,v),1&n&&D!==(D=t[5].ltw[0]+"")&&(0,i.rT)(h,D),1&n&&N!==(N=t[2].count[t[7]]+"")&&(0,i.rT)(R,N),1&n){let e;for(M=t[5].players,e=0;e<M.length;e+=1){const o=S(t,M,e);E[e]?E[e].p(o,n):(E[e]=O(o),E[e].c(),E[e].m(b,T))}for(;e<E.length;e+=1)E[e].d(1);E.length=M.length}t[2].botCount[t[7]]?G?G.p(t,n):(G=_(t),G.c(),G.m(b,$)):G&&(G.d(1),G=null),t[5].players.length||t[2].botCount[t[7]]?C&&(C.d(1),C=null):C||(C=w(),C.c(),C.m(b,null)),1&n&&(0,i.VH)(e,"table-primary",t[2].local&&t[2].local.move===t[7])},d(t){t&&(0,i.og)(e),(0,i.RM)(E,t),G&&G.d(),C&&C.d()}}}function U(t){let e,n,o,s,r,l,a,c,u,d,m,h,f,g=t[2].local&&M(t),R=t[1],p=[];for(let e=0;e<R.length;e+=1)p[e]=C(D(t,R,e));let b=t[2].moves,T=[];for(let e=0;e<b.length;e+=1)T[e]=k(v(t,b,e));return{c(){e=(0,i.bG)("li"),g&&g.c(),n=(0,i.Dh)(),o=(0,i.bG)("div"),s=(0,i.bG)("div"),r=(0,i.bG)("table"),l=(0,i.bG)("tr"),l.innerHTML="<th>#</th> \n              <th>Outcome</th> \n              <th>#</th>",a=(0,i.Dh)();for(let t=0;t<p.length;t+=1)p[t].c();c=(0,i.Dh)(),u=(0,i.bG)("div"),d=(0,i.bG)("table"),m=(0,i.bG)("tr"),m.innerHTML="<th>Move</th> \n              <th>Wins</th> \n              <th>Ties</th> \n              <th>Loss</th> \n              <th>#</th> \n              <th>Players</th>",h=(0,i.Dh)();for(let t=0;t<T.length;t+=1)T[t].c();f=(0,i.Dh)(),(0,i.Lj)(l,"class","text-center"),(0,i.Lj)(r,"class","table table-sm"),(0,i.Lj)(s,"class","col-auto"),(0,i.Lj)(m,"class","text-center"),(0,i.Lj)(d,"class","table table-sm"),(0,i.Lj)(u,"class","col-auto"),(0,i.Lj)(o,"class","row"),(0,i.Lj)(e,"class","list-group-item")},m(t,R){(0,i.$T)(t,e,R),g&&g.m(e,null),(0,i.R3)(e,n),(0,i.R3)(e,o),(0,i.R3)(o,s),(0,i.R3)(s,r),(0,i.R3)(r,l),(0,i.R3)(r,a);for(let t=0;t<p.length;t+=1)p[t].m(r,null);(0,i.R3)(o,c),(0,i.R3)(o,u),(0,i.R3)(u,d),(0,i.R3)(d,m),(0,i.R3)(d,h);for(let t=0;t<T.length;t+=1)T[t].m(d,null);(0,i.R3)(e,f)},p(t,o){if(t[2].local?g?g.p(t,o):(g=M(t),g.c(),g.m(e,n)):g&&(g.d(1),g=null),3&o){let e;for(R=t[1],e=0;e<R.length;e+=1){const n=D(t,R,e);p[e]?p[e].p(n,o):(p[e]=C(n),p[e].c(),p[e].m(r,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=R.length}if(1&o){let e;for(b=t[2].moves,e=0;e<b.length;e+=1){const n=v(t,b,e);T[e]?T[e].p(n,o):(T[e]=k(n),T[e].c(),T[e].m(d,null))}for(;e<T.length;e+=1)T[e].d(1);T.length=b.length}},d(t){t&&(0,i.og)(e),g&&g.d(),(0,i.RM)(p,t),(0,i.RM)(T,t)}}}function j(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=U(I(t,n,e));let s=null;return n.length||(s=N()),{c(){e=(0,i.bG)("ul");for(let t=0;t<o.length;t+=1)o[t].c();s&&s.c(),(0,i.Lj)(e,"class","list-group list-group-flush overflow-auto"),(0,i.cz)(e,"max-height","15rem")},m(t,n){(0,i.$T)(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null);s&&s.m(e,null)},p(t,[r]){if(3&r){let l;for(n=t[0],l=0;l<n.length;l+=1){const s=I(t,n,l);o[l]?o[l].p(s,r):(o[l]=U(s),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length,n.length?s&&(s.d(1),s=null):s||(s=N(),s.c(),s.m(e,null))}},i:i.ZT,o:i.ZT,d(t){t&&(0,i.og)(e),(0,i.RM)(o,t),s&&s.d()}}}function A(t,e,n){return t[n>>e&t.length-1]}function W(t,e,n){let{results:o}=e;return t.$$set=t=>{"results"in t&&n(0,o=t.results)},[o,[{a:"R",b:"P",text:[["covers","hides"],["matches"],["punctures"]],textBitShift:0},{a:"P",b:"S",text:[["cuts","slices"],["matches"],["jams"]],textBitShift:1},{a:"S",b:"R",text:[["smashes","obliterates","breaks","destroys"],["matches"],["slashes","scratches"]],textBitShift:2}]]}class x extends i.f_{constructor(t){super(),(0,i.S1)(this,t,W,j,i.N8,{results:0})}}const P=x;var F=n(47);function B(t,e,n){const o=t.slice();return o[2]=e[n],o}function Y(t,e,n){const o=t.slice();return o[5]=e[n],o}function V(t){let e;return{c(){e=(0,i.fL)("nobody")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function Z(t){let e,n,o,s,r,l,a=t[5].name+"",c=t[5].cn+"";return{c(){e=(0,i.bG)("span"),n=(0,i.fL)(a),o=(0,i.fL)(" ("),s=(0,i.fL)(c),r=(0,i.fL)(")"),(0,i.Lj)(e,"class",l="badge bg-"+(t[5].ready?"info":"primary")+" me-1")},m(t,l){(0,i.$T)(t,e,l),(0,i.R3)(e,n),(0,i.R3)(e,o),(0,i.R3)(e,s),(0,i.R3)(e,r)},p(t,o){1&o&&a!==(a=t[5].name+"")&&(0,i.rT)(n,a),1&o&&c!==(c=t[5].cn+"")&&(0,i.rT)(s,c),1&o&&l!==(l="badge bg-"+(t[5].ready?"info":"primary")+" me-1")&&(0,i.Lj)(e,"class",l)},d(t){t&&(0,i.og)(e)}}}function Q(t){let e;return{c(){e=(0,i.fL)("nobody")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function H(t){let e,n,o,s,r,l,a=t[2].name+"",c=t[2].cn+"";return{c(){e=(0,i.bG)("span"),n=(0,i.fL)(a),o=(0,i.fL)(" ("),s=(0,i.fL)(c),r=(0,i.fL)(")"),(0,i.Lj)(e,"class",l="badge bg-"+(t[2].ready?"info":"secondary")+" me-1")},m(t,l){(0,i.$T)(t,e,l),(0,i.R3)(e,n),(0,i.R3)(e,o),(0,i.R3)(e,s),(0,i.R3)(e,r)},p(t,o){2&o&&a!==(a=t[2].name+"")&&(0,i.rT)(n,a),2&o&&c!==(c=t[2].cn+"")&&(0,i.rT)(s,c),2&o&&l!==(l="badge bg-"+(t[2].ready?"info":"secondary")+" me-1")&&(0,i.Lj)(e,"class",l)},d(t){t&&(0,i.og)(e)}}}function z(t){let e,n,o,s,r,l=t[0],a=[];for(let e=0;e<l.length;e+=1)a[e]=Z(Y(t,l,e));let c=null;l.length||(c=V());let u=t[1],d=[];for(let e=0;e<u.length;e+=1)d[e]=H(B(t,u,e));let m=null;return u.length||(m=Q()),{c(){e=(0,i.bG)("div"),n=(0,i.fL)("In game:\n  ");for(let t=0;t<a.length;t+=1)a[t].c();c&&c.c(),o=(0,i.Dh)(),s=(0,i.bG)("div"),r=(0,i.fL)("Queue:\n  ");for(let t=0;t<d.length;t+=1)d[t].c();m&&m.c()},m(t,l){(0,i.$T)(t,e,l),(0,i.R3)(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c&&c.m(e,null),(0,i.$T)(t,o,l),(0,i.$T)(t,s,l),(0,i.R3)(s,r);for(let t=0;t<d.length;t+=1)d[t].m(s,null);m&&m.m(s,null)},p(t,[n]){if(1&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const s=Y(t,l,o);a[o]?a[o].p(s,n):(a[o]=Z(s),a[o].c(),a[o].m(e,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length,l.length?c&&(c.d(1),c=null):c||(c=V(),c.c(),c.m(e,null))}if(2&n){let e;for(u=t[1],e=0;e<u.length;e+=1){const o=B(t,u,e);d[e]?d[e].p(o,n):(d[e]=H(o),d[e].c(),d[e].m(s,null))}for(;e<d.length;e+=1)d[e].d(1);d.length=u.length,u.length?m&&(m.d(1),m=null):m||(m=Q(),m.c(),m.m(s,null))}},i:i.ZT,o:i.ZT,d(t){t&&(0,i.og)(e),(0,i.RM)(a,t),c&&c.d(),t&&(0,i.og)(o),t&&(0,i.og)(s),(0,i.RM)(d,t),m&&m.d()}}}function J(t,e,n){let{inGame:o}=e,{inQueue:s}=e;return t.$$set=t=>{"inGame"in t&&n(0,o=t.inGame),"inQueue"in t&&n(1,s=t.inQueue)},[o,s]}class q extends i.f_{constructor(t){super(),(0,i.S1)(this,t,J,z,i.N8,{inGame:0,inQueue:1})}}const K=q,X=[["optClassic","b",!1,"Classic","no streak bonuses"],["optInverted","b",!1,"Inverted","switch default winning and losing direction"],["optCount","b",!1,"Count","larger group never loses to smaller group, 2x size can reverse winning direction"],["optRoundTime","i",5e3,"Round Time / ms","duration of each round, in milliseconds",3e3,3e4],["optBotBalance","i",0,"Bot Balance","if negative, balance total players to absolute value; otherwise, add this number of bots",-1e3,1e3]];function tt(t,e,n,o,s){return(e?"Inverted ":"")+(n?"Count ":"")+(t?"Classic":"Regular")+" ("+(s>0?s+" bots":s<0?"bots balance to "+-s:"no bots")+", "+o+" ms)"}function et(t,e,n){const o=t.slice();return o[29]=e[n],o[31]=n,o}function nt(t){let e,n,o;function s(t,e){return 1===t[1]?lt:t[2]?rt:st}let r=s(t),l=r(t);return n=new F.Z({props:{startTime:t[3],endTime:t[4]}}),{c(){l.c(),e=(0,i.Dh)(),(0,i.YC)(n.$$.fragment)},m(t,s){l.m(t,s),(0,i.$T)(t,e,s),(0,i.ye)(n,t,s),o=!0},p(t,o){r!==(r=s(t))&&(l.d(1),l=r(t),l&&(l.c(),l.m(e.parentNode,e)));const a={};8&o[0]&&(a.startTime=t[3]),16&o[0]&&(a.endTime=t[4]),n.$set(a)},i(t){o||((0,i.Ui)(n.$$.fragment,t),o=!0)},o(t){(0,i.et)(n.$$.fragment,t),o=!1},d(t){l.d(t),t&&(0,i.og)(e),(0,i.vp)(n,t)}}}function ot(t){let e;return{c(){e=(0,i.fL)("Waiting for playersâ€¦")},m(t,n){(0,i.$T)(t,e,n)},p:i.ZT,i:i.ZT,o:i.ZT,d(t){t&&(0,i.og)(e)}}}function st(t){let e;return{c(){e=(0,i.fL)("Results are coming soon:")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function rt(t){let e;return{c(){e=(0,i.fL)("Make a move:")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function lt(t){let e;return{c(){e=(0,i.fL)("Intermission:")},m(t,n){(0,i.$T)(t,e,n)},d(t){t&&(0,i.og)(e)}}}function at(t){let e,n,o,s=["Auto","ðŸ¥Œ Rock","ðŸ“„ Paper","âœ‚ Scissors"],r=[];for(let e=0;e<4;e+=1)r[e]=it(et(t,s,e));return{c(){e=(0,i.bG)("div"),n=(0,i.bG)("span"),n.textContent="Next Move",o=(0,i.Dh)();for(let t=0;t<4;t+=1)r[t].c();(0,i.Lj)(n,"class","input-group-text"),(0,i.Lj)(e,"class","btn-group d-flex mb-3"),(0,i.Lj)(e,"role","group")},m(t,s){(0,i.$T)(t,e,s),(0,i.R3)(e,n),(0,i.R3)(e,o);for(let t=0;t<4;t+=1)r[t].m(e,null)},p(t,n){if(1025&n[0]){let o;for(s=["Auto","ðŸ¥Œ Rock","ðŸ“„ Paper","âœ‚ Scissors"],o=0;o<4;o+=1){const l=et(t,s,o);r[o]?r[o].p(l,n):(r[o]=it(l),r[o].c(),r[o].m(e,null))}for(;o<4;o+=1)r[o].d(1)}},d(t){t&&(0,i.og)(e),(0,i.RM)(r,t)}}}function it(t){let e,n,o,s;function r(){return t[28](t[31])}return{c(){e=(0,i.bG)("button"),n=(0,i.fL)(t[29]),(0,i.Lj)(e,"class","w-100 btn btn-outline-secondary"),(0,i.VH)(e,"active",t[10]===t[31])},m(t,l){(0,i.$T)(t,e,l),(0,i.R3)(e,n),o||(s=(0,i.oL)(e,"click",r),o=!0)},p(n,o){t=n,1024&o[0]&&(0,i.VH)(e,"active",t[10]===t[31])},d(t){t&&(0,i.og)(e),o=!1,s()}}}function ct(t){let e,n,o,s,r,l,a,c,u,d,m=tt(t[5],t[6],t[7],t[8],t[9])+"";const h=[ot,nt],f=[];function g(t,e){return 0===t[1]?0:1}e=g(t),n=f[e]=h[e](t);let R=2===t[1]&&t[2]&&at(t);return u=new K({props:{inGame:t[11],inQueue:t[12]}}),{c(){n.c(),o=(0,i.Dh)(),s=(0,i.bG)("div"),r=(0,i.fL)("Game Mode: "),l=(0,i.fL)(m),a=(0,i.Dh)(),R&&R.c(),c=(0,i.Dh)(),(0,i.YC)(u.$$.fragment)},m(t,n){f[e].m(t,n),(0,i.$T)(t,o,n),(0,i.$T)(t,s,n),(0,i.R3)(s,r),(0,i.R3)(s,l),(0,i.$T)(t,a,n),R&&R.m(t,n),(0,i.$T)(t,c,n),(0,i.ye)(u,t,n),d=!0},p(t,s){let r=e;e=g(t),e===r?f[e].p(t,s):((0,i.dv)(),(0,i.et)(f[r],1,1,(()=>{f[r]=null})),(0,i.gb)(),n=f[e],n?n.p(t,s):(n=f[e]=h[e](t),n.c()),(0,i.Ui)(n,1),n.m(o.parentNode,o)),(!d||992&s[0])&&m!==(m=tt(t[5],t[6],t[7],t[8],t[9])+"")&&(0,i.rT)(l,m),2===t[1]&&t[2]?R?R.p(t,s):(R=at(t),R.c(),R.m(c.parentNode,c)):R&&(R.d(1),R=null);const a={};2048&s[0]&&(a.inGame=t[11]),4096&s[0]&&(a.inQueue=t[12]),u.$set(a)},i(t){d||((0,i.Ui)(n),(0,i.Ui)(u.$$.fragment,t),d=!0)},o(t){(0,i.et)(n),(0,i.et)(u.$$.fragment,t),d=!1},d(t){f[e].d(t),t&&(0,i.og)(o),t&&(0,i.og)(s),t&&(0,i.og)(a),R&&R.d(t),t&&(0,i.og)(c),(0,i.vp)(u,t)}}}function ut(t,e,n){let o,s,r,l,a,c,u,d,m,h,f,g,R,p,{gameState:b}=e;const{isActive:T,inRound:$,roundState:L,roundTimerStart:y,roundTimerEnd:I,roundPlayers:v,roundPlayerQueue:S,pendingMove:D,modeClassic:N,modeInverted:M,modeCount:E,modeRoundTime:G,modeBotBalance:C}=b;return(0,i.FI)(t,T,(t=>n(26,s=t))),(0,i.FI)(t,$,(t=>n(27,l=t))),(0,i.FI)(t,L,(t=>n(1,r=t))),(0,i.FI)(t,y,(t=>n(3,a=t))),(0,i.FI)(t,I,(t=>n(4,c=t))),(0,i.FI)(t,v,(t=>n(11,R=t))),(0,i.FI)(t,S,(t=>n(12,p=t))),(0,i.FI)(t,D,(t=>n(10,g=t))),(0,i.FI)(t,N,(t=>n(5,u=t))),(0,i.FI)(t,M,(t=>n(6,d=t))),(0,i.FI)(t,E,(t=>n(7,m=t))),(0,i.FI)(t,G,(t=>n(8,h=t))),(0,i.FI)(t,C,(t=>n(9,f=t))),t.$$set=t=>{"gameState"in t&&n(0,b=t.gameState)},t.$$.update=()=>{201326594&t.$$.dirty[0]&&n(2,o=s&&2===r&&l)},[b,r,o,a,c,u,d,m,h,f,g,R,p,T,$,L,y,I,v,S,D,N,M,E,G,C,s,l,t=>b.sendMove(t)]}class dt extends i.f_{constructor(t){super(),(0,i.S1)(this,t,ut,ct,i.N8,{gameState:0},[-1,-1])}}const mt=dt;function ht(t){let e,n;return e=new mt({props:{gameState:t[8]}}),{c(){(0,i.YC)(e.$$.fragment)},m(t,o){(0,i.ye)(e,t,o),n=!0},p:i.ZT,i(t){n||((0,i.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,i.et)(e.$$.fragment,t),n=!1},d(t){(0,i.vp)(e,t)}}}function ft(t){let e,n;return e=new P({props:{results:t[5]}}),{c(){(0,i.YC)(e.$$.fragment)},m(t,o){(0,i.ye)(e,t,o),n=!0},p(t,n){const o={};32&n&&(o.results=t[5]),e.$set(o)},i(t){n||((0,i.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,i.et)(e.$$.fragment,t),n=!1},d(t){(0,i.vp)(e,t)}}}function gt(t){let e,n,o,s,r,l,a,g,R,p,b,T,$,L,y,I;function v(e){t[17](e)}let S={};return void 0!==t[0]&&(S.value=t[0]),e=new m.Z({props:S}),i.Vn.push((()=>(0,i.ak)(e,"value",v))),s=new f.Z({props:{gameId:"rps-oj40aopjv0w7gnc1pj9zpq",roomType:"RPSRoom",joinData:{name:t[0]},onJoinedRoom:t[18],formatGameMode:t[16],roomCreateOptions:X}}),l=new h.Z({props:{inGame:t[1],isActive:t[2],canReady:1===t[3],isReady:t[4],onSetActive:t[19],onSetReady:t[20],onReset:t[21],onDisconnect:t[22],$$slots:{default:[ht]},$$scope:{ctx:t}}}),p=new u.Z({props:{canClear:!t[5].length,onClear:t[23],$$slots:{default:[ft]},$$scope:{ctx:t}}}),T=new d.Z({props:{players:t[6],columns:[["Streak",Rt],["Score",pt],["Round Win",bt],["Tie",Tt],["Loss",$t],["Battle Win",Lt],["Tie",yt],["Loss",It]]}}),y=new c.Z({props:{chatState:t[7],onInput:t[24]}}),{c(){(0,i.YC)(e.$$.fragment),o=(0,i.Dh)(),(0,i.YC)(s.$$.fragment),r=(0,i.Dh)(),(0,i.YC)(l.$$.fragment),a=(0,i.Dh)(),g=(0,i.bG)("div"),R=(0,i.bG)("div"),(0,i.YC)(p.$$.fragment),b=(0,i.Dh)(),(0,i.YC)(T.$$.fragment),$=(0,i.Dh)(),L=(0,i.bG)("div"),(0,i.YC)(y.$$.fragment),(0,i.Lj)(R,"class","col-12 col-xl-8"),(0,i.Lj)(L,"class","col-12 col-xl-4 mb-3"),(0,i.Lj)(g,"class","row")},m(t,n){(0,i.ye)(e,t,n),(0,i.$T)(t,o,n),(0,i.ye)(s,t,n),(0,i.$T)(t,r,n),(0,i.ye)(l,t,n),(0,i.$T)(t,a,n),(0,i.$T)(t,g,n),(0,i.R3)(g,R),(0,i.ye)(p,R,null),(0,i.R3)(R,b),(0,i.ye)(T,R,null),(0,i.R3)(g,$),(0,i.R3)(g,L),(0,i.ye)(y,L,null),I=!0},p(t,[o]){const r={};!n&&1&o&&(n=!0,r.value=t[0],(0,i.hj)((()=>n=!1))),e.$set(r);const a={};1&o&&(a.joinData={name:t[0]}),1&o&&(a.onJoinedRoom=t[18]),s.$set(a);const c={};2&o&&(c.inGame=t[1]),4&o&&(c.isActive=t[2]),8&o&&(c.canReady=1===t[3]),16&o&&(c.isReady=t[4]),33554432&o&&(c.$$scope={dirty:o,ctx:t}),l.$set(c);const u={};32&o&&(u.canClear=!t[5].length),33554464&o&&(u.$$scope={dirty:o,ctx:t}),p.$set(u);const d={};64&o&&(d.players=t[6]),T.$set(d)},i(t){I||((0,i.Ui)(e.$$.fragment,t),(0,i.Ui)(s.$$.fragment,t),(0,i.Ui)(l.$$.fragment,t),(0,i.Ui)(p.$$.fragment,t),(0,i.Ui)(T.$$.fragment,t),(0,i.Ui)(y.$$.fragment,t),I=!0)},o(t){(0,i.et)(e.$$.fragment,t),(0,i.et)(s.$$.fragment,t),(0,i.et)(l.$$.fragment,t),(0,i.et)(p.$$.fragment,t),(0,i.et)(T.$$.fragment,t),(0,i.et)(y.$$.fragment,t),I=!1},d(t){(0,i.vp)(e,t),t&&(0,i.og)(o),(0,i.vp)(s,t),t&&(0,i.og)(r),(0,i.vp)(l,t),t&&(0,i.og)(a),t&&(0,i.og)(g),(0,i.vp)(p),(0,i.vp)(T),(0,i.vp)(y)}}}const Rt=t=>t.roundStreak,pt=t=>t.roundScore,bt=t=>t.roundWins,Tt=t=>t.roundTies,$t=t=>t.roundLosses,Lt=t=>t.battleWins,yt=t=>t.battleTies,It=t=>t.battleLosses;function vt(t,e,n){let o,s,r,l,a,c,u;const d=new g.Z,m=new L(d),{inGame:h,isActive:f,isReady:p,pastGames:b,clientsSorted:T,roundState:$}=m;(0,i.FI)(t,h,(t=>n(1,s=t))),(0,i.FI)(t,f,(t=>n(2,r=t))),(0,i.FI)(t,p,(t=>n(4,a=t))),(0,i.FI)(t,b,(t=>n(5,c=t))),(0,i.FI)(t,T,(t=>n(6,u=t))),(0,i.FI)(t,$,(t=>n(3,l=t)));let y=(0,R.CR)("game/mp/_shared/name","");return(0,i.FI)(t,y,(t=>n(0,o=t))),[o,s,r,l,a,c,u,d,m,h,f,p,b,T,$,y,function({optClassic:t,optInverted:e,optCount:n,optRoundTime:o,optBotBalance:s}){return tt("true"===t,"true"===e,"true"===n,+o,+s)},function(t){o=t,y.set(o)},t=>m.enterGame(t,o),t=>m.sendActive(t),t=>m.sendReady(t),()=>m.sendReset(),()=>m.leaveGame(),()=>m.clearHistory(),t=>m.processCommand(t)]}class St extends i.f_{constructor(t){super(),(0,i.S1)(this,t,vt,gt,i.N8,{})}}const Dt=St;(0,n(448).Z)(Dt)},46:(t,e,n)=>{function o(t){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(;t--;)n+=e[Math.random()*e.length|0];return n}n.d(e,{yF:()=>o})}},n={};function o(t){var s=n[t];if(void 0!==s)return s.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.m=e,t=[],o.O=(e,n,s,r)=>{if(!n){var l=1/0;for(c=0;c<t.length;c++){for(var[n,s,r]=t[c],a=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(o.O).every((t=>o.O[t](n[i])))?n.splice(i--,1):(a=!1,r<l&&(l=r));a&&(t.splice(c--,1),e=s())}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[n,s,r]},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={19:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var s,r,[l,a,i]=n,c=0;for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(i)var u=i(o);for(e&&e(n);c<l.length;c++)r=l[c],o.o(t,r)&&t[r]&&t[r][0](),t[l[c]]=0;return o.O(u)},n=self.webpackChunkvwww=self.webpackChunkvwww||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var s=o.O(void 0,[3,0,2],(()=>o(381)));s=o.O(s)})();