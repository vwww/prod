(()=>{"use strict";var e,t={386:(e,t,n)=>{var o=n(0),r=n(7);function l(e,t){const n=function(e,t){const n=function(e,t){const{set:n,subscribe:o}=(0,r.fZ)(e,void 0);return{get:()=>e,set(t){n(e=t)},subscribe:o,update(t){n(e=t(e))}}}(t);return Object.assign(Object.assign({},n),{useLocalStorage:()=>{if(!window.localStorage)return;const t=localStorage.getItem(e);null!==t&&n.set("undefined"===t?void 0:JSON.parse(t)),n.subscribe((t=>{void 0===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t))}))}})}(e,t);return n.useLocalStorage(),n}function s(e){let t,n,r;return{c(){t=(0,o.bG)("div"),(0,o.Lj)(t,"class",n="progress-bar progress-bar-striped progress-bar-animated "+e[3]),(0,o.Lj)(t,"role","progressbar"),(0,o.Lj)(t,"aria-valuenow",e[0]),(0,o.Lj)(t,"aria-valuemin",r=0),(0,o.Lj)(t,"aria-valuemax",e[1]),(0,o.cz)(t,"width",e[2]+"%")},m(e,n){(0,o.$T)(e,t,n)},p(e,[r]){8&r&&n!==(n="progress-bar progress-bar-striped progress-bar-animated "+e[3])&&(0,o.Lj)(t,"class",n),1&r&&(0,o.Lj)(t,"aria-valuenow",e[0]),2&r&&(0,o.Lj)(t,"aria-valuemax",e[1]),4&r&&(0,o.cz)(t,"width",e[2]+"%")},i:o.ZT,o:o.ZT,d(e){e&&(0,o.og)(t)}}}function a(e,t,n){let o,r,{moment:l}=t,{momentMax:s}=t;return e.$$set=e=>{"moment"in e&&n(0,l=e.moment),"momentMax"in e&&n(1,s=e.momentMax)},e.$$.update=()=>{3&e.$$.dirty&&n(2,o=Math.max(l,0)/s*100),4&e.$$.dirty&&n(3,r=o<=20?"bg-success":o<=40?"bg-info":o<=60?"":o<=80?"bg-warning":"bg-danger")},[l,s,o,r]}class c extends o.f_{constructor(e){super(),(0,o.S1)(this,e,a,s,o.N8,{moment:0,momentMax:1})}}const i=c,f=[[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,0,1,0],[0,0,1,0],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[1,1,1,1],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]],[[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0]]],[[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]]]],{window:u}=o.li;function g(e,t,n){const o=e.slice();return o[53]=t[n],o}function d(e,t,n){const o=e.slice();return o[56]=t[n],o}function m(e,t,n){const o=e.slice();return o[53]=t[n],o[60]=n,o}function h(e,t,n){const o=e.slice();return o[56]=t[n],o[62]=n,o}function b(e){let t;return{c(){t=(0,o.bG)("td"),(0,o.cz)(t,"background-color",e[18][e[56]||(e[17]&&e[24](e[11],e[12],e[9],e[8],e[60],e[62])?e[13]:0)]),(0,o.Lj)(t,"class","svelte-wn67dn"),(0,o.VH)(t,"ghost",e[17]&&!e[56]&&e[24](e[11],e[12],e[9],e[8],e[60],e[62])),(0,o.VH)(t,"ghostLine",e[17]&&e[60]>=e[10])},m(e,n){(0,o.$T)(e,t,n)},p(e,n){146184&n[0]&&(0,o.cz)(t,"background-color",e[18][e[56]||(e[17]&&e[24](e[11],e[12],e[9],e[8],e[60],e[62])?e[13]:0)]),16915208&n[0]&&(0,o.VH)(t,"ghost",e[17]&&!e[56]&&e[24](e[11],e[12],e[9],e[8],e[60],e[62])),132096&n[0]&&(0,o.VH)(t,"ghostLine",e[17]&&e[60]>=e[10])},d(e){e&&(0,o.og)(t)}}}function p(e){let t,n,r=e[53],l=[];for(let t=0;t<r.length;t+=1)l[t]=b(h(e,r,t));return{c(){t=(0,o.bG)("tr");for(let e=0;e<l.length;e+=1)l[e].c();n=(0,o.Dh)()},m(e,r){(0,o.$T)(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);(0,o.R3)(t,n)},p(e,o){if(17186568&o[0]){let s;for(r=e[53],s=0;s<r.length;s+=1){const a=h(e,r,s);l[s]?l[s].p(a,o):(l[s]=b(a),l[s].c(),l[s].m(t,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(e){e&&(0,o.og)(t),(0,o.RM)(l,e)}}}function w(e){let t;return{c(){t=(0,o.bG)("td"),(0,o.cz)(t,"background-color",e[18][e[56]?e[0]:0]),(0,o.Lj)(t,"class","svelte-wn67dn")},m(e,n){(0,o.$T)(e,t,n)},p(e,n){16385&n[0]&&(0,o.cz)(t,"background-color",e[18][e[56]?e[0]:0])},d(e){e&&(0,o.og)(t)}}}function v(e){let t,n,r=e[53],l=[];for(let t=0;t<r.length;t+=1)l[t]=w(d(e,r,t));return{c(){t=(0,o.bG)("tr");for(let e=0;e<l.length;e+=1)l[e].c();n=(0,o.Dh)()},m(e,r){(0,o.$T)(e,t,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);(0,o.R3)(t,n)},p(e,o){if(278529&o[0]){let s;for(r=e[53],s=0;s<r.length;s+=1){const a=d(e,r,s);l[s]?l[s].p(a,o):(l[s]=w(a),l[s].c(),l[s].m(t,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(e){e&&(0,o.og)(t),(0,o.RM)(l,e)}}}function L(e){let t,n,r,l,s,a,c,f,d,h,b,w,L,$,y,k,x,T,G,M,O,S,D,C,z,I,P,A,H,N,W,E,K,V,B,F,U,Z,J,Y,_,q,X,Q=e[1]?e[2]?"Paused":(j/(0|e[7])).toPrecision(2)+"x":"Game over",ee=e[4]?e[4]>0?e[4]+" CCW":-e[4]+" CW":"0",te=e[3],ne=[];for(let t=0;t<te.length;t+=1)ne[t]=p(m(e,te,t));B=new i({props:{moment:e[4],momentMax:R}}),Z=new i({props:{moment:-e[4],momentMax:R}});let oe=e[14],re=[];for(let t=0;t<oe.length;t+=1)re[t]=v(g(e,oe,t));return{c(){t=(0,o.bG)("div"),n=(0,o.bG)("button"),n.textContent="New Game",r=(0,o.Dh)(),l=(0,o.bG)("button"),s=(0,o.fL)("Pause"),c=(0,o.Dh)(),f=(0,o.bG)("button"),d=(0,o.fL)("Ghost Piece"),b=(0,o.Dh)(),w=(0,o.bG)("button"),L=(0,o.fL)("Speedup"),y=(0,o.Dh)(),k=(0,o.bG)("p"),x=(0,o.fL)("("),T=(0,o.fL)(Q),G=(0,o.fL)(") |\n  Score: "),M=(0,o.fL)(e[5]),O=(0,o.fL)(" | High Score: "),S=(0,o.fL)(e[15]),D=(0,o.fL)(" | Lines cleared: "),C=(0,o.fL)(e[6]),z=(0,o.fL)(" | Moment: "),I=(0,o.fL)(ee),P=(0,o.fL)(" ("),A=(0,o.fL)(R),H=(0,o.fL)(" max)"),N=(0,o.Dh)(),W=(0,o.bG)("table");for(let e=0;e<ne.length;e+=1)ne[e].c();E=(0,o.Dh)(),K=(0,o.bG)("div"),V=(0,o.bG)("div"),(0,o.YC)(B.$$.fragment),F=(0,o.Dh)(),U=(0,o.bG)("div"),(0,o.YC)(Z.$$.fragment),J=(0,o.Dh)(),Y=(0,o.bG)("table");for(let e=0;e<re.length;e+=1)re[e].c();(0,o.Lj)(n,"class","btn btn-outline-primary w-100"),(0,o.Lj)(l,"class",a="btn w-100 btn-"+(e[2]?"":"outline-")+"warning"),(0,o.Lj)(f,"class",h="btn w-50 btn-"+(e[17]?"":"outline-")+"success"),(0,o.Lj)(w,"class",$="btn w-50 btn-"+(e[16]?"primary":"outline-secondary")),(0,o.Lj)(t,"class","btn-group d-flex"),(0,o.Lj)(t,"role","group"),(0,o.cz)(W,"backface-visibility","hidden"),(0,o.cz)(W,"transform","rotate("+-e[4]/R*45+"deg)"),(0,o.Lj)(W,"class","svelte-wn67dn"),(0,o.Lj)(V,"class","progress w-50"),(0,o.cz)(V,"transform","scaleX(-1)"),(0,o.Lj)(U,"class","progress w-50"),(0,o.Lj)(K,"class","d-flex my-3"),(0,o.Lj)(Y,"class","svelte-wn67dn")},m(a,i){(0,o.$T)(a,t,i),(0,o.R3)(t,n),(0,o.R3)(t,r),(0,o.R3)(t,l),(0,o.R3)(l,s),(0,o.R3)(t,c),(0,o.R3)(t,f),(0,o.R3)(f,d),(0,o.R3)(t,b),(0,o.R3)(t,w),(0,o.R3)(w,L),(0,o.$T)(a,y,i),(0,o.$T)(a,k,i),(0,o.R3)(k,x),(0,o.R3)(k,T),(0,o.R3)(k,G),(0,o.R3)(k,M),(0,o.R3)(k,O),(0,o.R3)(k,S),(0,o.R3)(k,D),(0,o.R3)(k,C),(0,o.R3)(k,z),(0,o.R3)(k,I),(0,o.R3)(k,P),(0,o.R3)(k,A),(0,o.R3)(k,H),(0,o.$T)(a,N,i),(0,o.$T)(a,W,i);for(let e=0;e<ne.length;e+=1)ne[e].m(W,null);(0,o.$T)(a,E,i),(0,o.$T)(a,K,i),(0,o.R3)(K,V),(0,o.ye)(B,V,null),(0,o.R3)(K,F),(0,o.R3)(K,U),(0,o.ye)(Z,U,null),(0,o.$T)(a,J,i),(0,o.$T)(a,Y,i);for(let e=0;e<re.length;e+=1)re[e].m(Y,null);_=!0,q||(X=[(0,o.oL)(u,"keyup",e[27]),(0,o.oL)(u,"keydown",e[28]),(0,o.oL)(n,"click",e[22]),(0,o.oL)(l,"click",e[23]),(0,o.oL)(f,"click",e[29]),(0,o.oL)(w,"click",e[30])],q=!0)},p(e,t){if((!_||4&t[0]&&a!==(a="btn w-100 btn-"+(e[2]?"":"outline-")+"warning"))&&(0,o.Lj)(l,"class",a),(!_||131072&t[0]&&h!==(h="btn w-50 btn-"+(e[17]?"":"outline-")+"success"))&&(0,o.Lj)(f,"class",h),(!_||65536&t[0]&&$!==($="btn w-50 btn-"+(e[16]?"primary":"outline-secondary")))&&(0,o.Lj)(w,"class",$),(!_||134&t[0])&&Q!==(Q=e[1]?e[2]?"Paused":(j/(0|e[7])).toPrecision(2)+"x":"Game over")&&(0,o.rT)(T,Q),(!_||32&t[0])&&(0,o.rT)(M,e[5]),(!_||32768&t[0])&&(0,o.rT)(S,e[15]),(!_||64&t[0])&&(0,o.rT)(C,e[6]),(!_||16&t[0])&&ee!==(ee=e[4]?e[4]>0?e[4]+" CCW":-e[4]+" CW":"0")&&(0,o.rT)(I,ee),17186568&t[0]){let n;for(te=e[3],n=0;n<te.length;n+=1){const o=m(e,te,n);ne[n]?ne[n].p(o,t):(ne[n]=p(o),ne[n].c(),ne[n].m(W,null))}for(;n<ne.length;n+=1)ne[n].d(1);ne.length=te.length}(!_||16&t[0])&&(0,o.cz)(W,"transform","rotate("+-e[4]/R*45+"deg)");const n={};16&t[0]&&(n.moment=e[4]),B.$set(n);const r={};if(16&t[0]&&(r.moment=-e[4]),Z.$set(r),278529&t[0]){let n;for(oe=e[14],n=0;n<oe.length;n+=1){const o=g(e,oe,n);re[n]?re[n].p(o,t):(re[n]=v(o),re[n].c(),re[n].m(Y,null))}for(;n<re.length;n+=1)re[n].d(1);re.length=oe.length}},i(e){_||((0,o.Ui)(B.$$.fragment,e),(0,o.Ui)(Z.$$.fragment,e),_=!0)},o(e){(0,o.et)(B.$$.fragment,e),(0,o.et)(Z.$$.fragment,e),_=!1},d(e){e&&(0,o.og)(t),e&&(0,o.og)(y),e&&(0,o.og)(k),e&&(0,o.og)(N),e&&(0,o.og)(W),(0,o.RM)(ne,e),e&&(0,o.og)(E),e&&(0,o.og)(K),(0,o.vp)(B),(0,o.vp)(Z),e&&(0,o.og)(J),e&&(0,o.og)(Y),(0,o.RM)(re,e),q=!1,(0,o.j7)(X)}}}const $=10,y=20,R=69,j=200;function k(e,t,n){let r,s,a,c;const i=-R,u=["#000","red","orangered","orange","yellow","chartreuse","yellowgreen","lime","limegreen","darkgreen","aquamarine","magenta","orchid"],g=l("game/sp/tetris/showGhost",!0);(0,o.FI)(e,g,(e=>n(17,c=e)));const d=l("game/sp/tetris/speedup",!0);(0,o.FI)(e,d,(e=>n(16,a=e)));const m=l("game/sp/tetris/highscore",0);(0,o.FI)(e,m,(e=>n(15,s=e)));const h=[...f];let b=0,p=1+(Math.random()*(u.length-1)|0);let w,v=!1,L=!1,k=0,x=Array(y).fill(void 0).map((e=>Array($).fill(0))),T=0,G=0,M=0,O=!1,S=!1,D=!1,C=!1,z=-1,I=-1,P=-1,A=-1,H=-1,N=-1,W=-1;function E(){n(1,v=!1),clearTimeout(k),k=0}function K(){I=0,n(8,P=7*Math.random()|0),n(11,w=function(){const e=h[b];return n(26,b++,b),b===h.length&&(n(26,b=0),function(e,t=0,n=e.length){for(let o=n-1-t;o!==t;--o){const n=Math.floor(Math.random()*(o+1)),r=e[t+o];e[t+o]=e[t+n],e[t+n]=r}}(h)),e}()),n(12,N=0),n(13,W=p),n(0,p=1+(Math.random()*(u.length-1)|0)),B(),U(),A||E()}function V(){let e=I;for(let t=0;t<4;t++,e++){const n=e<0||e>=y;let o=P;for(let r=0;r<4;r++,o++){const l=o<0||o>=$;if((n||l||0!==x[e][o])&&w[N][t][r])return!1}}return!0}function B(){const e=I;do{if(I++,!V()){I--;break}}while(I<y);for(n(9,A=I),U(),n(10,H=y);H&&x[H-1].every((e=>0!==e));)n(10,H--,H);Z(),I=e}function F(e){let t=I;for(let o=0;o<4;o++,t++){if(t<0||t>=y)continue;let r=P;for(let l=0;l<4;l++,r++)r<0||r>=$||!w[N][o][l]||n(3,x[t][r]=e,x)}}function U(){F(W)}function Z(){F(0)}function J(){L||(a&&(n(7,z-=z*z*25e-6),z<1&&n(7,z=1)),k=window.setTimeout(J,0|z),function(){n(5,G+=1),Z();let e=!1;D&&(n(12,N=(N+1)%w.length),V()?e=!0:n(12,N=(N||w.length)-1)),O!==S&&(n(8,P+=O?-1:1),V()?e=!0:n(8,P+=O?1:-1)),e&&B();const t=A-I;if(I+=Math.min(t,C?3:1),U(),!t&&!e){!function(){let e=I;for(let t=0;t<4;t++,e++){if(e<0||e>=y)continue;let o=P;for(let e=0;e<4;e++,o++)o<0||o>=$||!w[N][t][e]||n(4,T+=5-o-(o>=5?1:0))}}(),n(5,G+=100);let e=19;for(let t=e;-1!==t;t--)if(x[t].every((e=>0!==e)))n(5,G+=1e3),n(6,M++,M);else{if(e!==t)for(let o=0;o<$;o++)n(3,x[e][o]=x[t][o],x);e--}for(;-1!==e;e--)for(let t=0;t<$;t++)n(3,x[e][t]=0,x);(T<i||T>R?E:K)()}s<G&&(0,o.fx)(m,s=G,s)}())}function Y(e,t){if(!e.defaultPrevented){switch(e.code){case"KeyS":case"ArrowDown":C=t;break;case"KeyW":case"ArrowUp":D=t;break;case"KeyA":case"ArrowLeft":O=t;break;case"KeyD":case"ArrowRight":S=t;break;default:return}e.preventDefault()}}return e.$$.update=()=>{67108864&e.$$.dirty[0]&&n(14,r=h[b][0])},[p,v,L,x,T,G,M,z,P,A,H,w,N,W,r,s,a,c,u,g,d,m,function(){for(let e=0;e<y;e++){const t=x[e];for(let e=0;e<$;e++)t[e]=0}n(4,T=0),n(5,G=0),n(6,M=0),n(1,v=!0),n(2,L=!1),K(),k&&clearTimeout(k),k=window.setTimeout(J,0),n(7,z=j)},function(){n(2,L=!L),!L&&v&&J()},function(e,t,n,o,r,l){if(x[r][l]||!e)return!1;const s=e[t],a=r-n;if(a<0||a>=s.length)return!1;const c=s[a],i=l-o;return!(i<0||i>=c.length||!c[i])},Y,b,e=>Y(e,!1),e=>Y(e,!0),()=>(0,o.fx)(g,c=!c,c),()=>(0,o.fx)(d,a=!a,a)]}class x extends o.f_{constructor(e){var t;super(),document.getElementById("svelte-wn67dn-style")||((t=(0,o.bG)("style")).id="svelte-wn67dn-style",t.textContent="table.svelte-wn67dn{margin:auto}td.svelte-wn67dn{width:3vmin;height:3vmin}td.ghost.svelte-wn67dn{opacity:0.2;animation:svelte-wn67dn-blinker 2s linear infinite}td.ghostLine.svelte-wn67dn{animation:svelte-wn67dn-blinker 0.5s linear infinite}@keyframes svelte-wn67dn-blinker{50%{opacity:0.4}}",(0,o.R3)(document.head,t)),(0,o.S1)(this,e,k,L,o.N8,{},[-1,-1,-1])}}var T;new x({target:document.getElementById("app")}),null===(T=document.getElementById("appLoading"))||void 0===T||T.remove()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.m=t,e=[],o.O=(t,n,r,l)=>{if(!n){var s=1/0;for(i=0;i<e.length;i++){for(var[n,r,l]=e[i],a=!0,c=0;c<n.length;c++)(!1&l||s>=l)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(a=!1,l<s&&(s=l));a&&(e.splice(i--,1),t=r())}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[n,r,l]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={24:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[s,a,c]=n,i=0;for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var f=c(o);for(t&&t(n);i<s.length;i++)l=s[i],o.o(e,l)&&e[l]&&e[l][0](),e[s[i]]=0;return o.O(f)},n=self.webpackChunkvwww=self.webpackChunkvwww||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[88],(()=>o(386)));r=o.O(r)})();