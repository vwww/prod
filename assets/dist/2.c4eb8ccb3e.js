(self.webpackChunkvwww=self.webpackChunkvwww||[]).push([[2],{39:(t,e,n)=>{"use strict";n.d(e,{Z:()=>$});var s=n(0),o=n(38);function i(t,e,n){const s=t.slice();return s[19]=e[n],s}function r(t){let e,n,o=t[19]+"";return{c(){e=(0,s.bG)("span"),n=(0,s.fL)(o)},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){128&e&&o!==(o=t[19]+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function c(t){let e,n,o,i=t[19].msg+"";return{c(){e=(0,s.bG)("span"),n=(0,s.bG)("em"),o=(0,s.fL)(i)},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(n,o)},p(t,e){128&e&&i!==(i=t[19].msg+"")&&(0,s.rT)(o,i)},d(t){t&&(0,s.og)(e)}}}function a(t){let e,n,o;function i(t,e){return 4&t[19].flags?g:m}let r=i(t),c=r(t);function a(t,e){return 8&t[19].flags?p:f}let l=a(t),h=l(t);function u(t,e){return t[19].targetName?R:2==(3&t[19].flags)?b:void 0}let d=u(t),L=d&&d(t);return{c(){e=(0,s.bG)("span"),c.c(),n=(0,s.Dh)(),h.c(),o=(0,s.Dh)(),L&&L.c()},m(t,i){(0,s.$T)(t,e,i),c.m(e,null),(0,s.R3)(e,n),h.m(e,null),(0,s.R3)(e,o),L&&L.m(e,null)},p(t,s){r===(r=i(t))&&c?c.p(t,s):(c.d(1),c=r(t),c&&(c.c(),c.m(e,n))),l===(l=a(t))&&h?h.p(t,s):(h.d(1),h=l(t),h&&(h.c(),h.m(e,o))),d===(d=u(t))&&L?L.p(t,s):(L&&L.d(1),L=d&&d(t),L&&(L.c(),L.m(e,null)))},d(t){t&&(0,s.og)(e),c.d(),h.d(),L&&L.d()}}}function l(t){let e,n,o,i,r,c,a=t[19].oldName+"",l=t[19].newName+"";return{c(){e=(0,s.bG)("span"),n=(0,s.fL)(a),o=(0,s.fL)(" is now known as "),i=(0,s.bG)("strong"),r=(0,s.fL)(l),c=(0,s.fL)(".")},m(t,a){(0,s.$T)(t,e,a),(0,s.R3)(e,n),(0,s.R3)(e,o),(0,s.R3)(e,i),(0,s.R3)(i,r),(0,s.R3)(e,c)},p(t,e){128&e&&a!==(a=t[19].oldName+"")&&(0,s.rT)(n,a),128&e&&l!==(l=t[19].newName+"")&&(0,s.rT)(r,l)},d(t){t&&(0,s.og)(e)}}}function h(t){let e,n,o,i,r=t[19].name+"";return{c(){e=(0,s.bG)("span"),n=(0,s.bG)("strong"),o=(0,s.fL)(r),i=(0,s.fL)(" reset stats.")},m(t,r){(0,s.$T)(t,e,r),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i)},p(t,e){128&e&&r!==(r=t[19].name+"")&&(0,s.rT)(o,r)},d(t){t&&(0,s.og)(e)}}}function u(t){let e,n,o,i,r=t[19].name+"";return{c(){e=(0,s.bG)("span"),n=(0,s.bG)("strong"),o=(0,s.fL)(r),i=(0,s.fL)(" left the game.")},m(t,r){(0,s.$T)(t,e,r),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i)},p(t,e){128&e&&r!==(r=t[19].name+"")&&(0,s.rT)(o,r)},d(t){t&&(0,s.og)(e)}}}function d(t){let e,n,o,i,r=t[19].name+"";return{c(){e=(0,s.bG)("span"),n=(0,s.bG)("strong"),o=(0,s.fL)(r),i=(0,s.fL)(" joined the game.")},m(t,r){(0,s.$T)(t,e,r),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i)},p(t,e){128&e&&r!==(r=t[19].name+"")&&(0,s.rT)(o,r)},d(t){t&&(0,s.og)(e)}}}function m(t){let e,n,o=t[19].name+"";return{c(){e=(0,s.bG)("span"),n=(0,s.fL)(o),(0,s.Lj)(e,"class","badge bg-secondary")},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){128&e&&o!==(o=t[19].name+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function g(t){let e,n,o=t[19].name+"";return{c(){e=(0,s.fL)("* "),n=(0,s.fL)(o)},m(t,o){(0,s.$T)(t,e,o),(0,s.$T)(t,n,o)},p(t,e){128&e&&o!==(o=t[19].name+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e),t&&(0,s.og)(n)}}}function f(t){let e,n=t[19].msg+"";return{c(){e=(0,s.fL)(n)},m(t,n){(0,s.$T)(t,e,n)},p(t,o){128&o&&n!==(n=t[19].msg+"")&&(0,s.rT)(e,n)},d(t){t&&(0,s.og)(e)}}}function p(t){let e,n,o,i,r,c=t[19].msg+"";return{c(){e=(0,s.bG)("small"),n=(0,s.bG)("del"),o=(0,s.fL)(c),i=(0,s.Dh)(),r=(0,s.bG)("span"),r.textContent="(do not spam!)",(0,s.Lj)(e,"class","text-muted"),(0,s.Lj)(r,"class","text-danger")},m(t,c){(0,s.$T)(t,e,c),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.$T)(t,i,c),(0,s.$T)(t,r,c)},p(t,e){128&e&&c!==(c=t[19].msg+"")&&(0,s.rT)(o,c)},d(t){t&&(0,s.og)(e),t&&(0,s.og)(i),t&&(0,s.og)(r)}}}function b(t){let e,n,o;return{c(){e=(0,s.fL)("(to "),n=(0,s.bG)("span"),n.textContent="TEAM",o=(0,s.fL)(")"),(0,s.Lj)(n,"class","badge bg-info")},m(t,i){(0,s.$T)(t,e,i),(0,s.$T)(t,n,i),(0,s.$T)(t,o,i)},p:s.ZT,d(t){t&&(0,s.og)(e),t&&(0,s.og)(n),t&&(0,s.og)(o)}}}function R(t){let e,n,o,i,r=t[19].targetName+"";return{c(){e=(0,s.fL)("(to "),n=(0,s.bG)("span"),o=(0,s.fL)(r),i=(0,s.fL)(")"),(0,s.Lj)(n,"class","badge bg-primary")},m(t,r){(0,s.$T)(t,e,r),(0,s.$T)(t,n,r),(0,s.R3)(n,o),(0,s.$T)(t,i,r)},p(t,e){128&e&&r!==(r=t[19].targetName+"")&&(0,s.rT)(o,r)},d(t){t&&(0,s.og)(e),t&&(0,s.og)(n),t&&(0,s.og)(i)}}}function L(t){let e,n;function o(t,e){return"join"===t[19].type?d:"left"===t[19].type?u:"reset"===t[19].type?h:"rename"===t[19].type?l:"chat"===t[19].type?a:"sys"===t[19].type?c:r}let i=o(t),m=i(t);return{c(){e=(0,s.bG)("li"),m.c(),n=(0,s.Dh)(),(0,s.Lj)(e,"class","list-group-item")},m(t,o){(0,s.$T)(t,e,o),m.m(e,null),(0,s.R3)(e,n)},p(t,s){i===(i=o(t))&&m?m.p(t,s):(m.d(1),m=i(t),m&&(m.c(),m.m(e,n)))},d(t){t&&(0,s.og)(e),m.d()}}}function y(t){let e,n,o,r,c,a,l,h,u,d,m,g,f,p,b,R,y,T,v,$,G,j=t[7],C=[];for(let e=0;e<j.length;e+=1)C[e]=L(i(t,j,e));return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("h4"),r=(0,s.fL)(t[0]),c=(0,s.Dh)(),a=(0,s.bG)("div"),l=(0,s.bG)("button"),h=(0,s.fL)(t[6]),u=(0,s.fL)(" new"),d=(0,s.Dh)(),m=(0,s.bG)("button"),m.textContent="Clear",g=(0,s.Dh)(),f=(0,s.bG)("ul");for(let t=0;t<C.length;t+=1)C[t].c();p=(0,s.Dh)(),b=(0,s.bG)("div"),R=(0,s.bG)("div"),y=(0,s.bG)("input"),T=(0,s.Dh)(),v=(0,s.bG)("button"),v.textContent="Send",(0,s.Lj)(o,"class","float-start"),(0,s.Lj)(l,"class","btn btn-sm btn-info"),(0,s.VH)(l,"d-none",!t[6]&&t[4]),(0,s.Lj)(m,"class","btn btn-sm btn-danger"),(0,s.VH)(m,"d-none",!t[7].length),(0,s.Lj)(a,"class","float-end"),(0,s.Lj)(n,"class","card-header"),(0,s.Lj)(f,"class","list-group list-group-flush"),(0,s.cz)(f,"overflow-y","scroll"),(0,s.cz)(f,"height",t[1]),(0,s.Lj)(y,"type","text"),(0,s.Lj)(y,"class","form-control"),(0,s.Lj)(y,"placeholder","Enter a message hereâ€¦"),(0,s.Lj)(v,"class","btn btn-outline-primary"),(0,s.Lj)(R,"class","input-group"),(0,s.Lj)(b,"class","card-footer"),(0,s.Lj)(e,"class","card")},m(i,L){(0,s.$T)(i,e,L),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,r),(0,s.R3)(n,c),(0,s.R3)(n,a),(0,s.R3)(a,l),(0,s.R3)(l,h),(0,s.R3)(l,u),(0,s.R3)(a,d),(0,s.R3)(a,m),(0,s.R3)(e,g),(0,s.R3)(e,f);for(let t=0;t<C.length;t+=1)C[t].m(f,null);t[16](f),(0,s.R3)(e,p),(0,s.R3)(e,b),(0,s.R3)(b,R),(0,s.R3)(R,y),(0,s.Bm)(y,t[5]),(0,s.R3)(R,T),(0,s.R3)(R,v),$||(G=[(0,s.oL)(l,"click",t[14]),(0,s.oL)(m,"click",t[15]),(0,s.oL)(f,"scroll",t[10]),(0,s.oL)(y,"keydown",t[12]),(0,s.oL)(y,"input",t[17]),(0,s.oL)(v,"click",t[11])],$=!0)},p(t,[e]){if(1&e&&(0,s.rT)(r,t[0]),64&e&&(0,s.rT)(h,t[6]),80&e&&(0,s.VH)(l,"d-none",!t[6]&&t[4]),128&e&&(0,s.VH)(m,"d-none",!t[7].length),128&e){let n;for(j=t[7],n=0;n<j.length;n+=1){const s=i(t,j,n);C[n]?C[n].p(s,e):(C[n]=L(s),C[n].c(),C[n].m(f,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=j.length}2&e&&(0,s.cz)(f,"height",t[1]),32&e&&y.value!==t[5]&&(0,s.Bm)(y,t[5])},i:s.ZT,o:s.ZT,d(n){n&&(0,s.og)(e),(0,s.RM)(C,n),t[16](null),$=!1,(0,s.j7)(G)}}}function T(t,e,n){let i,r,{title:c="Chat"}=e,{height:a="20rem"}=e,{chatState:l}=e,{onInput:h=console.log}=e;const{messages:u,queueLength:d}=l;let m;(0,s.FI)(t,u,(t=>n(7,r=t))),(0,s.FI)(t,d,(t=>n(6,i=t)));let g=!0,f="";function p(){h(f),n(5,f="")}return(0,o.gx)((function(){g&&m.scrollTo(0,m.scrollHeight)})),t.$$set=t=>{"title"in t&&n(0,c=t.title),"height"in t&&n(1,a=t.height),"chatState"in t&&n(2,l=t.chatState),"onInput"in t&&n(13,h=t.onInput)},[c,a,l,m,g,f,i,r,u,d,function(){const t=m&&m.offsetHeight+m.scrollTop>m.scrollHeight-20;g!==t&&(n(4,g=t),l.setHold(!g))},p,function(t){13===t.which&&p()},h,()=>l.setHold(!n(4,g=!0)),()=>l.clear(),function(t){s.Vn[t?"unshift":"push"]((()=>{m=t,n(3,m)}))},function(){f=this.value,n(5,f)}]}class v extends s.f_{constructor(t){super(),(0,s.S1)(this,t,T,y,s.N8,{title:0,height:1,chatState:2,onInput:13})}}const $=v},40:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var s=n(0);function o(t){let e,n,o,i,r,c,a,l,h;const u=t[3].default,d=(0,s.nu)(u,t,t[2],null);return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("h4"),o.textContent="Past Games",i=(0,s.Dh)(),r=(0,s.bG)("button"),r.textContent="Clear",c=(0,s.Dh)(),d&&d.c(),(0,s.Lj)(o,"class","float-start"),(0,s.Lj)(r,"class","btn btn-sm btn-danger float-end"),(0,s.VH)(r,"d-none",t[0]),(0,s.Lj)(n,"class","card-header"),(0,s.Lj)(e,"class","card mb-3")},m(u,m){(0,s.$T)(u,e,m),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(e,c),d&&d.m(e,null),a=!0,l||(h=(0,s.oL)(r,"click",(function(){(0,s.sB)(t[1])&&t[1].apply(this,arguments)})),l=!0)},p(e,[n]){t=e,1&n&&(0,s.VH)(r,"d-none",t[0]),d&&d.p&&(!a||4&n)&&(0,s.Tj)(d,u,t,t[2],a?n:-1,null,null)},i(t){a||((0,s.Ui)(d,t),a=!0)},o(t){(0,s.et)(d,t),a=!1},d(t){t&&(0,s.og)(e),d&&d.d(t),l=!1,h()}}}function i(t,e,n){let{$$slots:s={},$$scope:o}=e,{canClear:i}=e,{onClear:r}=e;return t.$$set=t=>{"canClear"in t&&n(0,i=t.canClear),"onClear"in t&&n(1,r=t.onClear),"$$scope"in t&&n(2,o=t.$$scope)},[i,r,o,s]}class r extends s.f_{constructor(t){super(),(0,s.S1)(this,t,i,o,s.N8,{canClear:0,onClear:1})}}const c=r},41:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var s=n(0);function o(t,e,n){const s=t.slice();return s[4]=e[n],s}function i(t,e,n){const s=t.slice();return s[7]=e[n],s}function r(t,e,n){const s=t.slice();return s[7]=e[n],s}function c(t){let e,n,o=t[7][0]+"";return{c(){e=(0,s.bG)("th"),n=(0,s.fL)(o),(0,s.Lj)(e,"scope","col")},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){2&e&&o!==(o=t[7][0]+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function a(t){let e,n,o,i;return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.fL)("nobody"),(0,s.Lj)(n,"colspan",i=3+t[1].length),(0,s.Lj)(e,"class","table-secondary")},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(n,o)},p(t,e){2&e&&i!==(i=3+t[1].length)&&(0,s.Lj)(n,"colspan",i)},d(t){t&&(0,s.og)(e)}}}function l(t){let e,n,o,r,c,a,l,d,m,g,f,p,b,R=t[4].name+"",L=t[4].cn+"",y=(t[4].ping<0?"?":t[4].ping)+"",T=t[4].active&&h(t),v=t[1],$=[];for(let e=0;e<v.length;e+=1)$[e]=u(i(t,v,e));return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("th"),o=(0,s.fL)(R),r=(0,s.fL)(" ("),c=(0,s.fL)(L),a=(0,s.fL)(")"),d=(0,s.Dh)(),T&&T.c(),m=(0,s.Dh)();for(let t=0;t<$.length;t+=1)$[t].c();g=(0,s.Dh)(),f=(0,s.bG)("td"),p=(0,s.fL)(y),b=(0,s.Dh)(),(0,s.Lj)(n,"scope","row"),(0,s.Lj)(n,"colspan",l=t[4].active?1:2),(0,s.VH)(e,"table-info",t[4].isMe&&t[4].active),(0,s.VH)(e,"table-warning",t[4].isMe&&!t[4].active),(0,s.VH)(e,"table-secondary",!t[4].isMe&&!t[4].active)},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(n,r),(0,s.R3)(n,c),(0,s.R3)(n,a),(0,s.R3)(e,d),T&&T.m(e,null),(0,s.R3)(e,m);for(let t=0;t<$.length;t+=1)$[t].m(e,null);(0,s.R3)(e,g),(0,s.R3)(e,f),(0,s.R3)(f,p),(0,s.R3)(e,b)},p(t,r){if(1&r&&R!==(R=t[4].name+"")&&(0,s.rT)(o,R),1&r&&L!==(L=t[4].cn+"")&&(0,s.rT)(c,L),1&r&&l!==(l=t[4].active?1:2)&&(0,s.Lj)(n,"colspan",l),t[4].active?T?T.p(t,r):(T=h(t),T.c(),T.m(e,m)):T&&(T.d(1),T=null),3&r){let n;for(v=t[1],n=0;n<v.length;n+=1){const s=i(t,v,n);$[n]?$[n].p(s,r):($[n]=u(s),$[n].c(),$[n].m(e,g))}for(;n<$.length;n+=1)$[n].d(1);$.length=v.length}1&r&&y!==(y=(t[4].ping<0?"?":t[4].ping)+"")&&(0,s.rT)(p,y),1&r&&(0,s.VH)(e,"table-info",t[4].isMe&&t[4].active),1&r&&(0,s.VH)(e,"table-warning",t[4].isMe&&!t[4].active),1&r&&(0,s.VH)(e,"table-secondary",!t[4].isMe&&!t[4].active)},d(t){t&&(0,s.og)(e),T&&T.d(),(0,s.RM)($,t)}}}function h(t){let e,n,o=t[4].rank+"";return{c(){e=(0,s.bG)("td"),n=(0,s.fL)(o)},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){1&e&&o!==(o=t[4].rank+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function u(t){let e,n,o=t[7][1](t[4])+"";return{c(){e=(0,s.bG)("td"),n=(0,s.fL)(o)},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){3&e&&o!==(o=t[7][1](t[4])+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function d(t){let e,n=(t[2]||t[4].isMe||t[4].active)&&l(t);return{c(){n&&n.c(),e=(0,s.cS)()},m(t,o){n&&n.m(t,o),(0,s.$T)(t,e,o)},p(t,s){t[2]||t[4].isMe||t[4].active?n?n.p(t,s):(n=l(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&(0,s.og)(e)}}}function m(t){let e,n,i,l,h,u,m,g,f,p,b,R,L,y,T,v,$,G,j,C,w,k=t[1],D=[];for(let e=0;e<k.length;e+=1)D[e]=c(r(t,k,e));let x=t[0],S=[];for(let e=0;e<x.length;e+=1)S[e]=d(o(t,x,e));let M=null;return x.length||(M=a(t)),{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),i=(0,s.bG)("h4"),i.textContent="Leaderboard",l=(0,s.Dh)(),h=(0,s.bG)("label"),u=(0,s.bG)("input"),m=(0,s.Dh)(),g=(0,s.bG)("span"),g.textContent="show spectators",f=(0,s.Dh)(),p=(0,s.bG)("div"),b=(0,s.bG)("table"),R=(0,s.bG)("tr"),L=(0,s.bG)("th"),L.textContent="Name",y=(0,s.Dh)(),T=(0,s.bG)("th"),T.textContent="Rank",v=(0,s.Dh)();for(let t=0;t<D.length;t+=1)D[t].c();$=(0,s.Dh)(),G=(0,s.bG)("th"),G.textContent="Ping",j=(0,s.Dh)();for(let t=0;t<S.length;t+=1)S[t].c();M&&M.c(),(0,s.Lj)(i,"class","float-start"),(0,s.Lj)(u,"type","checkbox"),(0,s.Lj)(u,"class","form-check-input"),(0,s.Lj)(g,"class","form-check-label"),(0,s.Lj)(h,"class","form-check float-end"),(0,s.Lj)(n,"class","card-header"),(0,s.Lj)(L,"scope","col"),(0,s.Lj)(T,"scope","col"),(0,s.Lj)(G,"scope","col"),(0,s.Lj)(b,"class","table table-sm"),(0,s.Lj)(p,"class","table-responsive"),(0,s.cz)(p,"max-height","20rem"),(0,s.Lj)(e,"class","card mb-3")},m(o,r){(0,s.$T)(o,e,r),(0,s.R3)(e,n),(0,s.R3)(n,i),(0,s.R3)(n,l),(0,s.R3)(n,h),(0,s.R3)(h,u),u.checked=t[2],(0,s.R3)(h,m),(0,s.R3)(h,g),(0,s.R3)(e,f),(0,s.R3)(e,p),(0,s.R3)(p,b),(0,s.R3)(b,R),(0,s.R3)(R,L),(0,s.R3)(R,y),(0,s.R3)(R,T),(0,s.R3)(R,v);for(let t=0;t<D.length;t+=1)D[t].m(R,null);(0,s.R3)(R,$),(0,s.R3)(R,G),(0,s.R3)(b,j);for(let t=0;t<S.length;t+=1)S[t].m(b,null);M&&M.m(b,null),C||(w=(0,s.oL)(u,"change",t[3]),C=!0)},p(t,[e]){if(4&e&&(u.checked=t[2]),2&e){let n;for(k=t[1],n=0;n<k.length;n+=1){const s=r(t,k,n);D[n]?D[n].p(s,e):(D[n]=c(s),D[n].c(),D[n].m(R,$))}for(;n<D.length;n+=1)D[n].d(1);D.length=k.length}if(7&e){let n;for(x=t[0],n=0;n<x.length;n+=1){const s=o(t,x,n);S[n]?S[n].p(s,e):(S[n]=d(s),S[n].c(),S[n].m(b,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=x.length,!x.length&&M?M.p(t,e):x.length?M&&(M.d(1),M=null):(M=a(t),M.c(),M.m(b,null))}},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),(0,s.RM)(D,t),(0,s.RM)(S,t),M&&M.d(),C=!1,w()}}}function g(t,e,n){let{players:s}=e,{columns:o=[]}=e,i=!0;return t.$$set=t=>{"players"in t&&n(0,s=t.players),"columns"in t&&n(1,o=t.columns)},[s,o,i,function(){i=this.checked,n(2,i)}]}class f extends s.f_{constructor(t){super(),(0,s.S1)(this,t,g,m,s.N8,{players:0,columns:1})}}const p=f},42:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var s=n(0);function o(t){let e,n,o,i,r,c;return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("span"),n.textContent="Name",o=(0,s.Dh)(),i=(0,s.bG)("input"),(0,s.Lj)(n,"class","input-group-text"),(0,s.Lj)(i,"type","text"),(0,s.Lj)(i,"class","form-control"),(0,s.Lj)(i,"placeholder",t[1]),(0,s.Lj)(i,"maxlength",t[2]),(0,s.Lj)(e,"class","input-group mb-3")},m(a,l){(0,s.$T)(a,e,l),(0,s.R3)(e,n),(0,s.R3)(e,o),(0,s.R3)(e,i),(0,s.Bm)(i,t[0]),r||(c=(0,s.oL)(i,"input",t[3]),r=!0)},p(t,[e]){2&e&&(0,s.Lj)(i,"placeholder",t[1]),4&e&&(0,s.Lj)(i,"maxlength",t[2]),1&e&&i.value!==t[0]&&(0,s.Bm)(i,t[0])},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),r=!1,c()}}}function i(t,e,n){let{value:s}=e,{placeholder:o="unnamed"}=e,{maxlength:i=20}=e;return t.$$set=t=>{"value"in t&&n(0,s=t.value),"placeholder"in t&&n(1,o=t.placeholder),"maxlength"in t&&n(2,i=t.maxlength)},[s,o,i,function(){s=this.value,n(0,s)}]}class r extends s.f_{constructor(t){super(),(0,s.S1)(this,t,i,o,s.N8,{value:0,placeholder:1,maxlength:2})}}const c=r},28:(t,e,n)=>{"use strict";n.d(e,{Z:()=>nt});var s=n(0),o=n(6);function i(t){let e,n,o,i,r,c,a,l,h,u,d,m=t[0][3]+"",g=t[0][4]+"";return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("span"),o=(0,s.fL)(m),i=(0,s.Dh)(),r=(0,s.bG)("label"),c=(0,s.bG)("input"),a=(0,s.Dh)(),l=(0,s.bG)("small"),h=(0,s.fL)(g),(0,s.Lj)(c,"type","checkbox"),(0,s.Lj)(c,"class","form-check-input"),(0,s.Lj)(l,"class","form-check-label text-muted"),(0,s.Lj)(r,"class","form-check form-switch")},m(m,g){(0,s.$T)(m,e,g),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(r,c),c.checked=t[2],(0,s.R3)(r,a),(0,s.R3)(r,l),(0,s.R3)(l,h),u||(d=(0,s.oL)(c,"change",t[3]),u=!0)},p(t,[e]){1&e&&m!==(m=t[0][3]+"")&&(0,s.rT)(o,m),4&e&&(c.checked=t[2]),1&e&&g!==(g=t[0][4]+"")&&(0,s.rT)(h,g)},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),u=!1,d()}}}function r(t,e,n){let o,i=s.ZT,r=()=>(i(),i=(0,s.Ld)(a,(t=>n(2,o=t))),a);t.$$.on_destroy.push((()=>i()));let{option:c}=e,{store:a}=e;return r(),t.$$set=t=>{"option"in t&&n(0,c=t.option),"store"in t&&r(n(1,a=t.store))},[c,a,o,function(){o=this.checked,a.set(o)}]}class c extends s.f_{constructor(t){super(),(0,s.S1)(this,t,r,i,s.N8,{option:0,store:1})}}const a=c;function l(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function h(t){let e,n,o,i,r,c,a,l,h,u=t[5]+"";return{c(){e=(0,s.bG)("label"),n=(0,s.bG)("input"),i=(0,s.Dh)(),r=(0,s.bG)("span"),c=(0,s.fL)(u),a=(0,s.Dh)(),(0,s.Lj)(n,"type","radio"),(0,s.Lj)(n,"class","form-check-input"),n.__value=o=t[7],n.value=n.__value,t[4][0].push(n),(0,s.Lj)(r,"class","form-check-label"),(0,s.Lj)(e,"class","form-check form-check-inline")},m(o,u){(0,s.$T)(o,e,u),(0,s.R3)(e,n),n.checked=n.__value===t[2],(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(r,c),(0,s.R3)(e,a),l||(h=(0,s.oL)(n,"change",t[3]),l=!0)},p(t,e){4&e&&(n.checked=n.__value===t[2]),1&e&&u!==(u=t[5]+"")&&(0,s.rT)(c,u)},d(o){o&&(0,s.og)(e),t[4][0].splice(t[4][0].indexOf(n),1),l=!1,h()}}}function u(t){let e,n,o,i,r,c,a,u,d=t[0][3]+"",m=t[0][4]+"",g=t[0][5],f=[];for(let e=0;e<g.length;e+=1)f[e]=h(l(t,g,e));return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("span"),o=(0,s.fL)(d),i=(0,s.Dh)(),r=(0,s.bG)("div"),c=(0,s.bG)("small"),a=(0,s.fL)(m),u=(0,s.Dh)();for(let t=0;t<f.length;t+=1)f[t].c();(0,s.Lj)(c,"class","text-muted")},m(t,l){(0,s.$T)(t,e,l),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i),(0,s.R3)(e,r),(0,s.R3)(r,c),(0,s.R3)(c,a),(0,s.R3)(e,u);for(let t=0;t<f.length;t+=1)f[t].m(e,null)},p(t,[n]){if(1&n&&d!==(d=t[0][3]+"")&&(0,s.rT)(o,d),1&n&&m!==(m=t[0][4]+"")&&(0,s.rT)(a,m),5&n){let s;for(g=t[0][5],s=0;s<g.length;s+=1){const o=l(t,g,s);f[s]?f[s].p(o,n):(f[s]=h(o),f[s].c(),f[s].m(e,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=g.length}},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),(0,s.RM)(f,t)}}}function d(t,e,n){let o,i=s.ZT,r=()=>(i(),i=(0,s.Ld)(a,(t=>n(2,o=t))),a);t.$$.on_destroy.push((()=>i()));let{option:c}=e,{store:a}=e;return r(),t.$$set=t=>{"option"in t&&n(0,c=t.option),"store"in t&&r(n(1,a=t.store))},[c,a,o,function(){o=this.__value,a.set(o)},[[]]]}class m extends s.f_{constructor(t){super(),(0,s.S1)(this,t,d,u,s.N8,{option:0,store:1})}}const g=m;function f(t){let e,n,o,i,r,c,a,l,h,u,d,m,g,f,p,b,R,L,y,T,v,$,G=t[0][3]+"",j=t[0][5]+"",C=t[0][6]+"",w=t[0][4]+"",k=[{type:"number"},{class:"form-control"},{min:p=t[0][5]},{max:b=t[0][6]},t[0][7]],D={};for(let t=0;t<k.length;t+=1)D=(0,s.f0)(D,k[t]);let x=[{type:"range"},{class:"form-range"},{min:y=t[0][5]},{max:T=t[0][6]},t[0][7]],S={};for(let t=0;t<x.length;t+=1)S=(0,s.f0)(S,x[t]);return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("span"),o=(0,s.fL)(G),i=(0,s.fL)(" (min: "),r=(0,s.fL)(j),c=(0,s.fL)(", max: "),a=(0,s.fL)(C),l=(0,s.fL)(")"),h=(0,s.Dh)(),u=(0,s.bG)("div"),d=(0,s.bG)("small"),m=(0,s.fL)(w),g=(0,s.Dh)(),f=(0,s.bG)("input"),R=(0,s.Dh)(),L=(0,s.bG)("input"),(0,s.Lj)(d,"class","text-muted"),(0,s.UF)(f,D),(0,s.UF)(L,S)},m(p,b){(0,s.$T)(p,e,b),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(n,i),(0,s.R3)(n,r),(0,s.R3)(n,c),(0,s.R3)(n,a),(0,s.R3)(n,l),(0,s.R3)(e,h),(0,s.R3)(e,u),(0,s.R3)(u,d),(0,s.R3)(d,m),(0,s.R3)(e,g),(0,s.R3)(e,f),(0,s.Bm)(f,t[2]),(0,s.R3)(e,R),(0,s.R3)(e,L),(0,s.Bm)(L,t[2]),v||($=[(0,s.oL)(f,"input",t[3]),(0,s.oL)(L,"change",t[4]),(0,s.oL)(L,"input",t[4])],v=!0)},p(t,[e]){1&e&&G!==(G=t[0][3]+"")&&(0,s.rT)(o,G),1&e&&j!==(j=t[0][5]+"")&&(0,s.rT)(r,j),1&e&&C!==(C=t[0][6]+"")&&(0,s.rT)(a,C),1&e&&w!==(w=t[0][4]+"")&&(0,s.rT)(m,w),(0,s.UF)(f,D=(0,s.Lo)(k,[{type:"number"},{class:"form-control"},1&e&&p!==(p=t[0][5])&&{min:p},1&e&&b!==(b=t[0][6])&&{max:b},1&e&&t[0][7]])),4&e&&(0,s.sC)(f.value)!==t[2]&&(0,s.Bm)(f,t[2]),(0,s.UF)(L,S=(0,s.Lo)(x,[{type:"range"},{class:"form-range"},1&e&&y!==(y=t[0][5])&&{min:y},1&e&&T!==(T=t[0][6])&&{max:T},1&e&&t[0][7]])),4&e&&(0,s.Bm)(L,t[2])},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),v=!1,(0,s.j7)($)}}}function p(t,e,n){let o,i=s.ZT,r=()=>(i(),i=(0,s.Ld)(a,(t=>n(2,o=t))),a);t.$$.on_destroy.push((()=>i()));let{option:c}=e,{store:a}=e;return r(),t.$$set=t=>{"option"in t&&n(0,c=t.option),"store"in t&&r(n(1,a=t.store))},[c,a,o,function(){o=(0,s.sC)(this.value),a.set(o)},function(){o=(0,s.sC)(this.value),a.set(o)}]}class b extends s.f_{constructor(t){super(),(0,s.S1)(this,t,p,f,s.N8,{option:0,store:1})}}const R=b;function L(t){let e,n;return{c(){e=(0,s.fL)("unknown option "),n=(0,s.fL)(t[1])},m(t,o){(0,s.$T)(t,e,o),(0,s.$T)(t,n,o)},p(t,e){2&e&&(0,s.rT)(n,t[1])},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e),t&&(0,s.og)(n)}}}function y(t){let e,n;return e=new g({props:{option:t[1],store:t[2]}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p(t,n){const s={};2&n&&(s.option=t[1]),4&n&&(s.store=t[2]),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function T(t){let e,n;return e=new R({props:{option:t[1],store:t[2]}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p(t,n){const s={};2&n&&(s.option=t[1]),4&n&&(s.store=t[2]),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function v(t){let e,n;return e=new a({props:{option:t[1],store:t[2]}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p(t,n){const s={};2&n&&(s.option=t[1]),4&n&&(s.store=t[2]),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function $(t){let e,n,o,i;const r=[v,T,y,L],c=[];function a(t,e){return"b"===t[0][0][1]?0:"i"===t[0][0][1]?1:"e"===t[0][0][1]?2:3}return e=a(t),n=c[e]=r[e](t),{c(){n.c(),o=(0,s.cS)()},m(t,n){c[e].m(t,n),(0,s.$T)(t,o,n),i=!0},p(t,[i]){let l=e;e=a(t),e===l?c[e].p(t,i):((0,s.dv)(),(0,s.et)(c[l],1,1,(()=>{c[l]=null})),(0,s.gb)(),n=c[e],n?n.p(t,i):(n=c[e]=r[e](t),n.c()),(0,s.Ui)(n,1),n.m(o.parentNode,o))},i(t){i||((0,s.Ui)(n),i=!0)},o(t){(0,s.et)(n),i=!1},d(t){c[e].d(t),t&&(0,s.og)(o)}}}function G(t,e,n){let s,o,{optionStore:i}=e;return t.$$set=t=>{"optionStore"in t&&n(0,i=t.optionStore)},t.$$.update=()=>{1&t.$$.dirty&&n(1,[s,o]=i,s,(n(2,o),n(0,i)))},[i,s,o]}class j extends s.f_{constructor(t){super(),(0,s.S1)(this,t,G,$,s.N8,{optionStore:0})}}const C=j;var w=n(47),k=n(38);const D=t=>({}),x=t=>({});function S(t){let e,n,o,i,r,c,a,l,h,u,d,m,g,f,p,b,R,L,y,T,v,$,G,j,C,k,S,M,N,I,E,A,P,H,O,_,V,B,U,Z,J,q=t[4].length+"",F=t[4].length+"",z=t[6]?"Show":"Hide";G=new w.Z({props:{startTime:t[7],endTime:t[8]}});const Y=t[13].default,W=(0,s.nu)(Y,t,t[12],null),K=t[13].newRoom,Q=(0,s.nu)(K,t,t[12],x);return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.bG)("h4"),i=(0,s.fL)("Rooms (showing "),r=(0,s.fL)(q),c=(0,s.fL)("/"),a=(0,s.fL)(F),l=(0,s.fL)(")"),h=(0,s.Dh)(),u=(0,s.bG)("div"),d=(0,s.bG)("button"),m=(0,s.bG)("div"),g=(0,s.fL)("\n        Refresh"),f=(0,s.Dh)(),p=(0,s.bG)("button"),b=(0,s.fL)(z),L=(0,s.Dh)(),y=(0,s.bG)("button"),T=(0,s.fL)("New"),v=(0,s.Dh)(),$=(0,s.bG)("div"),(0,s.YC)(G.$$.fragment),j=(0,s.Dh)(),W&&W.c(),C=(0,s.Dh)(),k=(0,s.bG)("div"),S=(0,s.bG)("div"),M=(0,s.bG)("div"),N=(0,s.bG)("div"),N.innerHTML='<h5 class="modal-title">New room</h5> \n        <button class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>',I=(0,s.Dh)(),E=(0,s.bG)("div"),Q&&Q.c(),A=(0,s.Dh)(),P=(0,s.bG)("div"),H=(0,s.bG)("button"),H.textContent="Reset",O=(0,s.Dh)(),_=(0,s.bG)("button"),_.textContent="Cancel",V=(0,s.Dh)(),B=(0,s.bG)("button"),B.textContent="Create",(0,s.Lj)(o,"class","float-start"),(0,s.Lj)(m,"class","spinner-border spinner-border-sm"),(0,s.VH)(m,"d-none",!t[1]),(0,s.Lj)(d,"class","btn btn-sm btn-secondary"),(0,s.Lj)(p,"class",R="btn btn-sm btn-"+(t[6]?"secondary":"warning")),(0,s.Lj)(y,"class","btn btn-sm btn-primary"),(0,s.Lj)(y,"data-bs-toggle","modal"),(0,s.Lj)(y,"data-bs-target","#newRoomModal"),y.disabled=t[5],(0,s.Lj)(u,"class","float-end"),(0,s.Lj)(n,"class","card-header"),(0,s.Lj)($,"class","card-body"),(0,s.cz)($,"overflow-y","scroll"),(0,s.cz)($,"height","50vh"),(0,s.VH)($,"d-none",t[6]),(0,s.Lj)(e,"class","card mb-3"),(0,s.Lj)(N,"class","modal-header"),(0,s.Lj)(E,"class","modal-body"),(0,s.Lj)(H,"class","btn btn-danger me-auto"),(0,s.Lj)(_,"class","btn btn-secondary"),(0,s.Lj)(_,"data-bs-dismiss","modal"),(0,s.Lj)(B,"class","btn btn-primary"),(0,s.Lj)(B,"data-bs-dismiss","modal"),(0,s.Lj)(P,"class","modal-footer"),(0,s.Lj)(M,"class","modal-content"),(0,s.Lj)(S,"class","modal-dialog modal-dialog-centered"),(0,s.Lj)(S,"role","document"),(0,s.Lj)(k,"class","modal"),(0,s.Lj)(k,"id","newRoomModal"),(0,s.Lj)(k,"tabindex","-1"),(0,s.Lj)(k,"role","dialog"),(0,s.Lj)(k,"aria-hidden","true")},m(R,w){(0,s.$T)(R,e,w),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(o,i),(0,s.R3)(o,r),(0,s.R3)(o,c),(0,s.R3)(o,a),(0,s.R3)(o,l),(0,s.R3)(n,h),(0,s.R3)(n,u),(0,s.R3)(u,d),(0,s.R3)(d,m),(0,s.R3)(d,g),(0,s.R3)(u,f),(0,s.R3)(u,p),(0,s.R3)(p,b),(0,s.R3)(u,L),(0,s.R3)(u,y),(0,s.R3)(y,T),(0,s.R3)(e,v),(0,s.R3)(e,$),(0,s.ye)(G,$,null),(0,s.R3)($,j),W&&W.m($,null),(0,s.$T)(R,C,w),(0,s.$T)(R,k,w),(0,s.R3)(k,S),(0,s.R3)(S,M),(0,s.R3)(M,N),(0,s.R3)(M,I),(0,s.R3)(M,E),Q&&Q.m(E,null),(0,s.R3)(M,A),(0,s.R3)(M,P),(0,s.R3)(P,H),(0,s.R3)(P,O),(0,s.R3)(P,_),(0,s.R3)(P,V),(0,s.R3)(P,B),U=!0,Z||(J=[(0,s.oL)(d,"click",t[14]),(0,s.oL)(p,"click",t[15]),(0,s.oL)(H,"click",(function(){(0,s.sB)(t[3])&&t[3].apply(this,arguments)})),(0,s.oL)(B,"click",(function(){(0,s.sB)(t[2])&&t[2].apply(this,arguments)}))],Z=!0)},p(e,[n]){t=e,(!U||16&n)&&q!==(q=t[4].length+"")&&(0,s.rT)(r,q),(!U||16&n)&&F!==(F=t[4].length+"")&&(0,s.rT)(a,F),2&n&&(0,s.VH)(m,"d-none",!t[1]),(!U||64&n)&&z!==(z=t[6]?"Show":"Hide")&&(0,s.rT)(b,z),(!U||64&n&&R!==(R="btn btn-sm btn-"+(t[6]?"secondary":"warning")))&&(0,s.Lj)(p,"class",R),(!U||32&n)&&(y.disabled=t[5]);const o={};128&n&&(o.startTime=t[7]),256&n&&(o.endTime=t[8]),G.$set(o),W&&W.p&&(!U||4096&n)&&(0,s.Tj)(W,Y,t,t[12],U?n:-1,null,null),64&n&&(0,s.VH)($,"d-none",t[6]),Q&&Q.p&&(!U||4096&n)&&(0,s.Tj)(Q,K,t,t[12],U?n:-1,D,x)},i(t){U||((0,s.Ui)(G.$$.fragment,t),(0,s.Ui)(W,t),(0,s.Ui)(Q,t),U=!0)},o(t){(0,s.et)(G.$$.fragment,t),(0,s.et)(W,t),(0,s.et)(Q,t),U=!1},d(t){t&&(0,s.og)(e),(0,s.vp)(G),W&&W.d(t),t&&(0,s.og)(C),t&&(0,s.og)(k),Q&&Q.d(t),Z=!1,(0,s.j7)(J)}}}function M(t,e,n){let s,{$$slots:o={},$$scope:i}=e,{onRefresh:r}=e,{isRefreshing:c}=e,{onNewRoom:a}=e,{onResetRoomOptions:l}=e,{rooms:h}=e,{disableNew:u=!1}=e,{refreshTimeoutBase:d=15e3}=e,{refreshTimeoutJitter:m=15e3}=e,g=!1,f=0,p=1;function b(){clearTimeout(s);const t=d+Math.random()*m;n(7,f=Date.now()),n(8,p=Date.now()+t),s=setTimeout((()=>{r(),b()}),t)}return b(),(0,k.ev)((()=>clearTimeout(s))),t.$$set=t=>{"onRefresh"in t&&n(0,r=t.onRefresh),"isRefreshing"in t&&n(1,c=t.isRefreshing),"onNewRoom"in t&&n(2,a=t.onNewRoom),"onResetRoomOptions"in t&&n(3,l=t.onResetRoomOptions),"rooms"in t&&n(4,h=t.rooms),"disableNew"in t&&n(5,u=t.disableNew),"refreshTimeoutBase"in t&&n(10,d=t.refreshTimeoutBase),"refreshTimeoutJitter"in t&&n(11,m=t.refreshTimeoutJitter),"$$scope"in t&&n(12,i=t.$$scope)},[r,c,a,l,h,u,g,f,p,b,d,m,i,o,()=>(b(),r()),()=>n(6,g=!g)]}class N extends s.f_{constructor(t){super(),(0,s.S1)(this,t,M,S,s.N8,{onRefresh:0,isRefreshing:1,onNewRoom:2,onResetRoomOptions:3,rooms:4,disableNew:5,refreshTimeoutBase:10,refreshTimeoutJitter:11})}}const I=N;class E{constructor(t){this.c=t,this.addMessageCallback=this.c.addMessageCallback.bind(this),this.addDisconnectCallback=this.c.addDisconnectCallback.bind(this),this.removeMessageCallback=this.c.removeMessageCallback.bind(this),this.removeDisconnectCallback=this.c.removeDisconnectCallback.bind(this),this.createMessage=this.c.createMessage.bind(this),this.send=this.c.send.bind(this),this.sendMessage=this.c.sendMessage.bind(this)}get connected(){return this.c.connected}disconnect(){this.c.disconnect()}}class A{constructor(t){this.room=t,this.msgCallbacks=[],this.discCallbacks=[];const e=e=>{if(!e.length)return console.log("neterr: empty message",e),void t.disconnect();let n;try{n=e.getByteArray(0)}catch(n){return console.log("neterr: first item is not byte array",e),void t.disconnect()}const s=new Uint8Array(n);this.msgCallbacks.forEach((t=>t(s)))},n=()=>{this.discCallbacks.forEach((t=>t())),t.removeMessageCallback(e),setTimeout((()=>t.removeDisconnectCallback(n)),1)};t.addMessageCallback("",e),t.addDisconnectCallback(n)}get connected(){return this.room.connected}disconnect(){this.room.disconnect()}send(t){this.room.send("",t)}registerRecv(t){this.msgCallbacks.push(t)}registerDisc(t){this.discCallbacks.push(t)}}n(346);class P{static thenDisconnect(t){t.then((t=>t.disconnect()))}connect(t,e){return n=this,s=void 0,i=function*(){for(;this.curConn&&e&&e===this.curConnId;)try{return yield this.curConn}catch(t){}this.curConnId=e;try{const e=this.curConn,n=yield this.curConn=t();return e&&P.thenDisconnect(e),n}catch(t){throw this.curConn=this.curConnId=void 0,t}},new((o=void 0)||(o=Promise))((function(t,e){function r(t){try{a(i.next(t))}catch(t){e(t)}}function c(t){try{a(i.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(r,c)}a((i=i.apply(n,s||[])).next())}));var n,s,o,i}cancel(){this.curConn&&(P.thenDisconnect(this.curConn),this.curConn=this.curConnId=void 0)}}class H{constructor(t,e){this.client=t,this.cm=new P,this.client.multiplayer.useSecureConnections=!0,e&&(this.client.multiplayer.developmentServer=e)}createRoom(t,e,n=!0,s=null){return new Promise(((o,i)=>this.client.multiplayer.createRoom(t,e,n,s,o,i)))}createJoinRoom(t,e,n=!0,s=null,o=null){return this.cm.connect((()=>new Promise(((i,r)=>this.client.multiplayer.createJoinRoom(t,e,n,s,o,(t=>i(new E(t))),r)))))}joinRoom(t,e=null){return this.cm.connect((()=>new Promise(((n,s)=>this.client.multiplayer.joinRoom(t,e,(t=>n(new E(t))),s)))))}listRooms(t,e={},n=0,s=0){return new Promise(((o,i)=>this.client.multiplayer.listRooms(t,e,n,s,o,i)))}disconnect(){return t=this,e=void 0,s=function*(){},new((n=void 0)||(n=Promise))((function(o,i){function r(t){try{a(s.next(t))}catch(t){i(t)}}function c(t){try{a(s.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((s=s.apply(t,e||[])).next())}));var t,e,n,s}}class O{constructor(t,e="public"){this.gameId=t,this.defaultConnectionID=e,this.cm=new P,PlayerIO.useSecureApiRequests=!0}connect(t=this.defaultConnectionID,e={userId:"guest"},n={}){return s=this,o=void 0,r=function*(){return this.cm.connect((()=>new Promise(((s,o)=>PlayerIO.authenticate(this.gameId,t,e,n,(t=>s(new H(t))),o)))),void 0)},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{a(r.next(t))}catch(t){e(t)}}function c(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(t){t(s)}))).then(n,c)}a((r=r.apply(s,o||[])).next())}));var s,o,i,r}cancel(){this.cm.cancel()}}var _=n(46);function V(t,e,n){const s=t.slice();return s[19]=e[n],s}function B(t,e,n){const s=t.slice();return s[25]=e[n],s}function U(t,e,n){const s=t.slice();return s[25]=e[n],s}function Z(t,e,n){const s=t.slice();return s[20]=e[n],s}function J(t){let e,n,o=t[25][0]+"";return{c(){e=(0,s.bG)("th"),n=(0,s.fL)(o),(0,s.Lj)(e,"scope","col")},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,e){4&e&&o!==(o=t[25][0]+"")&&(0,s.rT)(n,o)},d(t){t&&(0,s.og)(e)}}}function q(t){let e,n,o,i,r;return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.fL)("No rooms"),r=(0,s.Dh)(),(0,s.Lj)(n,"colspan",i=1+t[2].length),(0,s.Lj)(n,"class","text-center")},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,r)},p(t,e){4&e&&i!==(i=1+t[2].length)&&(0,s.Lj)(n,"colspan",i)},d(t){t&&(0,s.og)(e)}}}function F(t){let e,n,o,i=t[25][1](t[19])+"";return{c(){e=(0,s.bG)("td"),n=(0,s.fL)(i),(0,s.Lj)(e,"title",o=t[25][2]?t[25][2](t[19]):"")},m(t,o){(0,s.$T)(t,e,o),(0,s.R3)(e,n)},p(t,r){12&r&&i!==(i=t[25][1](t[19])+"")&&(0,s.rT)(n,i),12&r&&o!==(o=t[25][2]?t[25][2](t[19]):"")&&(0,s.Lj)(e,"title",o)},d(t){t&&(0,s.og)(e)}}}function z(t){let e,n,o,i,r,c,a;function l(){return t[15](t[19])}let h=t[2],u=[];for(let e=0;e<h.length;e+=1)u[e]=F(B(t,h,e));return{c(){e=(0,s.bG)("tr"),n=(0,s.bG)("td"),o=(0,s.bG)("button"),o.textContent="Join",i=(0,s.Dh)();for(let t=0;t<u.length;t+=1)u[t].c();r=(0,s.Dh)(),(0,s.Lj)(o,"class","btn btn-outline-primary btn-small")},m(t,h){(0,s.$T)(t,e,h),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null);(0,s.R3)(e,r),c||(a=(0,s.oL)(o,"click",l),c=!0)},p(n,s){if(t=n,12&s){let n;for(h=t[2],n=0;n<h.length;n+=1){const o=B(t,h,n);u[n]?u[n].p(o,s):(u[n]=F(o),u[n].c(),u[n].m(e,r))}for(;n<u.length;n+=1)u[n].d(1);u.length=h.length}},d(t){t&&(0,s.og)(e),(0,s.RM)(u,t),c=!1,a()}}}function Y(t){let e,n,o,i,r,c=t[2],a=[];for(let e=0;e<c.length;e+=1)a[e]=J(U(t,c,e));let l=t[3],h=[];for(let e=0;e<l.length;e+=1)h[e]=z(V(t,l,e));let u=null;return l.length||(u=q(t)),{c(){e=(0,s.bG)("table"),n=(0,s.bG)("tr"),o=(0,s.bG)("th"),o.textContent="Action",i=(0,s.Dh)();for(let t=0;t<a.length;t+=1)a[t].c();r=(0,s.Dh)();for(let t=0;t<h.length;t+=1)h[t].c();u&&u.c(),(0,s.Lj)(o,"scope","col"),(0,s.Lj)(e,"class","table table-sm")},m(t,c){(0,s.$T)(t,e,c),(0,s.R3)(e,n),(0,s.R3)(n,o),(0,s.R3)(n,i);for(let t=0;t<a.length;t+=1)a[t].m(n,null);(0,s.R3)(e,r);for(let t=0;t<h.length;t+=1)h[t].m(e,null);u&&u.m(e,null)},p(t,s){if(4&s){let e;for(c=t[2],e=0;e<c.length;e+=1){const o=U(t,c,e);a[e]?a[e].p(o,s):(a[e]=J(o),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}if(1038&s){let n;for(l=t[3],n=0;n<l.length;n+=1){const o=V(t,l,n);h[n]?h[n].p(o,s):(h[n]=z(o),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=l.length,!l.length&&u?u.p(t,s):l.length?u&&(u.d(1),u=null):(u=q(t),u.c(),u.m(e,null))}},d(t){t&&(0,s.og)(e),(0,s.RM)(a,t),(0,s.RM)(h,t),u&&u.d()}}}function W(t){let e,n;return e=new C({props:{optionStore:t[20]}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p:s.ZT,i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function K(t){let e,n,o=t[6],i=[];for(let e=0;e<o.length;e+=1)i[e]=W(Z(t,o,e));const r=t=>(0,s.et)(i[t],1,1,(()=>{i[t]=null}));return{c(){e=(0,s.bG)("div");for(let t=0;t<i.length;t+=1)i[t].c();(0,s.Lj)(e,"slot","newRoom")},m(t,o){(0,s.$T)(t,e,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(64&n){let c;for(o=t[6],c=0;c<o.length;c+=1){const r=Z(t,o,c);i[c]?(i[c].p(r,n),(0,s.Ui)(i[c],1)):(i[c]=W(r),i[c].c(),(0,s.Ui)(i[c],1),i[c].m(e,null))}for((0,s.dv)(),c=o.length;c<i.length;c+=1)r(c);(0,s.gb)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)(0,s.Ui)(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)(0,s.et)(i[t]);n=!1},d(t){t&&(0,s.og)(e),(0,s.RM)(i,t)}}}function Q(t){let e,n;return e=new I({props:{isRefreshing:t[4],rooms:t[3],disableNew:!t[5],onRefresh:t[9],onResetRoomOptions:t[8],onNewRoom:t[16],$$slots:{newRoom:[K,({room:t})=>({19:t}),({room:t})=>t?524288:0],default:[Y,({room:t})=>({19:t}),({room:t})=>t?524288:0]},$$scope:{ctx:t}}}),{c(){(0,s.YC)(e.$$.fragment)},m(t,o){(0,s.ye)(e,t,o),n=!0},p(t,[n]){const s={};16&n&&(s.isRefreshing=t[4]),8&n&&(s.rooms=t[3]),32&n&&(s.disableNew=!t[5]),3&n&&(s.onNewRoom=t[16]),1073741838&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||((0,s.Ui)(e.$$.fragment,t),n=!0)},o(t){(0,s.et)(e.$$.fragment,t),n=!1},d(t){(0,s.vp)(e,t)}}}function X(t){const e=t.onlineUsers,n=+t.roomData.activeCount||0,s=e-n;return s?`${n}+${s}`:e}function tt(t,e,n){let{gameId:s}=e,{roomType:i}=e,{joinData:r=null}=e,{onJoinedRoom:c}=e,{formatGameMode:a}=e,{columns:l=[["Players",t=>X(t)],["ID",t=>t.id.slice(0,8)+"â€¦",t=>t.id],["Game Mode",t=>a(t.roomData)]]}=e,{roomCreateOptions:h}=e;const u=new O(s),d=(h??[]).map((t=>[t,(0,o.CR)(`game/mp/_roomCreate/${i}/${t[0]}`,t[2])]));function m(){return d.length?Object.fromEntries(d.map((([t,e])=>[t[0],e.get()]))):null}let g=[],f=!1,p=!1;async function b(){n(4,f=!0);try{const t=await L();n(3,g=await t.listRooms(i))}catch(t){console.log(t),alert(t)}finally{n(4,f=!1)}}async function R(t){try{const e=await L(),n=await t(e);return b(),c(new A(n)),n}catch(t){return console.log(t),void alert(t)}}function L(){const t=u.connect();return n(5,p=!0),t}return b(),t.$$set=t=>{"gameId"in t&&n(11,s=t.gameId),"roomType"in t&&n(0,i=t.roomType),"joinData"in t&&n(1,r=t.joinData),"onJoinedRoom"in t&&n(12,c=t.onJoinedRoom),"formatGameMode"in t&&n(13,a=t.formatGameMode),"columns"in t&&n(2,l=t.columns),"roomCreateOptions"in t&&n(14,h=t.roomCreateOptions)},[i,r,l,g,f,p,d,m,function(){d.forEach((t=>t[1].set(t[0][2])))},b,R,s,c,a,h,t=>R((async e=>e.joinRoom(t.id,r))),()=>R((async t=>t.createJoinRoom((0,_.yF)(50),i,!0,m(),r)))]}class et extends s.f_{constructor(t){super(),(0,s.S1)(this,t,tt,Q,s.N8,{gameId:11,roomType:0,joinData:1,onJoinedRoom:12,formatGameMode:13,columns:2,roomCreateOptions:14})}}const nt=et},43:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m});var s=n(0);function o(t){let e,n,o,c,a,l,h,u;function d(t,e){return t[1]?r:i}let m=d(t),g=m(t);return{c(){e=(0,s.bG)("div"),g.c(),n=(0,s.Dh)(),o=(0,s.bG)("div"),c=(0,s.bG)("button"),c.textContent="Reset Score",a=(0,s.Dh)(),l=(0,s.bG)("button"),l.textContent="Disconnect",(0,s.Lj)(c,"class","btn btn-sm btn-warning"),(0,s.Lj)(l,"class","btn btn-sm btn-danger"),(0,s.Lj)(o,"class","btn-group"),(0,s.Lj)(e,"class","float-end")},m(i,r){(0,s.$T)(i,e,r),g.m(e,null),(0,s.R3)(e,n),(0,s.R3)(e,o),(0,s.R3)(o,c),(0,s.R3)(o,a),(0,s.R3)(o,l),h||(u=[(0,s.oL)(c,"click",(function(){(0,s.sB)(t[4])&&t[4].apply(this,arguments)})),(0,s.oL)(l,"click",(function(){(0,s.sB)(t[5])&&t[5].apply(this,arguments)}))],h=!0)},p(s,o){m===(m=d(t=s))&&g?g.p(t,o):(g.d(1),g=m(t),g&&(g.c(),g.m(e,n)))},d(t){t&&(0,s.og)(e),g.d(),h=!1,(0,s.j7)(u)}}}function i(t){let e,n,o;return{c(){e=(0,s.bG)("button"),e.textContent="Unspectate",(0,s.Lj)(e,"class","btn btn-sm btn-primary")},m(i,r){(0,s.$T)(i,e,r),n||(o=(0,s.oL)(e,"click",t[13]),n=!0)},p:s.ZT,d(t){t&&(0,s.og)(e),n=!1,o()}}}function r(t){let e,n,o,i,r=t[2]&&c(t);return{c(){r&&r.c(),e=(0,s.Dh)(),n=(0,s.bG)("button"),n.textContent="Spectate",(0,s.Lj)(n,"class","btn btn-sm btn-secondary")},m(c,a){r&&r.m(c,a),(0,s.$T)(c,e,a),(0,s.$T)(c,n,a),o||(i=(0,s.oL)(n,"click",t[12]),o=!0)},p(t,n){t[2]?r?r.p(t,n):(r=c(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){r&&r.d(t),t&&(0,s.og)(e),t&&(0,s.og)(n),o=!1,i()}}}function c(t){let e;function n(t,e){return t[3]?l:a}let o=n(t),i=o(t);return{c(){i.c(),e=(0,s.cS)()},m(t,n){i.m(t,n),(0,s.$T)(t,e,n)},p(t,s){o===(o=n(t))&&i?i.p(t,s):(i.d(1),i=o(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&(0,s.og)(e)}}}function a(t){let e,n,o;return{c(){e=(0,s.bG)("button"),e.textContent="Ready",(0,s.Lj)(e,"class","btn btn-sm btn-info")},m(i,r){(0,s.$T)(i,e,r),n||(o=(0,s.oL)(e,"click",t[11]),n=!0)},p:s.ZT,d(t){t&&(0,s.og)(e),n=!1,o()}}}function l(t){let e,n,o;return{c(){e=(0,s.bG)("button"),e.textContent="Unready",(0,s.Lj)(e,"class","btn btn-sm btn-success")},m(i,r){(0,s.$T)(i,e,r),n||(o=(0,s.oL)(e,"click",t[10]),n=!0)},p:s.ZT,d(t){t&&(0,s.og)(e),n=!1,o()}}}function h(t){let e,n,i,r,c,a,l,h,u,d,m,g,f,p=t[0]&&o(t);const b=t[9].default,R=(0,s.nu)(b,t,t[8],null);return{c(){e=(0,s.bG)("div"),e.innerHTML='<h4 class="alert-heading">Disconnected</h4>\n  Join or create a room above!',n=(0,s.Dh)(),i=(0,s.bG)("div"),i.innerHTML='<h4 class="alert-heading">Spectating</h4> \n  <span class="badge bg-primary">Unspectate</span> if you want to play!',r=(0,s.Dh)(),c=(0,s.bG)("div"),c.innerHTML='<h4 class="alert-heading">Unready</h4>\n  If all players are <span class="badge bg-info">Ready</span>, the intermission ends early.',a=(0,s.Dh)(),l=(0,s.bG)("div"),h=(0,s.bG)("div"),u=(0,s.bG)("h4"),u.textContent="Play",d=(0,s.Dh)(),p&&p.c(),m=(0,s.Dh)(),g=(0,s.bG)("div"),R&&R.c(),(0,s.Lj)(e,"class","alert alert-danger"),(0,s.Lj)(e,"role","alert"),(0,s.VH)(e,"d-none",t[0]),(0,s.Lj)(i,"class","alert alert-warning"),(0,s.Lj)(i,"role","alert"),(0,s.VH)(i,"d-none",!t[0]||t[1]),(0,s.Lj)(c,"class","alert alert-info"),(0,s.Lj)(c,"role","alert"),(0,s.VH)(c,"d-none",!t[0]||!t[1]||!t[2]||t[3]),(0,s.Lj)(u,"class","float-start"),(0,s.Lj)(h,"class","card-header"),(0,s.Lj)(g,"class","card-body"),(0,s.Lj)(l,"class","card mb-3")},m(t,o){(0,s.$T)(t,e,o),(0,s.$T)(t,n,o),(0,s.$T)(t,i,o),(0,s.$T)(t,r,o),(0,s.$T)(t,c,o),(0,s.$T)(t,a,o),(0,s.$T)(t,l,o),(0,s.R3)(l,h),(0,s.R3)(h,u),(0,s.R3)(h,d),p&&p.m(h,null),(0,s.R3)(l,m),(0,s.R3)(l,g),R&&R.m(g,null),f=!0},p(t,[n]){1&n&&(0,s.VH)(e,"d-none",t[0]),3&n&&(0,s.VH)(i,"d-none",!t[0]||t[1]),15&n&&(0,s.VH)(c,"d-none",!t[0]||!t[1]||!t[2]||t[3]),t[0]?p?p.p(t,n):(p=o(t),p.c(),p.m(h,null)):p&&(p.d(1),p=null),R&&R.p&&(!f||256&n)&&(0,s.Tj)(R,b,t,t[8],f?n:-1,null,null)},i(t){f||((0,s.Ui)(R,t),f=!0)},o(t){(0,s.et)(R,t),f=!1},d(t){t&&(0,s.og)(e),t&&(0,s.og)(n),t&&(0,s.og)(i),t&&(0,s.og)(r),t&&(0,s.og)(c),t&&(0,s.og)(a),t&&(0,s.og)(l),p&&p.d(),R&&R.d(t)}}}function u(t,e,n){let{$$slots:s={},$$scope:o}=e,{inGame:i=!1}=e,{isActive:r=!1}=e,{canReady:c=!1}=e,{isReady:a=!1}=e,{onReset:l}=e,{onDisconnect:h}=e,{onSetActive:u}=e,{onSetReady:d}=e;return t.$$set=t=>{"inGame"in t&&n(0,i=t.inGame),"isActive"in t&&n(1,r=t.isActive),"canReady"in t&&n(2,c=t.canReady),"isReady"in t&&n(3,a=t.isReady),"onReset"in t&&n(4,l=t.onReset),"onDisconnect"in t&&n(5,h=t.onDisconnect),"onSetActive"in t&&n(6,u=t.onSetActive),"onSetReady"in t&&n(7,d=t.onSetReady),"$$scope"in t&&n(8,o=t.$$scope)},[i,r,c,a,l,h,u,d,o,s,()=>d(!1),()=>d(!0),()=>u(!1),()=>u(!0)]}class d extends s.f_{constructor(t){super(),(0,s.S1)(this,t,u,h,s.N8,{inGame:0,isActive:1,canReady:2,isReady:3,onReset:4,onDisconnect:5,onSetActive:6,onSetReady:7})}}const m=d},47:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var s=n(0),o=n(38);function i(t){let e,n,o;return{c(){e=(0,s.bG)("div"),n=(0,s.bG)("div"),o=(0,s.fL)(t[1]),(0,s.Lj)(n,"class","progress-bar progress-bar-striped progress-bar-animated"),(0,s.cz)(n,"transition","none"),(0,s.cz)(n,"width",100*t[0]+"%"),(0,s.Lj)(e,"class","progress mb-2")},m(t,i){(0,s.$T)(t,e,i),(0,s.R3)(e,n),(0,s.R3)(n,o)},p(t,[e]){2&e&&(0,s.rT)(o,t[1]),1&e&&(0,s.cz)(n,"width",100*t[0]+"%")},i:s.ZT,o:s.ZT,d(t){t&&(0,s.og)(e)}}}function r(t,e,n){let{start:s=0}=e,{end:i=1}=e,{startTime:r=Date.now()}=e,{endTime:c=Date.now()+2e4}=e,a=0,l="0.0 s";return(0,o.H3)((()=>{let t;return function e(){t=requestAnimationFrame(e);const o=Date.now();n(0,a=s+(i-s)*Math.min(1,(o-r)/(c-r))),n(1,l=Math.max((c-o)/1e3,0).toFixed(1)+" s")}(),()=>cancelAnimationFrame(t)})),t.$$set=t=>{"start"in t&&n(2,s=t.start),"end"in t&&n(3,i=t.end),"startTime"in t&&n(4,r=t.startTime),"endTime"in t&&n(5,c=t.endTime)},[a,l,s,i,r,c]}class c extends s.f_{constructor(t){super(),(0,s.S1)(this,t,r,i,s.N8,{start:2,end:3,startTime:4,endTime:5})}}const a=c},44:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var s=n(6);class o{constructor(t=100){this.maxChatMessages=t,this.messages=(0,s.$_)([]),this.queueLength=(0,s.$_)(0),this.messageBuf=[],this.queue=[],this.hold=!1}clear(){this.messageBuf.splice(0),this.queue.splice(0,this.queue.length),this.queueLength.set(0),this.invalidate()}addEntry(t){const e=this.hold?this.queue:this.messageBuf;e.length>=this.maxChatMessages&&e.shift(),e.push(t),this.hold?this.queueLength.update((t=>t+1)):this.invalidate()}setHold(t){if(this.hold=t,!t&&this.queue.length){const t=Math.max(0,this.messageBuf.length+this.queue.length-this.maxChatMessages);t&&this.messageBuf.splice(0,t),this.messageBuf.push(...this.queue),this.queue.length=0,this.invalidate(),this.queueLength.set(0)}}playerJoined(t){this.addEntry({type:"join",name:t})}playerLeft(t){this.addEntry({type:"left",name:t})}playerReset(t){this.addEntry({type:"reset",name:t})}playerRename(t,e){this.addEntry({type:"rename",oldName:t,newName:e})}addChatMessage(t,e,n,s){this.addEntry({type:"chat",name:t,msg:e,flags:n,targetName:s})}addSysMessage(t){this.addEntry({type:"sys",msg:t})}invalidate(){this.messages.set(this.messageBuf)}}},451:(t,e,n)=>{"use strict";n.d(e,{T:()=>s});class s{constructor(){this.buf=[]}put(t){return this.buf.push(255&t),this}putInt(t){return t>-127&&t<128?this.put(t):t>=-32768&&t<32768?(this.put(128),this.put(t),this.put(t>>8)):(this.put(129),this.put(t),this.put(t>>8),this.put(t>>16),this.put(t>>24)),this}putBool(t){return this.put(t?1:0),this}putUint(t){return t<0||t>=1<<21?(this.put(128|127&t),this.put(128|t>>7&127),this.put(128|t>>14&127),this.put(t>>21)):t<128?this.put(t):t<16384?(this.put(128|127&t),this.put(t>>7)):(this.put(128|127&t),this.put(128|t>>7&127),this.put(t>>14)),this}putFloat64(t){const e=new Uint8Array(8);new DataView(e.buffer).setFloat64(0,t);for(let t=0;t<8;t++)this.put(e[t]);return this}putString(t){for(let e=0;e<t.length;e++){const n=t.charCodeAt(e),s=n>127?63:n;if(!s)break;this.put(s)}return this.put(0),this}toArray(){return new Uint8Array(this.buf)}}},19:(t,e,n)=>{"use strict";n.d(e,{R7:()=>a});var s=n(6);class o{constructor(t,e=t.length){this.buf=t,this.len=e,this.overread=!1,this.pos=0}get debugBuf(){return this.buf}get remaining(){return this.len-this.pos}get(){return this.pos===this.len?(this.overread=!0,0):this.buf[this.pos++]}getInt(){let t=this.get()<<24>>24;return-128===t?(t=this.get(),t|=this.get()<<24>>16):-127===t&&(t=this.get(),t|=this.get()<<8,t|=this.get()<<16,t|=this.get()<<24),t}getBool(){return!!this.get()}getUint(){let t=this.get();return 128&t&&(t^=this.get()<<7^128,16384&t&&(t^=this.get()<<14^16384),t&1<<21&&(t^=this.get()<<21^1<<21),t&1<<28&&(t|=3758096384)),t}getFloat64(){const t=new Uint8Array([this.get(),this.get(),this.get(),this.get(),this.get(),this.get(),this.get(),this.get()]);return new DataView(t.buffer).getFloat64(0)}getString(t){const e=[];for(;e.length<=t;){const n=this.get();if(!n||e.length===t)break;e.push(n>127?63:n)}return String.fromCharCode(...e)}}var i,r,c=n(451);class a{constructor(t){this.chat=t,this.inGame=(0,s.$_)(!1),this.isActive=(0,s.$_)(!1),this.pastGames=(0,s.$_)([]),this.clientsSorted=(0,s.$_)([]),this.myCn=-1,this.clients=new Map,this.playersSortProps=[],this.PROTOCOL_VERSION=0,setTimeout((()=>{const t=new o(new Uint8Array([0,1,2,3,4,5,6,7]));console.log("%cMultiplayer Game Bug Report Guide","font-family:helvetica; font-size:20px"),console.log("You're probably trying to debug a network error or file a bug report for it."),console.log("If you see an error like this, your report must contain the packet values:"),console.log("example",t.debugBuf,t),console.log("In the example above, you would have to submit at least [0, 1, 2, 3, 4, 5, 6, 7] (expand stuff as needed)")}),100)}static formatPlayerName(t,e){return t?`${t.name} (${t.cn})`:"<unknown>"+(void 0===e?"":` (${e})`)}filterName(t){return(t=t.replace(/[^a-zA-Z_ ]/,"").replace(/ {2,}/," ").trim().slice(0,20))||"unnamed"}enterGame(t,e){if(!(null==t?void 0:t.connected))return;this.room&&this.room.disconnect(),this.room=t,t.registerRecv((e=>{t===this.room&&this.processMessages(new o(e))})),t.registerDisc((()=>{t===this.room?(this.chat.addSysMessage("You disconnected."),this.inGame.set(!1)):this.chat.addSysMessage("You disconnected from the old room.")}));const n=new c.T;n.putInt(this.PROTOCOL_VERSION),n.putString(e),t.send(n.toArray()),this.inGame.set(!0),this.chat.addSysMessage("You are joining the game.")}leaveGame(){this.room&&this.room.disconnect()}sendReset(){var t;null===(t=this.room)||void 0===t||t.send((new c.T).putInt(r.RESET).toArray())}sendActive(t){var e;null===(e=this.room)||void 0===e||e.send((new c.T).putInt(r.ACTIVE).putBool(t).toArray())}sendChat(t,e,n=-1){this.room?this.room.send((new c.T).putInt(r.CHAT).putInt(e).putInt(n).putString(t.slice(0,100)).toArray()):this.chat.addSysMessage("cannot send chat message: not connected to game room")}processCommand(t){if(t.length>0&&"/"===t[0]){const[e,n]=t.slice(1).split(" ",2);let s=!1;switch(e){case"me":s=!0;case"say":n&&this.sendChat(n,0|(s?4:0));break;case"meteam":s=!0;case"sayteam":n&&this.sendChat(n,2|(s?4:0));break;case"mew":case"mewhisper":case"mepm":s=!1;case"w":case"whisper":case"pm":{if(!n)break;let e=-1,o=0;const i=/^(\d+)\s+/.exec(t);if(i){const t=i[1];e=+t,o=t.length}n.length>o&&this.sendChat(n.slice(o),1|(s?4:0),e);break}case"leave":case"disconnect":this.leaveGame();break;case"":case"help":switch(n){case"say":this.chat.addSysMessage("without / prefix, use shorthand prefixes: *?(@\\d+|%|) say (*me) @pm|%team|all");break;default:this.chat.addSysMessage("supported commands: say, me, sayteam, meteam, w, whisper, pm, mew, mewhisper, mepm, leave, disconnect, help")}break;default:this.chat.addSysMessage(`command not recognized: ${t}`)}}else{let e=0,n=-1,s=0;if(t.length>1&&"*"===t[0]&&(s++,e|=4),t.length>s)switch(t[s]){case"@":if(t.length>s+1){const o=/^(\d+)\s+/.exec(t.slice(s+1));if(o){const t=o[1];n=+t,s=s+1+t.length,e|=1}}break;case"%":e|=2,s++}t.length>s&&this.sendChat(t.slice(s),e,n)}}addHistory(t){this.pastGames.update((e=>[t,...e.slice(0,99)]))}clearHistory(){this.pastGames.set([])}processMessages(t){if(!this.room)return;let e;for(;t.remaining>0;){const n=t.getInt();if(!this.processMessage(n,t)){e="tag type";break}}t.overread&&(e="overread"),e&&(console.log(`neterr: ${e}`,t.debugBuf,t),this.room.disconnect())}processMessage(t,e){var n;switch(t){case i.RESET:{const t=e.getInt(),n=this.clients.get(t);n&&(this.playerResetStats(n),this.updatePlayers()),this.chat.playerReset(a.formatPlayerName(n));break}case i.WELCOME:{const t=e.getInt();t!==this.PROTOCOL_VERSION&&alert(`different protocol version (client: ${this.PROTOCOL_VERSION}, server: ${t})\nrefresh the page for updates?`),this.clients.clear(),this.isActive.set(!1),this.myCn=e.getInt(),this.processWelcomeMode(e);for(let t=0;t<129;t++){const t=e.getInt();if(t<0)break;const n=this.makePlayer();n.cn=t,n.active=e.getBool(),n.name=this.filterName(e.getString(20)),n.ping=e.getInt(),t===this.myCn&&(n.isMe=!0),this.processWelcomePlayer(e,n),this.addPlayer(n)}this.processWelcomeGame(e),this.updatePlayers();break}case i.JOIN:{const t=this.processJoin(e);this.updatePlayers(),this.chat.playerJoined(a.formatPlayerName(t));break}case i.LEAVE:{const t=e.getInt(),n=this.clients.get(t);n&&(n.active&&this.playerDeactivated(n),this.chat.playerLeft(a.formatPlayerName(n)),this.clients.delete(t),this.updatePlayers());break}case i.CHAT:{const t=e.getInt(),n=e.getInt(),s=e.getInt(),o=e.getString(100),i=this.clients.get(t),r=a.formatPlayerName(i,t),c=s<0?void 0:s===this.myCn?"you":a.formatPlayerName(this.clients.get(s),s);this.chat.addChatMessage(r,o,n,c);break}case i.ACTIVE:{const t=e.getInt(),n=e.getBool(),s=this.clients.get(t);s&&(s.active=n,t===this.myCn&&this.isActive.set(n),n?this.playerActivated(s):this.playerDeactivated(s),this.updatePlayers());break}case i.PING:null===(n=this.room)||void 0===n||n.send((new c.T).putInt(r.PONG).putInt(e.getInt()).toArray());break;case i.PING_TIME:for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const n=e.getInt(),s=this.clients.get(t);s&&(s.ping=n,this.updatePlayers(!0))}break;default:return this.processMessage2(t,e)}return!0}updatePlayers(t){if(t)return void this.clientsSorted.update((t=>t));const e=[...this.clients.values()].sort(((t,e)=>{for(const n of[t=>t.active,...this.playersSortProps]){const s=n(t),o=n(e);if(s<o)return 1;if(s>o)return-1}return t.cn-e.cn}));let n=1;e.forEach(((t,s)=>{if(s){const o=e[s-1];this.playersSortProps.some((e=>e(t)!==e(o)))&&(n=s+1)}e[s].rank=n})),this.clientsSorted.set(e)}addPlayer(t){this.clients.set(t.cn,t)}processJoin(t){const e=this.makePlayer();return e.cn=t.getInt(),e.name=this.filterName(t.getString(20)),this.addPlayer(e),e}}a.DEFAULT_PLAYER={cn:-1,name:"unnamed",active:!1,rank:0,ping:-1},function(t){t[t.WELCOME=0]="WELCOME",t[t.JOIN=1]="JOIN",t[t.LEAVE=2]="LEAVE",t[t.RESET=3]="RESET",t[t.RENAME=4]="RENAME",t[t.PING=5]="PING",t[t.PING_TIME=6]="PING_TIME",t[t.CHAT=7]="CHAT",t[t.ACTIVE=8]="ACTIVE",t[t.NUM=9]="NUM"}(i||(i={})),function(t){t[t.RESET=0]="RESET",t[t.RENAME=1]="RENAME",t[t.PONG=2]="PONG",t[t.CHAT=3]="CHAT",t[t.ACTIVE=4]="ACTIVE",t[t.NUM=5]="NUM"}(r||(r={}))},6:(t,e,n)=>{"use strict";n.d(e,{$_:()=>o,CR:()=>i});var s=n(7);function o(t,e){const{set:n,subscribe:o}=(0,s.fZ)(t,e);return{get:()=>t,set(e){n(t=e)},subscribe:o,update(e){n(t=e(t))}}}function i(t,e){const n=function(t,e){const n=o(e);return Object.assign(Object.assign({},n),{useLocalStorage:()=>{if(!window.localStorage)return;const e=localStorage.getItem(t);null!==e&&n.set("undefined"===e?void 0:JSON.parse(e)),n.subscribe((e=>{void 0===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e))}))}})}(t,e);return n.useLocalStorage(),n}},448:(t,e,n)=>{"use strict";function s(t){var e;new t({target:document.getElementById("app")}),null===(e=document.getElementById("appLoading"))||void 0===e||e.remove()}n.d(e,{Z:()=>s})}}]);