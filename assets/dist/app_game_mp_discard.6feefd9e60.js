(()=>{"use strict";var e,t={378:(e,t,n)=>{var s,o,r,a,l,i=n(0),c=n(39),d=n(40),g=n(41),u=n(42),f=n(43),h=n(28),m=n(44),p=n(46),b=n(6),T=n(451),$=n(19);!function(e){e[e.ROUND_WAIT=9]="ROUND_WAIT",e[e.ROUND_INTERM=10]="ROUND_INTERM",e[e.ROUND_START=11]="ROUND_START",e[e.READY=12]="READY",e[e.MOVE_CONFIRM=13]="MOVE_CONFIRM",e[e.END_ROUND=14]="END_ROUND",e[e.END_TURN=15]="END_TURN",e[e.NUM=16]="NUM"}(s||(s={})),function(e){e[e.READY=5]="READY",e[e.MOVE=6]="MOVE",e[e.MOVE_END=7]="MOVE_END",e[e.NUM=8]="NUM"}(o||(o={})),function(e){e[e.WAITING=0]="WAITING",e[e.INTERMISSION=1]="INTERMISSION",e[e.ACTIVE=2]="ACTIVE"}(r||(r={}));class R extends $.R7{constructor(){super(...arguments),this.isReady=(0,b.$_)(!1),this.inRound=(0,b.$_)(!1),this.roundState=(0,b.$_)(0),this.roundTimerStart=(0,b.$_)(0),this.roundTimerEnd=(0,b.$_)(0),this.roundPlayers=(0,b.$_)([]),this.roundPlayerQueue=(0,b.$_)([]),this.INTERMISSION_TIME=3e4,this.ROUND_TIME=2e4}sendReady(e){var t;null===(t=this.room)||void 0===t||t.send((new T.T).putInt(o.READY).putBool(e).toArray())}sendMoveEnd(){var e;null===(e=this.room)||void 0===e||e.send((new T.T).putInt(o.MOVE_END).toArray())}roundWait(){this.roundState.set(r.WAITING),this.unsetReady()}roundIntermission(e){this.roundState.set(r.INTERMISSION),this.setTimer(e),this.unsetReady(),this.isReady.set(!1)}roundStart(e){this.roundState.set(r.ACTIVE),this.setTimer(e),this.unsetReady()}roundSetPlayers(e){this.roundPlayers.set(e)}roundSetPlayerQueue(e){this.roundPlayerQueue.set(e)}setTimer(e){this.roundTimerStart.set(Date.now()),this.roundTimerEnd.set(Date.now()+e)}processWelcomeGame(e){const t=e.getInt();if(0===t)this.roundWait();else if(1===t){this.roundIntermission(e.getInt());for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const n=this.clients.get(t);n&&(n.ready=!0)}}else 2===t&&this.roundStart(e.getInt());const n=[];for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const s=this.clients.get(t);s&&(s.inRound=!0,n.push(s))}this.roundSetPlayers(n);const s=[];for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const n=this.clients.get(t);n&&s.push(n)}this.roundSetPlayerQueue(s),this.processWelcomeGame2(e)}processWelcomeGame2(e){}playerActivated(e){this.roundPlayerQueue.update((t=>[...t,e]))}playerDeactivated(e){this.roundPlayers.update((t=>t.filter((t=>t!==e)))),this.roundPlayerQueue.update((t=>t.filter((t=>t!==e)))),e.inRound=!1,e.isMe&&this.inRound.set(!1)}processMessage2(e,t){var n,o;switch(e){case s.ROUND_WAIT:this.roundWait();break;case s.ROUND_INTERM:this.roundIntermission(this.INTERMISSION_TIME);break;case s.ROUND_START:{const e=[];for(const e of this.clients.values())e.inRound=!1;for(let n=0;n<=this.clients.size;n++){const n=t.getInt();if(n<0)break;const s=this.clients.get(n);s&&(s.inRound=!0,e.push(s))}this.inRound.set(null!==(o=null===(n=this.clients.get(this.myCn))||void 0===n?void 0:n.inRound)&&void 0!==o&&o),this.roundSetPlayers(e),this.roundSetPlayerQueue([]),this.roundStart(this.ROUND_TIME),this.processRoundStart(t);break}case s.READY:{const e=t.getInt(),n=t.getBool(),s=this.clients.get(e);s&&(s.ready=n,e===this.myCn&&this.isReady.set(n),this.updatePlayers(!0),this.roundPlayers.update((e=>e)),this.roundPlayerQueue.update((e=>e)));break}case s.MOVE_CONFIRM:this.processMoveConfirm(t);break;case s.END_TURN:this.processEndTurn(t);break;case s.END_ROUND:this.processEndRound(t);break;default:return this.processMessage3(e,t)}return!0}processRoundStart(e){}processMessage3(e,t){return!1}unsetReady(){for(const e of this.clients.values())e.ready=!1}}R.DEFAULT_PLAYER=Object.assign(Object.assign({},$.R7.DEFAULT_PLAYER),{ready:!1,inRound:!1}),function(e){e[e.PLAYER_ELIMINATE=16]="PLAYER_ELIMINATE",e[e.PLAYER_PRIVATE_INFO=17]="PLAYER_PRIVATE_INFO",e[e.NUM=18]="NUM"}(a||(a={})),function(e){e[e.NUM=8]="NUM"}(l||(l={}));class L extends R{constructor(){super(...arguments),this.playerInfo=(0,b.$_)([]),this.playerDiscInfo=(0,b.$_)([])}getClientFromPlayer(e){return e&&this.clients.get(e.owner)}getNameFromPlayer(e,t){return e?$.R7.formatPlayerName(this.getClientFromPlayer(e),e.owner):`<unknown${void 0===t?"":" pn#"+t}>`}playerIsMe(e){var t;return!!(null===(t=this.getClientFromPlayer(e))||void 0===t?void 0:t.isMe)}getPlayerInfo(e){const t=this.playerInfo.get();return 0<=e&&e<=t.length?t[e]:void 0}updatePlayerInfo(){this.playerInfo.update((e=>e))}processRoundStart(e){const t=[];for(let n=0;n<=this.clients.size;n++){const n=e.getInt();if(n<0)break;const s=this.makePlayerInfo();s.owner=n,t.push(s)}this.playerInfo.set(t),this.playerDiscInfo.set([]),this.processRoundStartInfo(e)}processWelcomeGame2(e){this.processPlayerInfos(e),this.processDiscInfos(e),this.processRoundInfo(e)}processEndTurn(e){var t;this.setTimer(null!==(t=this.processEndTurn2(e))&&void 0!==t?t:this.ROUND_TIME),this.playerInfo.update((e=>{const t=e.shift();return t&&e.push(t),e}))}processMessage3(e,t){var n;switch(e){case a.PLAYER_ELIMINATE:{const e=t.getInt(),s=this.getPlayerInfo(e);if(!s){null===(n=this.room)||void 0===n||n.disconnect();break}const o=this.makeDiscInfo(),r=this.clients.get(s.owner);o.ownerName=$.R7.formatPlayerName(r,s.owner);const a=this.processEliminate(t,o,s);this.playerInfo.update((t=>(t.splice(e,1),t))),a||this.playerDiscInfo.update((e=>[...e,o]));break}case a.PLAYER_PRIVATE_INFO:this.processPrivateInfo(t);break;default:return!1}return!0}processPlayerInfos(e){const t=[];for(let n=0;n<=this.clients.size;n++){const n=e.getInt();if(n<0)break;const s=this.makePlayerInfo();s.owner=n,this.processPlayerInfo(e,s),t.push(s)}this.playerInfo.set(t)}processDiscInfos(e){const t=[];for(let n=0;n<=this.clients.size;n++){const n=e.getString(32);if(!n)break;const s=this.makeDiscInfo();s.ownerName=n,this.processDiscInfo(e,s),t.push(s)}this.playerDiscInfo.set(t)}}L.DEFAULT_PLAYER=R.DEFAULT_PLAYER,L.DEFAULT_PLAYER_INFO={owner:-1},L.DEFAULT_DISC_INFO={ownerName:""};class y extends L{constructor(){super(...arguments),this.modeDeck=(0,b.$_)(0),this.myHand=(0,b.$_)(0),this.myAltMove=(0,b.$_)(0),this.deckSize=(0,b.$_)(0),this.cardCountDiscard=(0,b.$_)([0,0,0,0,0,0,0,0,0]),this.cardCountRemain=(0,b.$_)([0,0,0,0,0,0,0,0,0]),this.cardCountTotal=(0,b.$_)([0,0,0,0,0,0,0,0,0]),this.moveHistory=(0,b.$_)([]),this.pendingMoveUseHand=(0,b.$_)(!1),this.pendingMoveTarget=(0,b.$_)(0),this.pendingMoveGuess=(0,b.$_)(0),this.playersSortProps=[e=>e.score,e=>e.wins,e=>e.streak]}sendMove(e,t,n){var s;null===(s=this.room)||void 0===s||s.send((new T.T).putInt(o.MOVE).putBool(e).putInt(t).putInt(n).toArray())}sendMoveUseHand(e){this.sendMove(e,this.pendingMoveTarget.get(),this.pendingMoveGuess.get())}sendMoveTarget(e){this.sendMove(this.pendingMoveUseHand.get(),e,this.pendingMoveGuess.get())}sendMoveGuess(e){this.sendMove(this.pendingMoveUseHand.get(),this.pendingMoveTarget.get(),e)}processMoveConfirm(e){this.pendingMoveUseHand.set(e.getBool()),this.pendingMoveTarget.set(e.getInt()),this.pendingMoveGuess.set(e.getInt())}processPrivateInfo(e){const t=e.getInt();switch(t){case-1:this.myHand.set(e.getInt());break;case 0:this.myAltMove.set(e.getInt());break;case 2:case 3:case 6:{const n=e.getInt(),s=e.getInt(),o=this.getPlayerInfo(n),r=this.getNameFromPlayer(o,n);switch(t){case 2:o&&(o.hand=s,this.updatePlayerInfo()),this.moveHistory.update((e=>[...e,{type:"reveal",name:r,hand:s}]));break;case 3:{const e=this.myHand.get();o&&(o.hand=s,this.updatePlayerInfo()),this.moveHistory.update((t=>[...t,{type:"cmp",ours:e,theirs:s,name:r}]));break}case 6:{const e=this.myHand.get();this.moveHistory.update((t=>[...t,{type:"trade",oldHand:e,newHand:s,name:r}])),o&&(o.hand=e,this.updatePlayerInfo()),this.myHand.set(s);break}}break}}}processRoundStartInfo(e){this.deckSize.set(Math.max(0,15*this.modeDeck.get()-this.playerInfo.get().length-1)),this.cardCountDiscard.set([0,0,0,0,0,0,0,0,0]),this.cardCountRemain.set(k(this.modeDeck.get())),this.cardCountTotal.set(k(this.modeDeck.get())),this.moveHistory.set([])}processRoundInfo(e){this.deckSize.set(e.getInt());const t=[e.getInt(),e.getInt(),e.getInt(),e.getInt(),e.getInt(),e.getInt(),e.getInt(),e.getInt(),0];t[8]=(0,p.Sm)(t.slice(0,8));const n=k(this.modeDeck.get());this.cardCountDiscard.set(t),this.cardCountRemain.set(n.map(((e,n)=>e-t[n]))),this.cardCountTotal.set(n),this.moveHistory.set([])}processPlayerInfo(e,t){const n=Math.min(e.getInt(),45);t.discarded=Array(n).fill(void 0).map((()=>e.getInt())),t.immune=e.getBool(),t.discardSum=(0,p.Sm)(t.discarded)}processDiscInfo(e,t){const n=Math.min(e.getInt(),45);t.discarded=Array(n).fill(void 0).map((()=>e.getInt())),t.discardSum=(0,p.Sm)(t.discarded)}processEliminate(e,t,n){const s=e.getInt();t.discarded=[...n.discarded,s],t.discardSum=n.discardSum+s,this.updateDiscardCount(s);const o=this.clients.get(n.owner);if(o){const e=this.playerInfo.get().length;I(o,e,e+this.playerDiscInfo.get().length)}return!1}processEndTurn2(e){var t;const n=this.getPlayerInfo(0);if(!n)return;const s=e.getInt(),o=e.getInt(),r=this.clients.get(n.owner),a=this.getPlayerInfo(o),l={type:"move",playerName:$.R7.formatPlayerName(r,n.owner),playerIsMe:null!==(t=null==r?void 0:r.isMe)&&void 0!==t&&t,move:s,targetName:a?$.R7.formatPlayerName(this.clients.get(a.owner),o):"nobody",targetIsMe:this.playerIsMe(a),targetIsPlayer:a===n,targetValid:!!a};switch((null==r?void 0:r.isMe)&&s===this.myHand.get()&&this.myHand.set(this.myAltMove.get()),n.hand===s&&(n.hand=void 0),8!==s&&(n.discarded.push(s),n.discardSum+=s,this.updateDiscardCount(s)),s){case 1:{const t=e.getInt(),n=e.getBool();l.info=n?-t:t;break}case 2:break;case 3:if(o>0){const t=e.getInt();l.info=t,t?-7===t&&a?a.hand=8:7===t&&(n.hand=8):a&&a.hand!==n.hand&&(void 0===a.hand?a.hand=n.hand:void 0===n.hand&&(n.hand=a.hand))}break;case 4:n.immune=!0;break;case 5:{const t=e.getInt();l.info=t,8!==t?(n.discarded.push(t),n.discardSum+=t,this.updateDiscardCount(t),this.deckSize.update((e=>e-1))):n.hand=void 0;break}case 6:if(a&&!this.playerIsMe(n)&&!this.playerIsMe(a)){const e=a.hand;a.hand=n.hand,n.hand=e}}this.deckSize.update((e=>e>1?e-1:e)),this.moveHistory.update((e=>[...e,l]));const i=this.getPlayerInfo(1);i&&(i.immune=!1)}processEndRound(e){var t;const n=this.playerInfo.get();for(const t of n)t.hand=e.getInt();const s=this.playerDiscInfo.get().map((e=>Object.assign(Object.assign({},e),{name:e.ownerName})));s.reverse();const o={survived:[],eliminated:s},r=n.length+this.playerDiscInfo.get().length,a=[...n].sort(v);let l=1;for(let e=0;e<a.length;e++){const n=a[e];e&&v(n,a[e-1])&&(l=e+1);const s=this.clients.get(n.owner);o.survived.push({name:$.R7.formatPlayerName(s,n.owner),hand:null!==(t=n.hand)&&void 0!==t?t:0,rank:l,discarded:n.discarded,discardSum:n.discardSum}),s&&I(s,l,r)}this.addHistory(o)}processWelcomeMode(e){this.modeDeck.set((0,p.uZ)(e.getInt(),1,3))}processWelcomePlayer(e,t){t.score=e.getInt(),t.streak=e.getInt(),t.wins=e.getInt(),t.losses=e.getInt(),t.rankLast=e.getInt(),t.rankBest=e.getInt(),t.rankWorst=e.getInt()}playerResetStats(e){e.score=0,e.streak=0,e.wins=0,e.losses=0,e.rankLast=0,e.rankBest=0,e.rankWorst=0}makePlayer(){return Object.assign(Object.assign({},L.DEFAULT_PLAYER),{score:0,streak:0,wins:0,losses:0,rankLast:0,rankBest:0,rankWorst:0})}makePlayerInfo(){return Object.assign(Object.assign({},L.DEFAULT_PLAYER_INFO),{discarded:[],discardSum:0,immune:!1})}makeDiscInfo(){return Object.assign(Object.assign({},L.DEFAULT_DISC_INFO),{discarded:[],discardSum:0})}updateDiscardCount(e){e--,this.cardCountDiscard.update((t=>(t[e]++,t[8]++,t))),this.cardCountRemain.update((t=>(t[e]--,t[8]--,t)))}}function v(e,t){var n,s;const o=null!==(n=e.hand)&&void 0!==n?n:0;return(null!==(s=t.hand)&&void 0!==s?s:0)-o||t.discardSum-e.discardSum}function I(e,t,n){e.rankLast=t,e.rankLast=t,e.rankBest=Math.min(e.rankBest||t,t),e.rankWorst=Math.max(e.rankWorst,t),e.score+=n-t+1,1===t?(e.streak<0&&(e.streak=0),e.streak++,e.wins++):(e.streak>0&&(e.streak=0),e.streak--,e.losses++)}const D=[5,2,2,2,2,1,1,1,15];function k(e){return D.map((t=>t*e))}function M(e,t,n){const s=e.slice();return s[2]=t[n],s}function G(e,t,n){const s=e.slice();return s[5]=t[n],s}function w(e,t,n){const s=e.slice();return s[8]=t[n],s}function j(e){let t,n,s=e[8]+"";return{c(){t=(0,i.bG)("th"),n=(0,i.fL)(s),(0,i.Lj)(t,"scope","col")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){1&t&&s!==(s=e[8]+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function N(e){let t,n,s=e[5]+"";return{c(){t=(0,i.bG)("td"),n=(0,i.fL)(s)},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){2&t&&s!==(s=e[5]+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function S(e){let t,n,s,o,r,a=e[2][0]+"",l=e[2][1],c=[];for(let t=0;t<l.length;t+=1)c[t]=N(G(e,l,t));return{c(){t=(0,i.bG)("tr"),n=(0,i.bG)("th"),s=(0,i.fL)(a),o=(0,i.Dh)();for(let e=0;e<c.length;e+=1)c[e].c();r=(0,i.Dh)(),(0,i.Lj)(n,"scope","row")},m(e,a){(0,i.$T)(e,t,a),(0,i.R3)(t,n),(0,i.R3)(n,s),(0,i.R3)(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);(0,i.R3)(t,r)},p(e,n){if(2&n&&a!==(a=e[2][0]+"")&&(0,i.rT)(s,a),2&n){let s;for(l=e[2][1],s=0;s<l.length;s+=1){const o=G(e,l,s);c[s]?c[s].p(o,n):(c[s]=N(o),c[s].c(),c[s].m(t,r))}for(;s<c.length;s+=1)c[s].d(1);c.length=l.length}},d(e){e&&(0,i.og)(t),(0,i.RM)(c,e)}}}function E(e){let t,n,s,o,r,a,l,c,d=e[0],g=[];for(let t=0;t<d.length;t+=1)g[t]=j(w(e,d,t));let u=e[1],f=[];for(let t=0;t<u.length;t+=1)f[t]=S(M(e,u,t));return{c(){t=(0,i.bG)("div"),n=(0,i.bG)("table"),s=(0,i.bG)("thead"),o=(0,i.bG)("tr"),r=(0,i.bG)("th"),a=(0,i.Dh)();for(let e=0;e<g.length;e+=1)g[e].c();l=(0,i.Dh)(),c=(0,i.bG)("tbody");for(let e=0;e<f.length;e+=1)f[e].c();(0,i.Lj)(n,"class","table table-sm"),(0,i.Lj)(t,"class","table-responsive")},m(e,d){(0,i.$T)(e,t,d),(0,i.R3)(t,n),(0,i.R3)(n,s),(0,i.R3)(s,o),(0,i.R3)(o,r),(0,i.R3)(o,a);for(let e=0;e<g.length;e+=1)g[e].m(o,null);(0,i.R3)(n,l),(0,i.R3)(n,c);for(let e=0;e<f.length;e+=1)f[e].m(c,null)},p(e,[t]){if(1&t){let n;for(d=e[0],n=0;n<d.length;n+=1){const s=w(e,d,n);g[n]?g[n].p(s,t):(g[n]=j(s),g[n].c(),g[n].m(o,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}if(2&t){let n;for(u=e[1],n=0;n<u.length;n+=1){const s=M(e,u,n);f[n]?f[n].p(s,t):(f[n]=S(s),f[n].c(),f[n].m(c,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}},i:i.ZT,o:i.ZT,d(e){e&&(0,i.og)(t),(0,i.RM)(g,e),(0,i.RM)(f,e)}}}function P(e,t,n){let{ranks:s}=t,{counts:o}=t;return e.$$set=e=>{"ranks"in e&&n(0,s=e.ranks),"counts"in e&&n(1,o=e.counts)},[s,o]}class _ extends i.f_{constructor(e){super(),(0,i.S1)(this,e,P,E,i.N8,{ranks:0,counts:1})}}const C=_;var A=n(47);function O(e,t,n){const s=e.slice();return s[2]=t[n],s}function U(e,t,n){const s=e.slice();return s[5]=t[n],s}function F(e){let t;return{c(){t=(0,i.fL)("nobody")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function x(e){let t,n,s,o,r,a,l=e[5].name+"",c=e[5].cn+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(l),s=(0,i.fL)(" ("),o=(0,i.fL)(c),r=(0,i.fL)(")"),(0,i.Lj)(t,"class",a="badge bg-"+(e[5].ready?"info":"primary")+" me-1")},m(e,a){(0,i.$T)(e,t,a),(0,i.R3)(t,n),(0,i.R3)(t,s),(0,i.R3)(t,o),(0,i.R3)(t,r)},p(e,s){1&s&&l!==(l=e[5].name+"")&&(0,i.rT)(n,l),1&s&&c!==(c=e[5].cn+"")&&(0,i.rT)(o,c),1&s&&a!==(a="badge bg-"+(e[5].ready?"info":"primary")+" me-1")&&(0,i.Lj)(t,"class",a)},d(e){e&&(0,i.og)(t)}}}function H(e){let t;return{c(){t=(0,i.fL)("nobody")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function V(e){let t,n,s,o,r,a,l=e[2].name+"",c=e[2].cn+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(l),s=(0,i.fL)(" ("),o=(0,i.fL)(c),r=(0,i.fL)(")"),(0,i.Lj)(t,"class",a="badge bg-"+(e[2].ready?"info":"secondary")+" me-1")},m(e,a){(0,i.$T)(e,t,a),(0,i.R3)(t,n),(0,i.R3)(t,s),(0,i.R3)(t,o),(0,i.R3)(t,r)},p(e,s){2&s&&l!==(l=e[2].name+"")&&(0,i.rT)(n,l),2&s&&c!==(c=e[2].cn+"")&&(0,i.rT)(o,c),2&s&&a!==(a="badge bg-"+(e[2].ready?"info":"secondary")+" me-1")&&(0,i.Lj)(t,"class",a)},d(e){e&&(0,i.og)(t)}}}function Y(e){let t,n,s,o,r,a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=x(U(e,a,t));let c=null;a.length||(c=F());let d=e[1],g=[];for(let t=0;t<d.length;t+=1)g[t]=V(O(e,d,t));let u=null;return d.length||(u=H()),{c(){t=(0,i.bG)("div"),n=(0,i.fL)("In game:\n  ");for(let e=0;e<l.length;e+=1)l[e].c();c&&c.c(),s=(0,i.Dh)(),o=(0,i.bG)("div"),r=(0,i.fL)("Queue:\n  ");for(let e=0;e<g.length;e+=1)g[e].c();u&&u.c()},m(e,a){(0,i.$T)(e,t,a),(0,i.R3)(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);c&&c.m(t,null),(0,i.$T)(e,s,a),(0,i.$T)(e,o,a),(0,i.R3)(o,r);for(let e=0;e<g.length;e+=1)g[e].m(o,null);u&&u.m(o,null)},p(e,[n]){if(1&n){let s;for(a=e[0],s=0;s<a.length;s+=1){const o=U(e,a,s);l[s]?l[s].p(o,n):(l[s]=x(o),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=a.length,a.length?c&&(c.d(1),c=null):c||(c=F(),c.c(),c.m(t,null))}if(2&n){let t;for(d=e[1],t=0;t<d.length;t+=1){const s=O(e,d,t);g[t]?g[t].p(s,n):(g[t]=V(s),g[t].c(),g[t].m(o,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=d.length,d.length?u&&(u.d(1),u=null):u||(u=H(),u.c(),u.m(o,null))}},i:i.ZT,o:i.ZT,d(e){e&&(0,i.og)(t),(0,i.RM)(l,e),c&&c.d(),e&&(0,i.og)(s),e&&(0,i.og)(o),(0,i.RM)(g,e),u&&u.d()}}}function Z(e,t,n){let{inGame:s}=t,{inQueue:o}=t;return e.$$set=e=>{"inGame"in e&&n(0,s=e.inGame),"inQueue"in e&&n(1,o=e.inQueue)},[s,o]}class W extends i.f_{constructor(e){super(),(0,i.S1)(this,e,Z,Y,i.N8,{inGame:0,inQueue:1})}}const B=W,Q=[["optDecks","i",1,"Decks","number of decks to use",1,3]];function z(e){return 1===e?"1 deck":e+" decks"}function J(e){return e?"primary":"secondary"}function q(e,t,n){const s=e.slice();return s[2]=t[n],s}function K(e){let t,n,s,o=e[2]+"";return{c(){t=(0,i.fL)("[unknown move "),n=(0,i.fL)(o),s=(0,i.fL)("]")},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),(0,i.$T)(e,s,o)},p(e,t){1&t&&o!==(o=e[2]+"")&&(0,i.rT)(n,o)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s)}}}function X(e){let t,n,s,o,r,a,l,c,d,g=e[2].name+"",u=e[2].newHand+"",f=e[2].oldHand+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(g),s=(0,i.fL)("\n    gives you "),o=(0,i.bG)("span"),r=(0,i.fL)(u),a=(0,i.fL)("\n    for your "),l=(0,i.bG)("span"),c=(0,i.fL)(f),d=(0,i.fL)("."),(0,i.Lj)(t,"class","badge bg-secondary"),(0,i.Lj)(o,"class","badge bg-dark"),(0,i.Lj)(l,"class","badge bg-light")},m(e,g){(0,i.$T)(e,t,g),(0,i.R3)(t,n),(0,i.$T)(e,s,g),(0,i.$T)(e,o,g),(0,i.R3)(o,r),(0,i.$T)(e,a,g),(0,i.$T)(e,l,g),(0,i.R3)(l,c),(0,i.$T)(e,d,g)},p(e,t){1&t&&g!==(g=e[2].name+"")&&(0,i.rT)(n,g),1&t&&u!==(u=e[2].newHand+"")&&(0,i.rT)(r,u),1&t&&f!==(f=e[2].oldHand+"")&&(0,i.rT)(c,f)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(a),e&&(0,i.og)(l),e&&(0,i.og)(d)}}}function ee(e){let t,n,s,o,r,a,l,c,d,g,u=Ze(e[2].ours,e[1])+"",f=e[2].name+"",h=Ze(e[2].theirs,e[1])+"";return{c(){t=(0,i.fL)("You have "),n=(0,i.bG)("span"),s=(0,i.fL)(u),o=(0,i.fL)(";\n    "),r=(0,i.bG)("span"),a=(0,i.fL)(f),l=(0,i.fL)(" has "),c=(0,i.bG)("span"),d=(0,i.fL)(h),g=(0,i.fL)("."),(0,i.Lj)(n,"class","badge bg-dark"),(0,i.Lj)(r,"class","badge bg-secondary"),(0,i.Lj)(c,"class","badge bg-light")},m(e,u){(0,i.$T)(e,t,u),(0,i.$T)(e,n,u),(0,i.R3)(n,s),(0,i.$T)(e,o,u),(0,i.$T)(e,r,u),(0,i.R3)(r,a),(0,i.$T)(e,l,u),(0,i.$T)(e,c,u),(0,i.R3)(c,d),(0,i.$T)(e,g,u)},p(e,t){3&t&&u!==(u=Ze(e[2].ours,e[1])+"")&&(0,i.rT)(s,u),1&t&&f!==(f=e[2].name+"")&&(0,i.rT)(a,f),3&t&&h!==(h=Ze(e[2].theirs,e[1])+"")&&(0,i.rT)(d,h)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(o),e&&(0,i.og)(r),e&&(0,i.og)(l),e&&(0,i.og)(c),e&&(0,i.og)(g)}}}function te(e){let t,n,s,o,r,a,l=e[2].name+"",c=Ze(e[2].hand,e[1])+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(l),s=(0,i.fL)(" has "),o=(0,i.bG)("span"),r=(0,i.fL)(c),a=(0,i.fL)("!"),(0,i.Lj)(t,"class","badge bg-secondary"),(0,i.Lj)(o,"class","badge bg-light")},m(e,l){(0,i.$T)(e,t,l),(0,i.R3)(t,n),(0,i.$T)(e,s,l),(0,i.$T)(e,o,l),(0,i.R3)(o,r),(0,i.$T)(e,a,l)},p(e,t){1&t&&l!==(l=e[2].name+"")&&(0,i.rT)(n,l),3&t&&c!==(c=Ze(e[2].hand,e[1])+"")&&(0,i.rT)(r,c)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(a)}}}function ne(e){let t,n,s,o,r,a,l,c,d,g=e[2].playerName+"",u=Ze(e[2].move,e[1])+"",f=4!==e[2].move&&e[2].move<7&&se(e);function h(e,t){return 1===e[2].move&&e[2].targetValid?fe:2===e[2].move&&e[2].targetValid?ue:3===e[2].move&&e[2].targetValid?ge:4===e[2].move?de:5===e[2].move?ce:6===e[2].move&&e[2].targetValid?ie:7===e[2].move?le:8===e[2].move?ae:void 0}let m=h(e),p=m&&m(e);return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(g),o=(0,i.fL)(" uses "),r=(0,i.bG)("span"),a=(0,i.fL)(u),l=(0,i.Dh)(),f&&f.c(),c=(0,i.Dh)(),p&&p.c(),d=(0,i.cS)(),(0,i.Lj)(t,"class",s="badge bg-"+J(e[2].playerIsMe)),(0,i.Lj)(r,"class","badge bg-light")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n),(0,i.$T)(e,o,s),(0,i.$T)(e,r,s),(0,i.R3)(r,a),(0,i.$T)(e,l,s),f&&f.m(e,s),(0,i.$T)(e,c,s),p&&p.m(e,s),(0,i.$T)(e,d,s)},p(e,o){1&o&&g!==(g=e[2].playerName+"")&&(0,i.rT)(n,g),1&o&&s!==(s="badge bg-"+J(e[2].playerIsMe))&&(0,i.Lj)(t,"class",s),3&o&&u!==(u=Ze(e[2].move,e[1])+"")&&(0,i.rT)(a,u),4!==e[2].move&&e[2].move<7?f?f.p(e,o):(f=se(e),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null),m===(m=h(e))&&p?p.p(e,o):(p&&p.d(1),p=m&&m(e),p&&(p.c(),p.m(d.parentNode,d)))},d(e){e&&(0,i.og)(t),e&&(0,i.og)(o),e&&(0,i.og)(r),e&&(0,i.og)(l),f&&f.d(e),e&&(0,i.og)(c),p&&p.d(e),e&&(0,i.og)(d)}}}function se(e){let t,n;function s(e,t){return e[2].targetIsPlayer?re:oe}let o=s(e),r=o(e);return{c(){t=(0,i.fL)("on\n      "),r.c(),n=(0,i.cS)()},m(e,s){(0,i.$T)(e,t,s),r.m(e,s),(0,i.$T)(e,n,s)},p(e,t){o===(o=s(e))&&r?r.p(e,t):(r.d(1),r=o(e),r&&(r.c(),r.m(n.parentNode,n)))},d(e){e&&(0,i.og)(t),r.d(e),e&&(0,i.og)(n)}}}function oe(e){let t,n,s,o=e[2].targetName+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(o),(0,i.Lj)(t,"class",s="badge bg-"+J(e[2].targetIsMe))},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,r){1&r&&o!==(o=e[2].targetName+"")&&(0,i.rT)(n,o),1&r&&s!==(s="badge bg-"+J(e[2].targetIsMe))&&(0,i.Lj)(t,"class",s)},d(e){e&&(0,i.og)(t)}}}function re(e){let t;return{c(){t=(0,i.bG)("span"),t.textContent="self",(0,i.Lj)(t,"class","badge bg-dark")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function ae(e){let t;return{c(){t=(0,i.fL)("and lost‽")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function le(e){let t;return{c(){t=(0,i.fL)("for no effect.")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function ie(e){let t;return{c(){t=(0,i.fL)("to trade hands.")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function ce(e){let t,n,s,o,r,a=Ze(e[2].info,e[1])+"",l=8===e[2].info?"!":" and draws.";return{c(){t=(0,i.fL)("who destroys "),n=(0,i.bG)("span"),s=(0,i.fL)(a),r=(0,i.fL)(l),(0,i.Lj)(n,"class",o="badge bg-"+(8===e[2].info?"danger":"warning"))},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),(0,i.R3)(n,s),(0,i.$T)(e,r,o)},p(e,t){3&t&&a!==(a=Ze(e[2].info,e[1])+"")&&(0,i.rT)(s,a),1&t&&o!==(o="badge bg-"+(8===e[2].info?"danger":"warning"))&&(0,i.Lj)(n,"class",o),1&t&&l!==(l=8===e[2].info?"!":" and draws.")&&(0,i.rT)(r,l)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(r)}}}function de(e){let t,n,s;return{c(){t=(0,i.fL)("to become "),n=(0,i.bG)("span"),n.textContent="IMMUNE",s=(0,i.fL)("!"),(0,i.Lj)(n,"class","badge bg-info")},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),(0,i.$T)(e,s,o)},p:i.ZT,d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s)}}}function ge(e){let t;function n(e,t){return e[2].info?me:he}let s=n(e),o=s(e);return{c(){o.c(),t=(0,i.cS)()},m(e,n){o.m(e,n),(0,i.$T)(e,t,n)},p(e,r){s===(s=n(e))&&o?o.p(e,r):(o.d(1),o=s(e),o&&(o.c(),o.m(t.parentNode,t)))},d(e){o.d(e),e&&(0,i.og)(t)}}}function ue(e){let t;return{c(){t=(0,i.fL)("to see the hand.")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function fe(e){let t,n,s,o,r,a,l,c=e[2].info<0?"":"no",d=Ze(Math.abs(e[2].info),e[1])+"",g=e[2].info<0?"!":".";return{c(){t=(0,i.fL)("who has "),n=(0,i.fL)(c),s=(0,i.Dh)(),o=(0,i.bG)("span"),r=(0,i.fL)(d),l=(0,i.fL)(g),(0,i.Lj)(o,"class",a="badge bg-"+(e[2].info<0?"danger":"warning"))},m(e,a){(0,i.$T)(e,t,a),(0,i.$T)(e,n,a),(0,i.$T)(e,s,a),(0,i.$T)(e,o,a),(0,i.R3)(o,r),(0,i.$T)(e,l,a)},p(e,t){1&t&&c!==(c=e[2].info<0?"":"no")&&(0,i.rT)(n,c),3&t&&d!==(d=Ze(Math.abs(e[2].info),e[1])+"")&&(0,i.rT)(r,d),1&t&&a!==(a="badge bg-"+(e[2].info<0?"danger":"warning"))&&(0,i.Lj)(o,"class",a),1&t&&g!==(g=e[2].info<0?"!":".")&&(0,i.rT)(l,g)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(l)}}}function he(e){let t;return{c(){t=(0,i.fL)("and matches hands!")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,d(e){e&&(0,i.og)(t)}}}function me(e){let t,n,s,o,r,a,l=e[2].info<0?"loses with":"beats",c=Ze(Math.abs(e[2].info),e[1])+"";return{c(){t=(0,i.fL)("and "),n=(0,i.fL)(l),s=(0,i.Dh)(),o=(0,i.bG)("span"),r=(0,i.fL)(c),a=(0,i.fL)("."),(0,i.Lj)(o,"class","badge bg-light")},m(e,l){(0,i.$T)(e,t,l),(0,i.$T)(e,n,l),(0,i.$T)(e,s,l),(0,i.$T)(e,o,l),(0,i.R3)(o,r),(0,i.$T)(e,a,l)},p(e,t){1&t&&l!==(l=e[2].info<0?"loses with":"beats")&&(0,i.rT)(n,l),3&t&&c!==(c=Ze(Math.abs(e[2].info),e[1])+"")&&(0,i.rT)(r,c)},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(a)}}}function pe(e){let t,n,s;function o(e,t){return"move"===e[2].type?ne:"reveal"===e[2].type?te:"cmp"===e[2].type?ee:"trade"===e[2].type?X:K}let r=o(e),a=r(e);return{c(){t=(0,i.bG)("br"),n=(0,i.Dh)(),a.c(),s=(0,i.cS)()},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),a.m(e,o),(0,i.$T)(e,s,o)},p(e,t){r===(r=o(e))&&a?a.p(e,t):(a.d(1),a=r(e),a&&(a.c(),a.m(s.parentNode,s)))},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),a.d(e),e&&(0,i.og)(s)}}}function be(e){let t,n,s,o=e[0],r=[];for(let t=0;t<o.length;t+=1)r[t]=pe(q(e,o,t));return{c(){t=(0,i.bG)("b"),t.textContent="Move History",n=(0,i.Dh)();for(let e=0;e<r.length;e+=1)r[e].c();s=(0,i.cS)()},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o);for(let t=0;t<r.length;t+=1)r[t].m(e,o);(0,i.$T)(e,s,o)},p(e,[t]){if(3&t){let n;for(o=e[0],n=0;n<o.length;n+=1){const a=q(e,o,n);r[n]?r[n].p(a,t):(r[n]=pe(a),r[n].c(),r[n].m(s.parentNode,s))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}},i:i.ZT,o:i.ZT,d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),(0,i.RM)(r,e),e&&(0,i.og)(s)}}}function Te(e,t,n){let{moves:s}=t,{ll:o}=t;return e.$$set=e=>{"moves"in e&&n(0,s=e.moves),"ll"in e&&n(1,o=e.ll)},[s,o]}class $e extends i.f_{constructor(e){super(),(0,i.S1)(this,e,Te,be,i.N8,{moves:0,ll:1})}}const Re=$e;function Le(e,t,n){const s=e.slice();return s[53]=t[n],s}function ye(e,t,n){const s=e.slice();return s[56]=t[n],s}function ve(e,t,n){const s=e.slice();return s[53]=t[n],s[60]=n,s}function Ie(e,t,n){const s=e.slice();return s[56]=t[n],s}function De(e,t,n){const s=e.slice();return s[63]=t[n],s[60]=n,s}function ke(e,t,n){const s=e.slice();return s[53]=t[n],s[60]=n,s}function Me(e,t,n){const s=e.slice();return s[66]=t[n],s}function Ge(e){let t,n,s;function o(e,t){return 1===e[3]?Se:e[8]?Ne:je}let r=o(e),a=r(e);return n=new A.Z({props:{startTime:e[10],endTime:e[11]}}),{c(){a.c(),t=(0,i.Dh)(),(0,i.YC)(n.$$.fragment)},m(e,o){a.m(e,o),(0,i.$T)(e,t,o),(0,i.ye)(n,e,o),s=!0},p(e,s){r!==(r=o(e))&&(a.d(1),a=r(e),a&&(a.c(),a.m(t.parentNode,t)));const l={};1024&s[0]&&(l.startTime=e[10]),2048&s[0]&&(l.endTime=e[11]),n.$set(l)},i(e){s||((0,i.Ui)(n.$$.fragment,e),s=!0)},o(e){(0,i.et)(n.$$.fragment,e),s=!1},d(e){a.d(e),e&&(0,i.og)(t),(0,i.vp)(n,e)}}}function we(e){let t;return{c(){t=(0,i.fL)("Waiting for players…")},m(e,n){(0,i.$T)(e,t,n)},p:i.ZT,i:i.ZT,o:i.ZT,d(e){e&&(0,i.og)(t)}}}function je(e){let t;return{c(){t=(0,i.fL)("Waiting for others to move…")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function Ne(e){let t;return{c(){t=(0,i.fL)("Make a move:")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function Se(e){let t;return{c(){t=(0,i.fL)("Intermission:")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function Ee(e){let t,n,s,o,r=Ze(e[66],e[1])+"",a=We(e[66],e[1])+"";return{c(){t=(0,i.bG)("li"),n=(0,i.fL)(r),s=(0,i.fL)(": "),o=(0,i.fL)(a),(0,i.VH)(t,"fw-bold",2===e[3]&&e[2]&&(e[66]===e[6]||e[8]&&e[66]===e[7]))},m(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),(0,i.R3)(t,s),(0,i.R3)(t,o)},p(e,s){2&s[0]&&r!==(r=Ze(e[66],e[1])+"")&&(0,i.rT)(n,r),2&s[0]&&a!==(a=We(e[66],e[1])+"")&&(0,i.rT)(o,a),460&s[0]&&(0,i.VH)(t,"fw-bold",2===e[3]&&e[2]&&(e[66]===e[6]||e[8]&&e[66]===e[7]))},d(e){e&&(0,i.og)(t)}}}function Pe(e){let t,n,s,o,r,a,l,c=Ze(e[6],e[1])+"",d=e[8]&&_e(e),g=e[8]&&Ce(e);return{c(){t=(0,i.bG)("div"),n=(0,i.fL)("Your hand: "),s=(0,i.bG)("span"),o=(0,i.fL)(c),r=(0,i.Dh)(),d&&d.c(),a=(0,i.Dh)(),g&&g.c(),l=(0,i.cS)(),(0,i.Lj)(s,"class","badge bg-dark"),(0,i.Lj)(t,"class","col-12")},m(e,c){(0,i.$T)(e,t,c),(0,i.R3)(t,n),(0,i.R3)(t,s),(0,i.R3)(s,o),(0,i.R3)(t,r),d&&d.m(t,null),(0,i.$T)(e,a,c),g&&g.m(e,c),(0,i.$T)(e,l,c)},p(e,n){66&n[0]&&c!==(c=Ze(e[6],e[1])+"")&&(0,i.rT)(o,c),e[8]?d?d.p(e,n):(d=_e(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null),e[8]?g?g.p(e,n):(g=Ce(e),g.c(),g.m(l.parentNode,l)):g&&(g.d(1),g=null)},d(e){e&&(0,i.og)(t),d&&d.d(),e&&(0,i.og)(a),g&&g.d(e),e&&(0,i.og)(l)}}}function _e(e){let t,n,s=Ze(e[7],e[1])+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-dark")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){130&t[0]&&s!==(s=Ze(e[7],e[1])+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function Ce(e){let t,n,s,o,r,a,l,c,d,g,u,f,h,m,p,b,T,$,R,L,y,v,I,D,k,M,G,w,j,N,S,E,P,_,C,A,O,U,F,x,H,V,Y,Z,W,B,Q=Ze(e[6],e[1])+"",z=Ze(e[7],e[1])+"",J=(e[12]<0?"auto":e[0].getNameFromPlayer(e[0].getPlayerInfo(e[12]),e[12]))+"",q=(e[13]>1?e[43][e[13]]:"auto")+"",K=e[4],X=[];for(let t=0;t<K.length;t+=1)X[t]=Ae(ke(e,K,t));let ee=e[43].slice(2),te=[];for(let t=0;t<ee.length;t+=1)te[t]=Oe(De(e,ee,t));return{c(){t=(0,i.bG)("div"),n=(0,i.bG)("div"),s=(0,i.bG)("span"),s.textContent="Discard",o=(0,i.Dh)(),r=(0,i.bG)("button"),a=(0,i.fL)(Q),c=(0,i.Dh)(),d=(0,i.bG)("button"),g=(0,i.fL)(z),f=(0,i.Dh)(),h=(0,i.bG)("div"),m=(0,i.bG)("label"),p=(0,i.fL)("Target"),b=(0,i.bG)("br"),T=(0,i.Dh)(),$=(0,i.bG)("button"),R=(0,i.fL)(J),y=(0,i.Dh)(),v=(0,i.bG)("div"),I=(0,i.bG)("button"),I.textContent="auto",D=(0,i.Dh)();for(let e=0;e<X.length;e+=1)X[e].c();k=(0,i.Dh)(),M=(0,i.bG)("small"),M.textContent="1, 2, 3, 6 targets others; 5 targets any",G=(0,i.Dh)(),w=(0,i.bG)("div"),j=(0,i.bG)("label"),N=(0,i.fL)("Guess"),S=(0,i.bG)("br"),E=(0,i.Dh)(),P=(0,i.bG)("button"),_=(0,i.fL)(q),A=(0,i.Dh)(),O=(0,i.bG)("div"),U=(0,i.bG)("button"),U.textContent="auto",F=(0,i.Dh)();for(let e=0;e<te.length;e+=1)te[e].c();x=(0,i.Dh)(),H=(0,i.bG)("small"),H.textContent="only for 1",V=(0,i.Dh)(),Y=(0,i.bG)("div"),Z=(0,i.bG)("button"),Z.textContent="End Move",(0,i.Lj)(s,"class","input-group-text"),(0,i.Lj)(r,"class",l="fw-bold w-100 btn btn-outline-"+Be(e[6],e[7])),(0,i.VH)(r,"active",e[5]),(0,i.Lj)(d,"class",u="fw-bold w-100 btn btn-outline-"+Be(e[7],e[6])),(0,i.VH)(d,"active",!e[5]),(0,i.Lj)(n,"class","btn-group d-flex mb-3"),(0,i.Lj)(n,"role","group"),(0,i.Lj)(t,"class","col-12"),(0,i.Lj)($,"class",L="btn btn-outline-"+(4!==e[9]&&e[9]<7?"primary":"secondary")+" dropdown-toggle"),(0,i.Lj)($,"id","dropdownMenuButtonTarget"),(0,i.Lj)($,"data-bs-toggle","dropdown"),(0,i.Lj)($,"aria-haspopup","true"),(0,i.Lj)($,"aria-expanded","false"),(0,i.Lj)(I,"class","dropdown-item"),(0,i.VH)(I,"active",e[12]<0),(0,i.Lj)(v,"class","dropdown-menu"),(0,i.Lj)(v,"aria-labelledby","dropdownMenuButtonTarget"),(0,i.Lj)(M,"class","form-text text-muted"),(0,i.Lj)(h,"class","col-12 col-sm-6 mb-2"),(0,i.Lj)(P,"class",C="btn btn-outline-"+(1===e[9]?"info":"secondary")+" dropdown-toggle"),(0,i.Lj)(P,"id","dropdownMenuButtonGuess"),(0,i.Lj)(P,"data-bs-toggle","dropdown"),(0,i.Lj)(P,"aria-haspopup","true"),(0,i.Lj)(P,"aria-expanded","false"),(0,i.Lj)(U,"class","dropdown-item"),(0,i.VH)(U,"active",e[13]<2),(0,i.Lj)(O,"class","dropdown-menu"),(0,i.Lj)(O,"aria-labelledby","dropdownMenuButtonGuess"),(0,i.Lj)(H,"class","form-text text-muted"),(0,i.Lj)(w,"class","col-12 col-sm-6 mb-3"),(0,i.Lj)(Z,"class","btn btn-primary d-block w-100 mb-2"),(0,i.Lj)(Y,"class","col-12 mb-2")},m(l,u){(0,i.$T)(l,t,u),(0,i.R3)(t,n),(0,i.R3)(n,s),(0,i.R3)(n,o),(0,i.R3)(n,r),(0,i.R3)(r,a),(0,i.R3)(n,c),(0,i.R3)(n,d),(0,i.R3)(d,g),(0,i.$T)(l,f,u),(0,i.$T)(l,h,u),(0,i.R3)(h,m),(0,i.R3)(m,p),(0,i.R3)(m,b),(0,i.R3)(m,T),(0,i.R3)(m,$),(0,i.R3)($,R),(0,i.R3)(m,y),(0,i.R3)(m,v),(0,i.R3)(v,I),(0,i.R3)(v,D);for(let e=0;e<X.length;e+=1)X[e].m(v,null);(0,i.R3)(h,k),(0,i.R3)(h,M),(0,i.$T)(l,G,u),(0,i.$T)(l,w,u),(0,i.R3)(w,j),(0,i.R3)(j,N),(0,i.R3)(j,S),(0,i.R3)(j,E),(0,i.R3)(j,P),(0,i.R3)(P,_),(0,i.R3)(j,A),(0,i.R3)(j,O),(0,i.R3)(O,U),(0,i.R3)(O,F);for(let e=0;e<te.length;e+=1)te[e].m(O,null);(0,i.R3)(w,x),(0,i.R3)(w,H),(0,i.$T)(l,V,u),(0,i.$T)(l,Y,u),(0,i.R3)(Y,Z),W||(B=[(0,i.oL)(r,"click",e[46]),(0,i.oL)(d,"click",e[47]),(0,i.oL)(I,"click",e[48]),(0,i.oL)(U,"click",e[50]),(0,i.oL)(Z,"click",e[52])],W=!0)},p(e,t){if(66&t[0]&&Q!==(Q=Ze(e[6],e[1])+"")&&(0,i.rT)(a,Q),192&t[0]&&l!==(l="fw-bold w-100 btn btn-outline-"+Be(e[6],e[7]))&&(0,i.Lj)(r,"class",l),224&t[0]&&(0,i.VH)(r,"active",e[5]),130&t[0]&&z!==(z=Ze(e[7],e[1])+"")&&(0,i.rT)(g,z),192&t[0]&&u!==(u="fw-bold w-100 btn btn-outline-"+Be(e[7],e[6]))&&(0,i.Lj)(d,"class",u),224&t[0]&&(0,i.VH)(d,"active",!e[5]),4097&t[0]&&J!==(J=(e[12]<0?"auto":e[0].getNameFromPlayer(e[0].getPlayerInfo(e[12]),e[12]))+"")&&(0,i.rT)(R,J),512&t[0]&&L!==(L="btn btn-outline-"+(4!==e[9]&&e[9]<7?"primary":"secondary")+" dropdown-toggle")&&(0,i.Lj)($,"class",L),4096&t[0]&&(0,i.VH)(I,"active",e[12]<0),4625&t[0]){let n;for(K=e[4],n=0;n<K.length;n+=1){const s=ke(e,K,n);X[n]?X[n].p(s,t):(X[n]=Ae(s),X[n].c(),X[n].m(v,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=K.length}if(8192&t[0]&&q!==(q=(e[13]>1?e[43][e[13]]:"auto")+"")&&(0,i.rT)(_,q),512&t[0]&&C!==(C="btn btn-outline-"+(1===e[9]?"info":"secondary")+" dropdown-toggle")&&(0,i.Lj)(P,"class",C),8192&t[0]&&(0,i.VH)(U,"active",e[13]<2),8193&t[0]|4096&t[1]){let n;for(ee=e[43].slice(2),n=0;n<ee.length;n+=1){const s=De(e,ee,n);te[n]?te[n].p(s,t):(te[n]=Oe(s),te[n].c(),te[n].m(O,null))}for(;n<te.length;n+=1)te[n].d(1);te.length=ee.length}},d(e){e&&(0,i.og)(t),e&&(0,i.og)(f),e&&(0,i.og)(h),(0,i.RM)(X,e),e&&(0,i.og)(G),e&&(0,i.og)(w),(0,i.RM)(te,e),e&&(0,i.og)(V),e&&(0,i.og)(Y),W=!1,(0,i.j7)(B)}}}function Ae(e){let t,n,s,o,r=e[0].getNameFromPlayer(e[53])+"";function a(){return e[49](e[60])}return{c(){t=(0,i.bG)("button"),n=(0,i.fL)(r),(0,i.Lj)(t,"class","dropdown-item"),(0,i.VH)(t,"bg-danger",!e[60]&&5!==e[9]||e[53].immune),(0,i.VH)(t,"active",e[12]===e[60])},m(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),s||(o=(0,i.oL)(t,"click",a),s=!0)},p(s,o){e=s,17&o[0]&&r!==(r=e[0].getNameFromPlayer(e[53])+"")&&(0,i.rT)(n,r),528&o[0]&&(0,i.VH)(t,"bg-danger",!e[60]&&5!==e[9]||e[53].immune),4096&o[0]&&(0,i.VH)(t,"active",e[12]===e[60])},d(e){e&&(0,i.og)(t),s=!1,o()}}}function Oe(e){let t,n,s,o,r=e[63]+"";function a(){return e[51](e[60])}return{c(){t=(0,i.bG)("button"),n=(0,i.fL)(r),(0,i.Lj)(t,"class","dropdown-item"),(0,i.VH)(t,"active",e[13]===e[60]+2)},m(e,r){(0,i.$T)(e,t,r),(0,i.R3)(t,n),s||(o=(0,i.oL)(t,"click",a),s=!0)},p(n,s){e=n,8192&s[0]&&(0,i.VH)(t,"active",e[13]===e[60]+2)},d(e){e&&(0,i.og)(t),s=!1,o()}}}function Ue(e){let t;return{c(){t=(0,i.bG)("badge"),t.textContent="IMMUNE",(0,i.Lj)(t,"class","badge bg-info")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function Fe(e){let t,n,s=e[56]+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-light")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){16&t[0]&&s!==(s=e[56]+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function xe(e){let t,n,s,o,r,a,l,c,d,g,u,f,h,m=e[0].getNameFromPlayer(e[53])+"",p=(e[0].playerIsMe(e[53])?Ze(e[6],e[1]):e[53].hand?Ze(e[53].hand,e[1]):"?")+"",b=e[53].discardSum+"",T=!e[60]&&2===e[25]&&function(e){let t,n,s=(e[0].playerIsMe(e[53])?Ze(e[7],e[1]):"?")+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-dark")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){147&t[0]&&s!==(s=(e[0].playerIsMe(e[53])?Ze(e[7],e[1]):"?")+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}(e),$=e[53].immune&&Ue(),R=e[53].discarded,L=[];for(let t=0;t<R.length;t+=1)L[t]=Fe(Ie(e,R,t));return{c(){t=(0,i.bG)("br"),n=(0,i.bG)("span"),s=(0,i.fL)(m),r=(0,i.Dh)(),a=(0,i.bG)("span"),l=(0,i.fL)(p),c=(0,i.Dh)(),T&&T.c(),d=(0,i.Dh)(),$&&$.c(),g=(0,i.Dh)(),u=(0,i.fL)(b),f=(0,i.Dh)();for(let e=0;e<L.length;e+=1)L[e].c();h=(0,i.cS)(),(0,i.Lj)(n,"class",o="badge bg-"+J(e[0].playerIsMe(e[53]))),(0,i.Lj)(a,"class","badge bg-dark")},m(e,o){(0,i.$T)(e,t,o),(0,i.$T)(e,n,o),(0,i.R3)(n,s),(0,i.$T)(e,r,o),(0,i.$T)(e,a,o),(0,i.R3)(a,l),(0,i.$T)(e,c,o),T&&T.m(e,o),(0,i.$T)(e,d,o),$&&$.m(e,o),(0,i.$T)(e,g,o),(0,i.$T)(e,u,o),(0,i.$T)(e,f,o);for(let t=0;t<L.length;t+=1)L[t].m(e,o);(0,i.$T)(e,h,o)},p(e,t){if(17&t[0]&&m!==(m=e[0].getNameFromPlayer(e[53])+"")&&(0,i.rT)(s,m),17&t[0]&&o!==(o="badge bg-"+J(e[0].playerIsMe(e[53])))&&(0,i.Lj)(n,"class",o),83&t[0]&&p!==(p=(e[0].playerIsMe(e[53])?Ze(e[6],e[1]):e[53].hand?Ze(e[53].hand,e[1]):"?")+"")&&(0,i.rT)(l,p),e[60]||2!==e[25]||T.p(e,t),e[53].immune?$||($=Ue(),$.c(),$.m(g.parentNode,g)):$&&($.d(1),$=null),16&t[0]&&b!==(b=e[53].discardSum+"")&&(0,i.rT)(u,b),16&t[0]){let n;for(R=e[53].discarded,n=0;n<R.length;n+=1){const s=Ie(e,R,n);L[n]?L[n].p(s,t):(L[n]=Fe(s),L[n].c(),L[n].m(h.parentNode,h))}for(;n<L.length;n+=1)L[n].d(1);L.length=R.length}},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(r),e&&(0,i.og)(a),e&&(0,i.og)(c),T&&T.d(e),e&&(0,i.og)(d),$&&$.d(e),e&&(0,i.og)(g),e&&(0,i.og)(u),e&&(0,i.og)(f),(0,i.RM)(L,e),e&&(0,i.og)(h)}}}function He(e){let t,n,s=Ze(e[56],e[1])+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-light")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){16386&t[0]&&s!==(s=Ze(e[56],e[1])+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function Ve(e){let t,n,s,o,r,a,l,c=e[53].ownerName+"",d=e[53].discardSum+"",g=e[53].discarded,u=[];for(let t=0;t<g.length;t+=1)u[t]=He(ye(e,g,t));return{c(){t=(0,i.bG)("br"),n=(0,i.bG)("span"),s=(0,i.fL)(c),o=(0,i.Dh)(),r=(0,i.fL)(d),a=(0,i.Dh)();for(let e=0;e<u.length;e+=1)u[e].c();l=(0,i.cS)(),(0,i.Lj)(n,"class","badge bg-secondary")},m(e,c){(0,i.$T)(e,t,c),(0,i.$T)(e,n,c),(0,i.R3)(n,s),(0,i.$T)(e,o,c),(0,i.$T)(e,r,c),(0,i.$T)(e,a,c);for(let t=0;t<u.length;t+=1)u[t].m(e,c);(0,i.$T)(e,l,c)},p(e,t){if(16384&t[0]&&c!==(c=e[53].ownerName+"")&&(0,i.rT)(s,c),16384&t[0]&&d!==(d=e[53].discardSum+"")&&(0,i.rT)(r,d),16386&t[0]){let n;for(g=e[53].discarded,n=0;n<g.length;n+=1){const s=ye(e,g,n);u[n]?u[n].p(s,t):(u[n]=He(s),u[n].c(),u[n].m(l.parentNode,l))}for(;n<u.length;n+=1)u[n].d(1);u.length=g.length}},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(o),e&&(0,i.og)(r),e&&(0,i.og)(a),(0,i.RM)(u,e),e&&(0,i.og)(l)}}}function Ye(e){let t,n,s,o,r,a,l,c,d,g,u,f,h,m,p,b,T,$,R,L,y,v,I,D,k,M,G,w,j,N,S,E,P,_,A,O=1===e[16]?"is 1 card":`are ${e[16]} cards`,U=z(e[20])+"";const F=[we,Ge],x=[];function H(e,t){return 0===e[3]?0:1}t=H(e),n=x[t]=F[t](e);let V=[1,2,3,4,5,6,7,8],Y=[];for(let t=0;t<8;t+=1)Y[t]=Ee(Me(e,V,t));let Z=2===e[3]&&e[2]&&Pe(e),W=e[4],Q=[];for(let t=0;t<W.length;t+=1)Q[t]=xe(ve(e,W,t));let J=e[14],q=[];for(let t=0;t<J.length;t+=1)q[t]=Ve(Le(e,J,t));return L=new Re({props:{moves:e[15],ll:e[1]}}),M=new C({props:{ranks:["1","2","3","4","5","6","7","8","Total"],counts:[["Unplayed",e[17]],["Discarded",e[18]],["Total",e[19]]]}}),_=new B({props:{inGame:e[21],inQueue:e[22]}}),{c(){n.c(),s=(0,i.Dh)(),o=(0,i.bG)("div"),r=(0,i.bG)("div"),a=(0,i.fL)("Card Descriptions\n    "),l=(0,i.bG)("ul");for(let e=0;e<8;e+=1)Y[e].c();c=(0,i.Dh)(),Z&&Z.c(),d=(0,i.Dh)(),g=(0,i.bG)("div"),u=(0,i.bG)("div"),f=(0,i.bG)("b"),f.textContent="Active Players",h=(0,i.Dh)();for(let e=0;e<Q.length;e+=1)Q[e].c();m=(0,i.Dh)(),p=(0,i.bG)("div"),b=(0,i.bG)("b"),b.textContent="Eliminated",T=(0,i.Dh)();for(let e=0;e<q.length;e+=1)q[e].c();$=(0,i.Dh)(),R=(0,i.bG)("div"),(0,i.YC)(L.$$.fragment),y=(0,i.Dh)(),v=(0,i.bG)("div"),I=(0,i.fL)("There "),D=(0,i.fL)(O),k=(0,i.fL)(" in the draw pile.\n    "),(0,i.YC)(M.$$.fragment),G=(0,i.Dh)(),w=(0,i.bG)("div"),j=(0,i.fL)("Game Mode: "),N=(0,i.fL)(U),S=(0,i.Dh)(),E=(0,i.bG)("b"),E.textContent="Lobby",P=(0,i.Dh)(),(0,i.YC)(_.$$.fragment),(0,i.Lj)(r,"class","col-12 mt-2 mb-3"),(0,i.Lj)(u,"class","mb-2"),(0,i.Lj)(g,"class","col-12 col-sm-4"),(0,i.Lj)(R,"class","col-12 col-sm-8"),(0,i.Lj)(v,"class","col mt-2"),(0,i.Lj)(o,"class","row")},m(e,n){x[t].m(e,n),(0,i.$T)(e,s,n),(0,i.$T)(e,o,n),(0,i.R3)(o,r),(0,i.R3)(r,a),(0,i.R3)(r,l);for(let e=0;e<8;e+=1)Y[e].m(l,null);(0,i.R3)(o,c),Z&&Z.m(o,null),(0,i.R3)(o,d),(0,i.R3)(o,g),(0,i.R3)(g,u),(0,i.R3)(u,f),(0,i.R3)(u,h);for(let e=0;e<Q.length;e+=1)Q[e].m(u,null);(0,i.R3)(g,m),(0,i.R3)(g,p),(0,i.R3)(p,b),(0,i.R3)(p,T);for(let e=0;e<q.length;e+=1)q[e].m(p,null);(0,i.R3)(o,$),(0,i.R3)(o,R),(0,i.ye)(L,R,null),(0,i.R3)(o,y),(0,i.R3)(o,v),(0,i.R3)(v,I),(0,i.R3)(v,D),(0,i.R3)(v,k),(0,i.ye)(M,v,null),(0,i.$T)(e,G,n),(0,i.$T)(e,w,n),(0,i.R3)(w,j),(0,i.R3)(w,N),(0,i.$T)(e,S,n),(0,i.$T)(e,E,n),(0,i.$T)(e,P,n),(0,i.ye)(_,e,n),A=!0},p(e,r){let a=t;if(t=H(e),t===a?x[t].p(e,r):((0,i.dv)(),(0,i.et)(x[a],1,1,(()=>{x[a]=null})),(0,i.gb)(),n=x[t],n?n.p(e,r):(n=x[t]=F[t](e),n.c()),(0,i.Ui)(n,1),n.m(s.parentNode,s)),462&r[0]){let t;for(V=[1,2,3,4,5,6,7,8],t=0;t<8;t+=1){const n=Me(e,V,t);Y[t]?Y[t].p(n,r):(Y[t]=Ee(n),Y[t].c(),Y[t].m(l,null))}for(;t<8;t+=1)Y[t].d(1)}if(2===e[3]&&e[2]?Z?Z.p(e,r):(Z=Pe(e),Z.c(),Z.m(o,d)):Z&&(Z.d(1),Z=null),33554643&r[0]){let t;for(W=e[4],t=0;t<W.length;t+=1){const n=ve(e,W,t);Q[t]?Q[t].p(n,r):(Q[t]=xe(n),Q[t].c(),Q[t].m(u,null))}for(;t<Q.length;t+=1)Q[t].d(1);Q.length=W.length}if(16386&r[0]){let t;for(J=e[14],t=0;t<J.length;t+=1){const n=Le(e,J,t);q[t]?q[t].p(n,r):(q[t]=Ve(n),q[t].c(),q[t].m(p,null))}for(;t<q.length;t+=1)q[t].d(1);q.length=J.length}const c={};32768&r[0]&&(c.moves=e[15]),2&r[0]&&(c.ll=e[1]),L.$set(c),(!A||65536&r[0])&&O!==(O=1===e[16]?"is 1 card":`are ${e[16]} cards`)&&(0,i.rT)(D,O);const g={};917504&r[0]&&(g.counts=[["Unplayed",e[17]],["Discarded",e[18]],["Total",e[19]]]),M.$set(g),(!A||1048576&r[0])&&U!==(U=z(e[20])+"")&&(0,i.rT)(N,U);const f={};2097152&r[0]&&(f.inGame=e[21]),4194304&r[0]&&(f.inQueue=e[22]),_.$set(f)},i(e){A||((0,i.Ui)(n),(0,i.Ui)(L.$$.fragment,e),(0,i.Ui)(M.$$.fragment,e),(0,i.Ui)(_.$$.fragment,e),A=!0)},o(e){(0,i.et)(n),(0,i.et)(L.$$.fragment,e),(0,i.et)(M.$$.fragment,e),(0,i.et)(_.$$.fragment,e),A=!1},d(e){x[t].d(e),e&&(0,i.og)(s),e&&(0,i.og)(o),(0,i.RM)(Y,e),Z&&Z.d(),(0,i.RM)(Q,e),(0,i.RM)(q,e),(0,i.vp)(L),(0,i.vp)(M),e&&(0,i.og)(G),e&&(0,i.og)(w),e&&(0,i.og)(S),e&&(0,i.og)(E),e&&(0,i.og)(P),(0,i.vp)(_,e)}}}function Ze(e,t){return t?["Guard (1)","Priest (2)","Baron (3)","Handmaid (4)","Prince (5)","King (6)","Countess (7)","Princess (8)"][e-1]:e<=8?e:["0b","0c","2b","3b","4b","5b","6b","7b","9b"][e-9]}function We(e,t){return e<1||e>8?"unknown":["target another player and guess hand value (not 1); if correct, target discards without effect and loses (5/deck)","target another player; you look at his hand (2/deck)","target another player; compare; lower player loses (no action on tie) (2/deck)","prevent being targeted until your next turn (2/deck)","target one player (including self); target discards (with effect only for 8) and (if not 8) draws new card (2/deck)","target another player; trade cards (1/deck)",`no action, but must discard if other is ${Ze(5,t)} or ${Ze(6,t)} (1/deck)`,"lose (try not to discard this) (1/deck)"][e-1]}function Be(e,t){return function(e,t){return 8===e||7===t&&(5==e||6==e)}(e,t)?"danger":1===e?"info":4!==e&&e<7?"primary":"secondary"}function Qe(e,t,n){let s,o,r,a,l,c,d,g,u,f,h,m,p,b,T,$,R,L,y,v,I,D,k,{gameState:M}=t,{ll:G}=t;const{isActive:w,inRound:j,roundState:N,roundTimerStart:S,roundTimerEnd:E,roundPlayers:P,roundPlayerQueue:_,playerInfo:C,playerDiscInfo:A,myHand:O,myAltMove:U,deckSize:F,cardCountDiscard:x,cardCountRemain:H,cardCountTotal:V,moveHistory:Y,pendingMoveUseHand:Z,pendingMoveTarget:W,pendingMoveGuess:B,modeDeck:Q}=M;return(0,i.FI)(e,w,(e=>n(44,a=e))),(0,i.FI)(e,j,(e=>n(45,c=e))),(0,i.FI)(e,N,(e=>n(3,l=e))),(0,i.FI)(e,S,(e=>n(10,h=e))),(0,i.FI)(e,E,(e=>n(11,m=e))),(0,i.FI)(e,P,(e=>n(21,D=e))),(0,i.FI)(e,_,(e=>n(22,k=e))),(0,i.FI)(e,C,(e=>n(4,d=e))),(0,i.FI)(e,A,(e=>n(14,T=e))),(0,i.FI)(e,O,(e=>n(6,u=e))),(0,i.FI)(e,U,(e=>n(7,f=e))),(0,i.FI)(e,F,(e=>n(16,R=e))),(0,i.FI)(e,x,(e=>n(18,y=e))),(0,i.FI)(e,H,(e=>n(17,L=e))),(0,i.FI)(e,V,(e=>n(19,v=e))),(0,i.FI)(e,Y,(e=>n(15,$=e))),(0,i.FI)(e,Z,(e=>n(5,g=e))),(0,i.FI)(e,W,(e=>n(12,p=e))),(0,i.FI)(e,B,(e=>n(13,b=e))),(0,i.FI)(e,Q,(e=>n(20,I=e))),e.$$set=e=>{"gameState"in e&&n(0,M=e.gameState),"ll"in e&&n(1,G=e.ll)},e.$$.update=()=>{8&e.$$.dirty[0]|24576&e.$$.dirty[1]&&n(2,s=a&&2===l&&c),21&e.$$.dirty[0]&&n(8,o=s&&M.playerIsMe(d[0])),224&e.$$.dirty[0]&&n(9,r=g?u:f)},[M,G,s,l,d,g,u,f,o,r,h,m,p,b,T,$,R,L,y,v,I,D,k,w,j,N,S,E,P,_,C,A,O,U,F,x,H,V,Y,Z,W,B,Q,["","1 (5/deck)","2 (2/deck)","3 (2/deck)","4 (2/deck)","5 (2/deck)","6 (1/deck)","7 (1/deck)","8 (1/deck)"],a,c,()=>M.sendMoveUseHand(!0),()=>M.sendMoveUseHand(!1),()=>M.sendMoveTarget(-1),e=>M.sendMoveTarget(e),()=>M.sendMoveGuess(0),e=>M.sendMoveGuess(e+2),()=>M.sendMoveEnd()]}class ze extends i.f_{constructor(e){super(),(0,i.S1)(this,e,Qe,Ye,i.N8,{gameState:0,ll:1},[-1,-1,-1])}}const Je=ze;function qe(e,t,n){const s=e.slice();return s[2]=t[n],s}function Ke(e,t,n){const s=e.slice();return s[5]=t[n],s[7]=n,s}function Xe(e,t,n){const s=e.slice();return s[8]=t[n],s}function et(e,t,n){const s=e.slice();return s[5]=t[n],s}function tt(e,t,n){const s=e.slice();return s[8]=t[n],s}function nt(e){let t;return{c(){t=(0,i.bG)("li"),t.textContent="No past games!\n    ",(0,i.Lj)(t,"class","list-group-item")},m(e,n){(0,i.$T)(e,t,n)},d(e){e&&(0,i.og)(t)}}}function st(e){let t,n,s=Ze(e[8],e[1])+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-light")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){3&t&&s!==(s=Ze(e[8],e[1])+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function ot(e){let t,n,s,o,r,a,l,c,d,g,u,f,h,m,p=e[5].rank+"",b=e[5].name+"",T=Ze(e[5].hand,e[1])+"",$=e[5].discardSum+"",R=e[5].discarded,L=[];for(let t=0;t<R.length;t+=1)L[t]=st(tt(e,R,t));return{c(){t=(0,i.bG)("br"),n=(0,i.fL)("\n        #"),s=(0,i.fL)(p),o=(0,i.fL)(": "),r=(0,i.bG)("span"),a=(0,i.fL)(b),c=(0,i.Dh)(),d=(0,i.bG)("span"),g=(0,i.fL)(T),u=(0,i.Dh)(),f=(0,i.fL)($),h=(0,i.Dh)();for(let e=0;e<L.length;e+=1)L[e].c();m=(0,i.cS)(),(0,i.Lj)(r,"class",l="badge bg-"+(e[5].rank>1?"warning":"success")),(0,i.Lj)(d,"class","badge bg-dark")},m(e,l){(0,i.$T)(e,t,l),(0,i.$T)(e,n,l),(0,i.$T)(e,s,l),(0,i.$T)(e,o,l),(0,i.$T)(e,r,l),(0,i.R3)(r,a),(0,i.$T)(e,c,l),(0,i.$T)(e,d,l),(0,i.R3)(d,g),(0,i.$T)(e,u,l),(0,i.$T)(e,f,l),(0,i.$T)(e,h,l);for(let t=0;t<L.length;t+=1)L[t].m(e,l);(0,i.$T)(e,m,l)},p(e,t){if(1&t&&p!==(p=e[5].rank+"")&&(0,i.rT)(s,p),1&t&&b!==(b=e[5].name+"")&&(0,i.rT)(a,b),1&t&&l!==(l="badge bg-"+(e[5].rank>1?"warning":"success"))&&(0,i.Lj)(r,"class",l),3&t&&T!==(T=Ze(e[5].hand,e[1])+"")&&(0,i.rT)(g,T),1&t&&$!==($=e[5].discardSum+"")&&(0,i.rT)(f,$),3&t){let n;for(R=e[5].discarded,n=0;n<R.length;n+=1){const s=tt(e,R,n);L[n]?L[n].p(s,t):(L[n]=st(s),L[n].c(),L[n].m(m.parentNode,m))}for(;n<L.length;n+=1)L[n].d(1);L.length=R.length}},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(r),e&&(0,i.og)(c),e&&(0,i.og)(d),e&&(0,i.og)(u),e&&(0,i.og)(f),e&&(0,i.og)(h),(0,i.RM)(L,e),e&&(0,i.og)(m)}}}function rt(e){let t,n,s=Ze(e[8],e[1])+"";return{c(){t=(0,i.bG)("span"),n=(0,i.fL)(s),(0,i.Lj)(t,"class","badge bg-light")},m(e,s){(0,i.$T)(e,t,s),(0,i.R3)(t,n)},p(e,t){3&t&&s!==(s=Ze(e[8],e[1])+"")&&(0,i.rT)(n,s)},d(e){e&&(0,i.og)(t)}}}function at(e){let t,n,s,o,r,a,l,c,d,g,u=e[2].survived.length+e[7]+1+"",f=e[5].name+"",h=e[5].discardSum+"",m=e[5].discarded,p=[];for(let t=0;t<m.length;t+=1)p[t]=rt(Xe(e,m,t));return{c(){t=(0,i.bG)("br"),n=(0,i.fL)("\n        #"),s=(0,i.fL)(u),o=(0,i.fL)(":\n        "),r=(0,i.bG)("span"),a=(0,i.fL)(f),l=(0,i.Dh)(),c=(0,i.fL)(h),d=(0,i.Dh)();for(let e=0;e<p.length;e+=1)p[e].c();g=(0,i.cS)(),(0,i.Lj)(r,"class","badge bg-danger")},m(e,u){(0,i.$T)(e,t,u),(0,i.$T)(e,n,u),(0,i.$T)(e,s,u),(0,i.$T)(e,o,u),(0,i.$T)(e,r,u),(0,i.R3)(r,a),(0,i.$T)(e,l,u),(0,i.$T)(e,c,u),(0,i.$T)(e,d,u);for(let t=0;t<p.length;t+=1)p[t].m(e,u);(0,i.$T)(e,g,u)},p(e,t){if(1&t&&u!==(u=e[2].survived.length+e[7]+1+"")&&(0,i.rT)(s,u),1&t&&f!==(f=e[5].name+"")&&(0,i.rT)(a,f),1&t&&h!==(h=e[5].discardSum+"")&&(0,i.rT)(c,h),3&t){let n;for(m=e[5].discarded,n=0;n<m.length;n+=1){const s=Xe(e,m,n);p[n]?p[n].p(s,t):(p[n]=rt(s),p[n].c(),p[n].m(g.parentNode,g))}for(;n<p.length;n+=1)p[n].d(1);p.length=m.length}},d(e){e&&(0,i.og)(t),e&&(0,i.og)(n),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(r),e&&(0,i.og)(l),e&&(0,i.og)(c),e&&(0,i.og)(d),(0,i.RM)(p,e),e&&(0,i.og)(g)}}}function lt(e){let t,n,s,o,r,a,l,c,d,g,u,f,h,m,p,b=e[2].survived.length+"",T=e[2].eliminated.length+"",$=e[2].survived,R=[];for(let t=0;t<$.length;t+=1)R[t]=ot(et(e,$,t));let L=e[2].eliminated,y=[];for(let t=0;t<L.length;t+=1)y[t]=at(Ke(e,L,t));return{c(){t=(0,i.bG)("li"),n=(0,i.bG)("b"),s=(0,i.fL)("Survived ("),o=(0,i.fL)(b),r=(0,i.fL)("):"),a=(0,i.Dh)();for(let e=0;e<R.length;e+=1)R[e].c();l=(0,i.Dh)(),c=(0,i.bG)("br"),d=(0,i.Dh)(),g=(0,i.bG)("b"),u=(0,i.fL)("Eliminated ("),f=(0,i.fL)(T),h=(0,i.fL)("):"),m=(0,i.Dh)();for(let e=0;e<y.length;e+=1)y[e].c();p=(0,i.Dh)(),(0,i.Lj)(t,"class","list-group-item")},m(e,b){(0,i.$T)(e,t,b),(0,i.R3)(t,n),(0,i.R3)(n,s),(0,i.R3)(n,o),(0,i.R3)(n,r),(0,i.R3)(t,a);for(let e=0;e<R.length;e+=1)R[e].m(t,null);(0,i.R3)(t,l),(0,i.R3)(t,c),(0,i.R3)(t,d),(0,i.R3)(t,g),(0,i.R3)(g,u),(0,i.R3)(g,f),(0,i.R3)(g,h),(0,i.R3)(t,m);for(let e=0;e<y.length;e+=1)y[e].m(t,null);(0,i.R3)(t,p)},p(e,n){if(1&n&&b!==(b=e[2].survived.length+"")&&(0,i.rT)(o,b),3&n){let s;for($=e[2].survived,s=0;s<$.length;s+=1){const o=et(e,$,s);R[s]?R[s].p(o,n):(R[s]=ot(o),R[s].c(),R[s].m(t,l))}for(;s<R.length;s+=1)R[s].d(1);R.length=$.length}if(1&n&&T!==(T=e[2].eliminated.length+"")&&(0,i.rT)(f,T),3&n){let s;for(L=e[2].eliminated,s=0;s<L.length;s+=1){const o=Ke(e,L,s);y[s]?y[s].p(o,n):(y[s]=at(o),y[s].c(),y[s].m(t,p))}for(;s<y.length;s+=1)y[s].d(1);y.length=L.length}},d(e){e&&(0,i.og)(t),(0,i.RM)(R,e),(0,i.RM)(y,e)}}}function it(e){let t,n=e[0],s=[];for(let t=0;t<n.length;t+=1)s[t]=lt(qe(e,n,t));let o=null;return n.length||(o=nt()),{c(){t=(0,i.bG)("ul");for(let e=0;e<s.length;e+=1)s[e].c();o&&o.c(),(0,i.Lj)(t,"class","list-group list-group-flush overflow-auto"),(0,i.cz)(t,"max-height","15rem")},m(e,n){(0,i.$T)(e,t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null);o&&o.m(t,null)},p(e,[r]){if(3&r){let a;for(n=e[0],a=0;a<n.length;a+=1){const o=qe(e,n,a);s[a]?s[a].p(o,r):(s[a]=lt(o),s[a].c(),s[a].m(t,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length,n.length?o&&(o.d(1),o=null):o||(o=nt(),o.c(),o.m(t,null))}},i:i.ZT,o:i.ZT,d(e){e&&(0,i.og)(t),(0,i.RM)(s,e),o&&o.d()}}}function ct(e,t,n){let{results:s}=t,{ll:o}=t;return e.$$set=e=>{"results"in e&&n(0,s=e.results),"ll"in e&&n(1,o=e.ll)},[s,o]}class dt extends i.f_{constructor(e){super(),(0,i.S1)(this,e,ct,it,i.N8,{results:0,ll:1})}}const gt=dt;function ut(e){let t,n;return t=new Je({props:{gameState:e[9],ll:e[1]}}),{c(){(0,i.YC)(t.$$.fragment)},m(e,s){(0,i.ye)(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.ll=e[1]),t.$set(s)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.et)(t.$$.fragment,e),n=!1},d(e){(0,i.vp)(t,e)}}}function ft(e){let t,n;return t=new gt({props:{results:e[6],ll:e[1]}}),{c(){(0,i.YC)(t.$$.fragment)},m(e,s){(0,i.ye)(t,e,s),n=!0},p(e,n){const s={};64&n&&(s.results=e[6]),2&n&&(s.ll=e[1]),t.$set(s)},i(e){n||((0,i.Ui)(t.$$.fragment,e),n=!0)},o(e){(0,i.et)(t.$$.fragment,e),n=!1},d(e){(0,i.vp)(t,e)}}}function ht(e){let t,n,s,o,r,a,l,m,p,b,T,$,R,L,y,v,I,D,k,M,G,w,j,N;function S(t){e[19](t)}let E={};return void 0!==e[0]&&(E.value=e[0]),t=new u.Z({props:E}),i.Vn.push((()=>(0,i.ak)(t,"value",S))),b=new h.Z({props:{gameId:"discard-l3z5n5wptuoeqtkytj64a",roomType:"DiscardRoom",joinData:{name:e[0]},onJoinedRoom:e[21],formatGameMode:e[18],roomCreateOptions:Q}}),$=new f.Z({props:{inGame:e[2],isActive:e[3],canReady:1===e[4],isReady:e[5],onSetActive:e[22],onSetReady:e[23],onReset:e[24],onDisconnect:e[25],$$slots:{default:[ut]},$$scope:{ctx:e}}}),v=new d.Z({props:{canClear:!e[6].length,onClear:e[26],$$slots:{default:[ft]},$$scope:{ctx:e}}}),D=new g.Z({props:{players:e[7],columns:[["Score",mt],["Streak",pt],["Win",bt],["Loss",Tt],["Rank Last",$t],["Best",Rt],["Worst",Lt]]}}),G=new c.Z({props:{chatState:e[8],onInput:e[27]}}),{c(){(0,i.YC)(t.$$.fragment),s=(0,i.Dh)(),o=(0,i.bG)("div"),r=(0,i.bG)("span"),a=(0,i.bG)("label"),l=(0,i.bG)("input"),m=(0,i.fL)("\n      Show Love Letter Names"),p=(0,i.Dh)(),(0,i.YC)(b.$$.fragment),T=(0,i.Dh)(),(0,i.YC)($.$$.fragment),R=(0,i.Dh)(),L=(0,i.bG)("div"),y=(0,i.bG)("div"),(0,i.YC)(v.$$.fragment),I=(0,i.Dh)(),(0,i.YC)(D.$$.fragment),k=(0,i.Dh)(),M=(0,i.bG)("div"),(0,i.YC)(G.$$.fragment),(0,i.Lj)(l,"type","checkbox"),(0,i.Lj)(l,"class","form-check-input"),(0,i.Lj)(a,"class","form-check mx-auto"),(0,i.Lj)(r,"class","input-group-text flex-grow-1"),(0,i.Lj)(o,"class","input-group mb-3"),(0,i.Lj)(y,"class","col-12 col-xl-8"),(0,i.Lj)(M,"class","col-12 col-xl-4 mb-3"),(0,i.Lj)(L,"class","row")},m(n,c){(0,i.ye)(t,n,c),(0,i.$T)(n,s,c),(0,i.$T)(n,o,c),(0,i.R3)(o,r),(0,i.R3)(r,a),(0,i.R3)(a,l),l.checked=e[1],(0,i.R3)(a,m),(0,i.$T)(n,p,c),(0,i.ye)(b,n,c),(0,i.$T)(n,T,c),(0,i.ye)($,n,c),(0,i.$T)(n,R,c),(0,i.$T)(n,L,c),(0,i.R3)(L,y),(0,i.ye)(v,y,null),(0,i.R3)(y,I),(0,i.ye)(D,y,null),(0,i.R3)(L,k),(0,i.R3)(L,M),(0,i.ye)(G,M,null),w=!0,j||(N=(0,i.oL)(l,"change",e[20]),j=!0)},p(e,[s]){const o={};!n&&1&s&&(n=!0,o.value=e[0],(0,i.hj)((()=>n=!1))),t.$set(o),2&s&&(l.checked=e[1]);const r={};1&s&&(r.joinData={name:e[0]}),1&s&&(r.onJoinedRoom=e[21]),b.$set(r);const a={};4&s&&(a.inGame=e[2]),8&s&&(a.isActive=e[3]),16&s&&(a.canReady=1===e[4]),32&s&&(a.isReady=e[5]),268435458&s&&(a.$$scope={dirty:s,ctx:e}),$.$set(a);const c={};64&s&&(c.canClear=!e[6].length),268435522&s&&(c.$$scope={dirty:s,ctx:e}),v.$set(c);const d={};128&s&&(d.players=e[7]),D.$set(d)},i(e){w||((0,i.Ui)(t.$$.fragment,e),(0,i.Ui)(b.$$.fragment,e),(0,i.Ui)($.$$.fragment,e),(0,i.Ui)(v.$$.fragment,e),(0,i.Ui)(D.$$.fragment,e),(0,i.Ui)(G.$$.fragment,e),w=!0)},o(e){(0,i.et)(t.$$.fragment,e),(0,i.et)(b.$$.fragment,e),(0,i.et)($.$$.fragment,e),(0,i.et)(v.$$.fragment,e),(0,i.et)(D.$$.fragment,e),(0,i.et)(G.$$.fragment,e),w=!1},d(e){(0,i.vp)(t,e),e&&(0,i.og)(s),e&&(0,i.og)(o),e&&(0,i.og)(p),(0,i.vp)(b,e),e&&(0,i.og)(T),(0,i.vp)($,e),e&&(0,i.og)(R),e&&(0,i.og)(L),(0,i.vp)(v),(0,i.vp)(D),(0,i.vp)(G),j=!1,N()}}}const mt=e=>e.score,pt=e=>e.streak,bt=e=>e.wins,Tt=e=>e.losses,$t=e=>e.rankLast,Rt=e=>e.rankBest,Lt=e=>e.rankWorst;function yt(e,t,n){let s,o,r,a,l,c,d,g;const u=new m.Z,f=new y(u),{inGame:h,isActive:p,isReady:T,pastGames:$,clientsSorted:R,roundState:L}=f;(0,i.FI)(e,h,(e=>n(2,r=e))),(0,i.FI)(e,p,(e=>n(3,a=e))),(0,i.FI)(e,T,(e=>n(5,c=e))),(0,i.FI)(e,$,(e=>n(6,d=e))),(0,i.FI)(e,R,(e=>n(7,g=e))),(0,i.FI)(e,L,(e=>n(4,l=e)));let v=(0,b.CR)("game/mp/_shared/name","");(0,i.FI)(e,v,(e=>n(0,s=e)));let I=(0,b.CR)("game/mp/discard/LL",!1);return(0,i.FI)(e,I,(e=>n(1,o=e))),[s,o,r,a,l,c,d,g,u,f,h,p,T,$,R,L,v,I,function({optDecks:e}){return z(+e)},function(e){s=e,v.set(s)},function(){o=this.checked,I.set(o)},e=>f.enterGame(e,s),e=>f.sendActive(e),e=>f.sendReady(e),()=>f.sendReset(),()=>f.leaveGame(),()=>f.clearHistory(),e=>f.processCommand(e)]}class vt extends i.f_{constructor(e){super(),(0,i.S1)(this,e,yt,ht,i.N8,{})}}const It=vt;(0,n(448).Z)(It)},46:(e,t,n)=>{function s(e){return e.reduce(((e,t)=>e+t),0)}function o(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(;e--;)n+=t[Math.random()*t.length|0];return n}function r(e,t,n){return Math.max(t,Math.min(e,n))}n.d(t,{Sm:()=>s,yF:()=>o,uZ:()=>r})}},n={};function s(e){var o=n[e];if(void 0!==o)return o.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,n,o,r)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,o,r]=e[c],l=!0,i=0;i<n.length;i++)(!1&r||a>=r)&&Object.keys(s.O).every((e=>s.O[e](n[i])))?n.splice(i--,1):(l=!1,r<a&&(a=r));l&&(e.splice(c--,1),t=o())}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={16:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,l,i]=n,c=0;for(o in l)s.o(l,o)&&(s.m[o]=l[o]);if(i)var d=i(s);for(t&&t(n);c<a.length;c++)r=a[c],s.o(e,r)&&e[r]&&e[r][0](),e[a[c]]=0;return s.O(d)},n=self.webpackChunkvwww=self.webpackChunkvwww||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=s.O(void 0,[3,0,2],(()=>s(378)));o=s.O(o)})();