(self.webpackChunkvwww=self.webpackChunkvwww||[]).push([[5],{347:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var s=n(0);function r(e,t,n){const s=e.slice();return s[2]=t[n],s}function i(e,t,n){const s=e.slice();return s[5]=t[n],s}function o(e){let t;return{c(){t=(0,s.fL)("nobody")},m(e,n){(0,s.$T)(e,t,n)},d(e){e&&(0,s.og)(t)}}}function a(e){let t,n,r,i,o,a,l=e[5].name+"",u=e[5].cn+"";return{c(){t=(0,s.bG)("span"),n=(0,s.fL)(l),r=(0,s.fL)(" ("),i=(0,s.fL)(u),o=(0,s.fL)(")"),(0,s.Lj)(t,"class",a="badge bg-"+(e[5].ready?"info":"primary")+" me-1")},m(e,a){(0,s.$T)(e,t,a),(0,s.R3)(t,n),(0,s.R3)(t,r),(0,s.R3)(t,i),(0,s.R3)(t,o)},p(e,r){1&r&&l!==(l=e[5].name+"")&&(0,s.rT)(n,l),1&r&&u!==(u=e[5].cn+"")&&(0,s.rT)(i,u),1&r&&a!==(a="badge bg-"+(e[5].ready?"info":"primary")+" me-1")&&(0,s.Lj)(t,"class",a)},d(e){e&&(0,s.og)(t)}}}function l(e){let t;return{c(){t=(0,s.fL)("nobody")},m(e,n){(0,s.$T)(e,t,n)},d(e){e&&(0,s.og)(t)}}}function u(e){let t,n,r,i,o,a,l=e[2].name+"",u=e[2].cn+"";return{c(){t=(0,s.bG)("span"),n=(0,s.fL)(l),r=(0,s.fL)(" ("),i=(0,s.fL)(u),o=(0,s.fL)(")"),(0,s.Lj)(t,"class",a="badge bg-"+(e[2].ready?"info":"secondary")+" me-1")},m(e,a){(0,s.$T)(e,t,a),(0,s.R3)(t,n),(0,s.R3)(t,r),(0,s.R3)(t,i),(0,s.R3)(t,o)},p(e,r){2&r&&l!==(l=e[2].name+"")&&(0,s.rT)(n,l),2&r&&u!==(u=e[2].cn+"")&&(0,s.rT)(i,u),2&r&&a!==(a="badge bg-"+(e[2].ready?"info":"secondary")+" me-1")&&(0,s.Lj)(t,"class",a)},d(e){e&&(0,s.og)(t)}}}function c(e){let t,n,c,d,h,R=e[0],f=[];for(let t=0;t<R.length;t+=1)f[t]=a(i(e,R,t));let p=null;R.length||(p=o());let g=e[1],y=[];for(let t=0;t<g.length;t+=1)y[t]=u(r(e,g,t));let m=null;return g.length||(m=l()),{c(){t=(0,s.bG)("div"),n=(0,s.fL)("In game:\n  ");for(let e=0;e<f.length;e+=1)f[e].c();p&&p.c(),c=(0,s.Dh)(),d=(0,s.bG)("div"),h=(0,s.fL)("Queue:\n  ");for(let e=0;e<y.length;e+=1)y[e].c();m&&m.c()},m(e,r){(0,s.$T)(e,t,r),(0,s.R3)(t,n);for(let e=0;e<f.length;e+=1)f[e].m(t,null);p&&p.m(t,null),(0,s.$T)(e,c,r),(0,s.$T)(e,d,r),(0,s.R3)(d,h);for(let e=0;e<y.length;e+=1)y[e].m(d,null);m&&m.m(d,null)},p(e,[n]){if(1&n){let s;for(R=e[0],s=0;s<R.length;s+=1){const r=i(e,R,s);f[s]?f[s].p(r,n):(f[s]=a(r),f[s].c(),f[s].m(t,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=R.length,R.length?p&&(p.d(1),p=null):p||(p=o(),p.c(),p.m(t,null))}if(2&n){let t;for(g=e[1],t=0;t<g.length;t+=1){const s=r(e,g,t);y[t]?y[t].p(s,n):(y[t]=u(s),y[t].c(),y[t].m(d,null))}for(;t<y.length;t+=1)y[t].d(1);y.length=g.length,g.length?m&&(m.d(1),m=null):m||(m=l(),m.c(),m.m(d,null))}},i:s.ZT,o:s.ZT,d(e){e&&(0,s.og)(t),(0,s.RM)(f,e),p&&p.d(),e&&(0,s.og)(c),e&&(0,s.og)(d),(0,s.RM)(y,e),m&&m.d()}}}function d(e,t,n){let{inGame:s}=t,{inQueue:r}=t;return e.$$set=e=>{"inGame"in e&&n(0,s=e.inGame),"inQueue"in e&&n(1,r=e.inQueue)},[s,r]}class h extends s.f_{constructor(e){super(),(0,s.S1)(this,e,d,c,s.N8,{inGame:0,inQueue:1})}}const R=h},350:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(0);function r(e){let t,n,r,i,o,a,l,u,c,d,h,R,f=["Offer Draw","Draw Requested","Accept Draw"][e[0]]+"",p=e[0]>1?"Reject Draw":"Cancel Draw";return{c(){t=(0,s.bG)("div"),n=(0,s.bG)("button"),n.textContent="Resign",r=(0,s.Dh)(),i=(0,s.bG)("button"),o=(0,s.fL)(f),l=(0,s.Dh)(),u=(0,s.bG)("button"),c=(0,s.fL)(p),(0,s.Lj)(n,"class","btn w-100 btn-outline-danger"),(0,s.Lj)(i,"class",a=`btn w-50 btn-${["outline-primary","primary","info"][e[0]]}`),(0,s.Lj)(u,"class",d=`btn w-50 btn-${e[0]?"":"outline-"}warning`),(0,s.VH)(u,"disabled",!e[0]),(0,s.Lj)(t,"class","btn-group d-flex my-2")},m(a,d){(0,s.$T)(a,t,d),(0,s.R3)(t,n),(0,s.R3)(t,r),(0,s.R3)(t,i),(0,s.R3)(i,o),(0,s.R3)(t,l),(0,s.R3)(t,u),(0,s.R3)(u,c),h||(R=[(0,s.oL)(n,"click",(function(){(0,s.sB)(e[1])&&e[1].apply(this,arguments)})),(0,s.oL)(i,"click",(function(){(0,s.sB)(e[2])&&e[2].apply(this,arguments)})),(0,s.oL)(u,"click",(function(){(0,s.sB)(e[3])&&e[3].apply(this,arguments)}))],h=!0)},p(t,[n]){e=t,1&n&&f!==(f=["Offer Draw","Draw Requested","Accept Draw"][e[0]]+"")&&(0,s.rT)(o,f),1&n&&a!==(a=`btn w-50 btn-${["outline-primary","primary","info"][e[0]]}`)&&(0,s.Lj)(i,"class",a),1&n&&p!==(p=e[0]>1?"Reject Draw":"Cancel Draw")&&(0,s.rT)(c,p),1&n&&d!==(d=`btn w-50 btn-${e[0]?"":"outline-"}warning`)&&(0,s.Lj)(u,"class",d),1&n&&(0,s.VH)(u,"disabled",!e[0])},i:s.ZT,o:s.ZT,d(e){e&&(0,s.og)(t),h=!1,(0,s.j7)(R)}}}function i(e,t,n){let{drawOffer:s}=t,{onResign:r}=t,{onDrawOffer:i}=t,{onDrawReject:o}=t;return e.$$set=e=>{"drawOffer"in e&&n(0,s=e.drawOffer),"onResign"in e&&n(1,r=e.onResign),"onDrawOffer"in e&&n(2,i=e.onDrawOffer),"onDrawReject"in e&&n(3,o=e.onDrawReject)},[s,r,i,o]}class o extends s.f_{constructor(e){super(),(0,s.S1)(this,e,i,r,s.N8,{drawOffer:0,onResign:1,onDrawOffer:2,onDrawReject:3})}}const a=o},348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var s=n(0);function r(e,t,n){const s=e.slice();return s[6]=t[n],s}function i(e){let t;return{c(){t=(0,s.bG)("li"),t.textContent="No past games!\n  ",(0,s.Lj)(t,"class","list-group-item")},m(e,n){(0,s.$T)(e,t,n)},d(e){e&&(0,s.og)(t)}}}function o(e){let t,n,r,i,o,a,u,c,d,h,R,f,p,g,y,m,T,w=e[6].p0Name+"",E=e[6].p1Name+"",D=e[6].ply+"",I=(e[6].winner?1===e[6].winner?e[2]:e[3]:e[1])+"",b=(e[6].earlyEnd?e[6].winner<2?e[4]:e[5]:"")+"";return{c(){t=(0,s.bG)("li"),n=(0,s.bG)("span"),r=(0,s.fL)(w),o=(0,s.fL)(" vs "),a=(0,s.bG)("span"),u=(0,s.fL)(E),d=(0,s.Dh)(),h=(0,s.bG)("p"),R=(0,s.fL)("Ply "),f=(0,s.fL)(D),p=(0,s.fL)(": "),g=(0,s.fL)(I),y=(0,s.Dh)(),m=(0,s.fL)(b),T=(0,s.Dh)(),(0,s.Lj)(n,"class",i=`badge bg-${l(e[6].winner)}`),(0,s.Lj)(a,"class",c=`badge bg-${l(1-e[6].winner)}`),(0,s.Lj)(t,"class","list-group-item")},m(e,i){(0,s.$T)(e,t,i),(0,s.R3)(t,n),(0,s.R3)(n,r),(0,s.R3)(t,o),(0,s.R3)(t,a),(0,s.R3)(a,u),(0,s.R3)(t,d),(0,s.R3)(t,h),(0,s.R3)(h,R),(0,s.R3)(h,f),(0,s.R3)(h,p),(0,s.R3)(h,g),(0,s.R3)(h,y),(0,s.R3)(h,m),(0,s.R3)(t,T)},p(e,t){1&t&&w!==(w=e[6].p0Name+"")&&(0,s.rT)(r,w),1&t&&i!==(i=`badge bg-${l(e[6].winner)}`)&&(0,s.Lj)(n,"class",i),1&t&&E!==(E=e[6].p1Name+"")&&(0,s.rT)(u,E),1&t&&c!==(c=`badge bg-${l(1-e[6].winner)}`)&&(0,s.Lj)(a,"class",c),1&t&&D!==(D=e[6].ply+"")&&(0,s.rT)(f,D),15&t&&I!==(I=(e[6].winner?1===e[6].winner?e[2]:e[3]:e[1])+"")&&(0,s.rT)(g,I),49&t&&b!==(b=(e[6].earlyEnd?e[6].winner<2?e[4]:e[5]:"")+"")&&(0,s.rT)(m,b)},d(e){e&&(0,s.og)(t)}}}function a(e){let t,n=e[0],a=[];for(let t=0;t<n.length;t+=1)a[t]=o(r(e,n,t));let l=null;return n.length||(l=i()),{c(){t=(0,s.bG)("ul");for(let e=0;e<a.length;e+=1)a[e].c();l&&l.c(),(0,s.Lj)(t,"class","list-group list-group-flush overflow-auto"),(0,s.cz)(t,"max-height","15rem")},m(e,n){(0,s.$T)(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);l&&l.m(t,null)},p(e,[s]){if(63&s){let u;for(n=e[0],u=0;u<n.length;u+=1){const i=r(e,n,u);a[u]?a[u].p(i,s):(a[u]=o(i),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=n.length,n.length?l&&(l.d(1),l=null):l||(l=i(),l.c(),l.m(t,null))}},i:s.ZT,o:s.ZT,d(e){e&&(0,s.og)(t),(0,s.RM)(a,e),l&&l.d()}}}function l(e){return e?1===e?"danger":"secondary":"success"}function u(e,t,n){let{results:s}=t,{p0Win:r="X wins"}=t,{p1Win:i="O wins"}=t,{draw:o="draw"}=t,{winEarly:a="by forfeit"}=t,{drawEarly:l="by agreement"}=t;return e.$$set=e=>{"results"in e&&n(0,s=e.results),"p0Win"in e&&n(1,r=e.p0Win),"p1Win"in e&&n(2,i=e.p1Win),"draw"in e&&n(3,o=e.draw),"winEarly"in e&&n(4,a=e.winEarly),"drawEarly"in e&&n(5,l=e.drawEarly)},[s,r,i,o,a,l]}class c extends s.f_{constructor(e){super(),(0,s.S1)(this,e,u,a,s.N8,{results:0,p0Win:1,p1Win:2,draw:3,winEarly:4,drawEarly:5})}}const d=c},172:(e,t,n)=>{"use strict";n.d(t,{Zt:()=>r,Dh:()=>u});var s,r,i,o=n(6),a=n(451),l=n(19);!function(e){e[e.ROUND_WAIT=9]="ROUND_WAIT",e[e.ROUND_INTERM=10]="ROUND_INTERM",e[e.ROUND_START=11]="ROUND_START",e[e.READY=12]="READY",e[e.MOVE_CONFIRM=13]="MOVE_CONFIRM",e[e.END_ROUND=14]="END_ROUND",e[e.END_TURN=15]="END_TURN",e[e.NUM=16]="NUM"}(s||(s={})),function(e){e[e.READY=5]="READY",e[e.MOVE=6]="MOVE",e[e.MOVE_END=7]="MOVE_END",e[e.NUM=8]="NUM"}(r||(r={})),function(e){e[e.WAITING=0]="WAITING",e[e.INTERMISSION=1]="INTERMISSION",e[e.ACTIVE=2]="ACTIVE"}(i||(i={}));class u extends l.R7{constructor(){super(...arguments),this.isReady=(0,o.$_)(!1),this.inRound=(0,o.$_)(!1),this.roundState=(0,o.$_)(0),this.roundTimerStart=(0,o.$_)(0),this.roundTimerEnd=(0,o.$_)(0),this.roundPlayers=(0,o.$_)([]),this.roundPlayerQueue=(0,o.$_)([]),this.INTERMISSION_TIME=3e4,this.ROUND_TIME=2e4}sendReady(e){var t;null===(t=this.room)||void 0===t||t.send((new a.T).putInt(r.READY).putBool(e).toArray())}sendMoveEnd(){var e;null===(e=this.room)||void 0===e||e.send((new a.T).putInt(r.MOVE_END).toArray())}roundWait(){this.roundState.set(i.WAITING),this.unsetReady()}roundIntermission(e){this.roundState.set(i.INTERMISSION),this.setTimer(e),this.unsetReady(),this.isReady.set(!1)}roundStart(e){this.roundState.set(i.ACTIVE),this.setTimer(e),this.unsetReady()}roundSetPlayers(e){this.roundPlayers.set(e)}roundSetPlayerQueue(e){this.roundPlayerQueue.set(e)}setTimer(e){this.roundTimerStart.set(Date.now()),this.roundTimerEnd.set(Date.now()+e)}processWelcomeGame(e){const t=e.getInt();if(0===t)this.roundWait();else if(1===t){this.roundIntermission(e.getInt());for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const n=this.clients.get(t);n&&(n.ready=!0)}}else 2===t&&this.roundStart(e.getInt());const n=[];for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const s=this.clients.get(t);s&&(s.inRound=!0,n.push(s))}this.roundSetPlayers(n);const s=[];for(let t=0;t<=this.clients.size;t++){const t=e.getInt();if(t<0)break;const n=this.clients.get(t);n&&s.push(n)}this.roundSetPlayerQueue(s),this.processWelcomeGame2(e)}processWelcomeGame2(e){}playerActivated(e){this.roundPlayerQueue.update((t=>[...t,e]))}playerDeactivated(e){this.roundPlayers.update((t=>t.filter((t=>t!==e)))),this.roundPlayerQueue.update((t=>t.filter((t=>t!==e)))),e.inRound=!1,e.isMe&&this.inRound.set(!1)}processMessage2(e,t){var n,r;switch(e){case s.ROUND_WAIT:this.roundWait();break;case s.ROUND_INTERM:this.roundIntermission(this.INTERMISSION_TIME);break;case s.ROUND_START:{const e=[];for(const e of this.clients.values())e.inRound=!1;for(let n=0;n<=this.clients.size;n++){const n=t.getInt();if(n<0)break;const s=this.clients.get(n);s&&(s.inRound=!0,e.push(s))}this.inRound.set(null!==(r=null===(n=this.clients.get(this.myCn))||void 0===n?void 0:n.inRound)&&void 0!==r&&r),this.roundSetPlayers(e),this.roundSetPlayerQueue([]),this.roundStart(this.ROUND_TIME),this.processRoundStart(t);break}case s.READY:{const e=t.getInt(),n=t.getBool(),s=this.clients.get(e);s&&(s.ready=n,e===this.myCn&&this.isReady.set(n),this.updatePlayers(!0),this.roundPlayers.update((e=>e)),this.roundPlayerQueue.update((e=>e)));break}case s.MOVE_CONFIRM:this.processMoveConfirm(t);break;case s.END_TURN:this.processEndTurn(t);break;case s.END_ROUND:this.processEndRound(t);break;default:return this.processMessage3(e,t)}return!0}processRoundStart(e){}processMessage3(e,t){return!1}unsetReady(){for(const e of this.clients.values())e.ready=!1}}u.DEFAULT_PLAYER=Object.assign(Object.assign({},l.R7.DEFAULT_PLAYER),{ready:!1,inRound:!1})},349:(e,t,n)=>{"use strict";n.d(t,{Du:()=>u});var s,r,i=n(6),o=n(451),a=n(19),l=n(172);!function(e){e[e.OFFER_DRAW=16]="OFFER_DRAW",e[e.NUM=17]="NUM"}(s||(s={})),function(e){e[e.FORFEIT=8]="FORFEIT",e[e.OFFER_DRAW=9]="OFFER_DRAW",e[e.REJECT_DRAW=10]="REJECT_DRAW",e[e.NUM=11]="NUM"}(r||(r={}));class u extends l.Dh{constructor(){super(...arguments),this.p0=-1,this.p1=-1,this.ply=(0,i.$_)(0),this.winner=(0,i.$_)(0),this.myTurn=(0,i.$_)(!1),this.myPlayer=(0,i.$_)(0),this.drawOffer=(0,i.$_)(0)}sendMoveEnd(){var e;null===(e=this.room)||void 0===e||e.send((new o.T).putInt(l.Zt.MOVE_END).toArray())}sendResign(){var e;null===(e=this.room)||void 0===e||e.send((new o.T).putInt(r.FORFEIT).toArray())}sendDrawOffer(){var e;null===(e=this.room)||void 0===e||e.send((new o.T).putInt(r.OFFER_DRAW).toArray())}sendDrawReject(){var e;null===(e=this.room)||void 0===e||e.send((new o.T).putInt(r.REJECT_DRAW).toArray())}processWelcomeGame2(e){this.resetRound(),this.processPlayerInfo(e),this.processRoundInfo(e)}processRoundStart(e){this.resetRound(),this.processPlayerInfo(e),this.processRoundStartInfo(e)}processEndRound(e){const t=e.getInt(),n=e.getBool(),s=this.clients.get(this.p0),r=this.clients.get(this.p1);s&&this.setResult(s,t),r&&this.setResult(r,1-t);const i={p0Name:a.R7.formatPlayerName(s,this.p0),p1Name:a.R7.formatPlayerName(r,this.p1),winner:t,earlyEnd:n,ply:this.ply.get()};this.addHistory(i),this.winner.set(t+1),this.drawOffer.set(0)}processWelcomePlayer(e,t){t.wins=e.getInt(),t.loss=e.getInt(),t.ties=e.getInt(),t.streak=e.getInt(),t.score=((t.wins<<1)+t.ties<<1)+t.loss}playerResetStats(e){e.score=0,e.wins=0,e.loss=0,e.ties=0,e.streak=0}processEndTurn(e){this.processEndTurn2(e),this.ply.update((e=>e+1));const t=this.myPlayer.get();this.myTurn.set(!!t&&(1&this.ply.get())==t-1),this.setTimer(this.ROUND_TIME)}processMessage3(e,t){switch(e){case s.OFFER_DRAW:{const e=t.getInt(),n=t.getInt();this.drawOffer.set(e&&(n===this.myCn?1:2));break}default:return!1}return!0}resetRound(){this.ply.set(0),this.winner.set(0),this.drawOffer.set(0)}processPlayerInfo(e){this.p0=e.getInt(),this.p1=e.getInt(),this.myPlayer.set(this.p0===this.myCn?1:this.p1===this.myCn?2:0),this.myTurn.set(this.p0===this.myCn)}setResult(e,t){t?1===t?(e.loss++,e.streak>0&&(e.streak=0),e.streak--,e.score++):(e.ties++,e.score+=2):(e.wins++,e.streak<0&&(e.streak=0),e.streak++,e.score+=4)}}u.DEFAULT_PLAYER=Object.assign(Object.assign({},l.Dh.DEFAULT_PLAYER),{score:0,wins:0,loss:0,ties:0,streak:0})},46:(e,t,n)=>{"use strict";function s(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(;e--;)n+=t[Math.random()*t.length|0];return n}function r(e,t,n){return Math.max(t,Math.min(e,n))}n.d(t,{yF:()=>s,uZ:()=>r})}}]);